'use strict';(function(r,k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define(k):(r="undefined"!==typeof globalThis?globalThis:r||self,r.vue_dsl=k())})(this,function(){function r(a,g,c,f,d,e,b){try{var h=a[e](b),u=h.value}catch(m){c(m);return}h.done?g(u):Promise.resolve(u).then(f,d)}function k(a){return function(){var g=this,c=arguments;return new Promise(function(f,d){function e(a){r(h,f,d,e,b,"next",a)}function b(a){r(h,f,d,e,
b,"throw",a)}var h=a.apply(g,c);e(void 0)})}}function y(a,g){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);g&&(f=f.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));c.push.apply(c,f)}return c}function l(a){for(var g=1;g<arguments.length;g++){var c=null!=arguments[g]?arguments[g]:{};g%2?y(Object(c),!0).forEach(function(f){var d=c[f];f in a?Object.defineProperty(a,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[f]=d}):
Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):y(Object(c)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(c,f))})}return a}function C(a){return x.apply(this,arguments)}function x(){x=k(function*(a){var g={hint:"Allowed node type that must be ommited",func:function(){var d=k(function*(e,b){return a.reply_template({hasChildren:!1,state:b})});return function(a,b){return d.apply(this,arguments)}}()},c=function(d){var e=a.dsl_parser.findVariables({text:d,
symbol:"**",symbol_closing:"**"});d=a.dsl_parser.replaceVarsSymbol({text:d,from:{open:"**",close:"**"},to:{open:"${",close:"}"}});return"${"+e+"}"==d?e:"`".concat(d,"`")},f=function(d,e){var b={refx:e.id},h={};if("attributes_aliases"in a.x_commands[d]){var c=a.x_commands[d].attributes_aliases;Object.keys(c).map(function(a){c[a].split(",").map(b=>{h[b]=a})})}Object.keys(e.attributes).map(function(a){var d=e.attributes[a];a=a.trim().replace(":","");var c=a.toLowerCase(),f=d.toString().replaceAll("$variables.",
"").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env.").replaceAll("$store.","$store.state.").trim();"props"==c?d.split(" ").map(a=>{b[a]=null}):c in h&&d!=f?"v-model"==h[c]?b[h[c]]=f:b[":".concat(h[c])]=f:c in h?b[h[c]]=f:d!=f||"$"==d[0]||"!"==d[0]?b[":".concat(a)]=f:b[a]=f});return b};return{def_config:l(l({},g),{x_icons:"desktop_new",x_level:"2",x_text_contains:"config"}),def_modelos:l(l({},g),{x_icons:"desktop_new",x_level:"2",x_text_contains:"modelos"}),def_assets:l(l({},
g),{x_icons:"desktop_new",x_level:"2",x_text_contains:"assets"}),def_server:{x_icons:"desktop_new",x_level:"2",x_text_contains:"server|servidor|api",hint:"Representa a un backend integrado con funciones de express.",func:function(){var d=k(function*(e,b){e=a.reply_template();a.x_state.npm=l(l({},a.x_state.npm),{body_parser:"*","cookie-parser":"*"});a.x_state.central_config.static=!1;return e});return function(a,b){return d.apply(this,arguments)}}()},def_server_path:{x_icons:"list",x_level:"3,4",x_or_hasparent:"def_server",
x_not_icons:"button_cancel,desktop_new,help",hint:"Carpeta para ubicacion de funcion de servidor",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var h=yield a.isExactParentID(e.id,"def_server_path");3==e.level?b.state.current_folder=e.text:4==e.level&&1==h?(h=yield a.dsl_parser.getParentNode({id:e.id}),b.state.current_folder="".concat(h.text,"/").concat(e.text)):b.valid=!1;return b});return function(a,b){return d.apply(this,arguments)}}()},def_server_func:{x_empty:"icons",x_level:"3,4,5",
x_or_hasparent:"def_server",hint:"Corresponde a la declaracion de una funcion de servidor",func:function(){var d=k(function*(e,b){var h=a.reply_template({state:b});a.x_state.central_config.static=!1;h.state.current_func=e.text;2!=e.level&&(b=h.state.current_folder?h.state.current_folder.split("/"):[],h.state.current_func=[...b,e.text].join("_"));a.x_state.functions[h.state.current_func]||(a.x_state.functions[h.state.current_func]={tipo:"web",acceso:"*",params:"",param_doc:{},doc:e.text_note,method:"get",
return:"",path:"/"+(h.state.current_folder?h.state.current_folder+"/":"")+e.text,imports:{}});Object.keys(e.attributes).map(function(b){b=b.toLowerCase();":type type tipo :tipo :method method".split(" ").includes(b)?a.x_state.functions[h.state.current_func].method=e.attributes[b]:b.contains(":")?a.x_state.functions[h.state.current_func].param_doc[b.split(":")[0]]={type:b.split(":")[1],desc:e.attributes[b]}:a.x_state.functions[h.state.current_func][b.toLowerCase().trim()]=e.attributes[b]});h.open=
a.tagParams("func_code",{name:h.state.current_func,method:a.x_state.functions[h.state.current_func].method,path:a.x_state.functions[h.state.current_func].path},!1)+"\n";h.close="</func_code>";return h});return function(a,b){return d.apply(this,arguments)}}()},def_store:{x_icons:"desktop_new",x_level:"2",x_text_contains:"store",hint:"Representa una coleccion de stores de Vue",func:function(){var d=k(function*(e,b){return a.reply_template({state:b,hasChildren:!0})});return function(a,b){return d.apply(this,
arguments)}}()},def_store_def:{x_empty:"icons",x_level:"3",x_all_hasparent:"def_store",hint:"Representa a una definicion de store de VueX",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var h="normal",d="",c="";b.state.current_store=e.text;a.x_state.stores||(a.x_state.stores={});a.x_state.stores&&!1===e.text in a.x_state.stores&&(a.x_state.stores[e.text]={});Object.keys(e.attributes).map(function(b){b=b.toLowerCase();[":type","type","tipo",":tipo"].includes(b)?["sesion","session"].includes(e.attributes[b])?
(h="session",a.x_state.npm["nuxt-vuex-localstorage"]="*"):"local persistent persistente localstorage storage db bd".split(" ").includes(e.attributes[b])&&(h="local",a.x_state.npm["nuxt-vuex-localstorage"]="*"):["version",":version"].includes(b)?d=e.attributes[b]:["expire",":expire","expira",":expira"].includes(b)&&(c=e.attributes[b])});a.x_state.stores_types&&!1===h in a.x_state.stores_types&&(a.x_state.stores_types[h]={});!1===b.state.current_store in a.x_state.stores_types[h]&&(a.x_state.stores_types[h][b.state.current_store]=
{});""!=d&&!1===b.state.current_store in a.x_state.stores_types.versions&&(a.x_state.stores_types.versions[b.state.current_store]=d);""!=c&&!1===b.state.current_store in a.x_state.stores_types.expires&&(a.x_state.stores_types.expires[b.state.current_store]=c);return b});return function(a,b){return d.apply(this,arguments)}}()},def_store_field:{x_empty:"icons",x_level:">3",x_all_hasparent:"def_store_def",hint:"Representa al campo de un store de VueX",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});
var h="string",d="",c=e.text.trim();-1!=e.text.indexOf(":")&&(h=c.split(":").slice(-1)[0],c=c.split(":")[0]);Object.keys(e.attributes).map(function(a){var b=a.toLowerCase();[":def,:default,valor,value"].includes(b)?d=e.attributes[a].toLowerCase():[":tipo,:type,tipo,type"].includes(b)&&(h=e.attributes[a].toLowerCase())});b.state.current_store in a.x_state.stores||(a.x_state.stores[b.state.current_store]={});a.x_state.stores[b.state.current_store][c.trim()]={default:d,type:h};return b});return function(a,
b){return d.apply(this,arguments)}}()},def_store_mutation:{x_level:">3",x_icons:"help",x_all_hasparent:"def_store",attributes_aliases:{params:":params,params"},hint:"Representa la modificacion de un store de VueX",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b,hasChildren:!0});var h=f("def_store_mutation",e);b.state.current_store_mutation=e.text.trim();":mutations"in a.x_state.stores[b.state.current_store]||(a.x_state.stores[b.state.current_store][":mutations"]={});a.x_state.stores[b.state.current_store][":mutations"][b.state.current_store_mutation]=
h;b.open=a.tagParams("store_mutation",l({store:b.state.current_store,mutation:b.state.current_store_mutation},h),!1)+"\n";b.close="</store_mutation>";return b});return function(a,b){return d.apply(this,arguments)}}()},def_store_modificar:{x_level:">4",x_icons:"desktop_new",x_all_hasparent:"def_store_mutation",x_text_contains:"modificar",hint:"Comando para modificar los valores del state del store padre",func:function(){var d=k(function*(e,b){var h=a.reply_template({state:b,hasChildren:!0}),d=require("safe-eval");
Object.keys(e.attributes).map(function(f){var n=f.trim();f=e.attributes[f];if("{now}"==f)h.open+="state.".concat(n," = new Date()\n");else if(""==f)f="",n in a.x_state.stores[b.current_store]&&(f=a.x_state.stores[b.current_store][n].default),""==f&&(f="''"),h.open+="state.".concat(n," = ").concat(f,"\n");else if(f.contains("**")){var g=f.trim();e.icons.includes("bell")&&(g=c(f));""==g&&(g="''");g.contains("this.")||g.contains("params.")?(g=g.replaceAll("this.","").replaceAll("params.",""),h.open+=
"state.".concat(n," = objeto.").concat(g,"\n")):h.open+="state.".concat(n," = ").concat(g,"\n")}else 0==f.contains("!")&&d(f)!==""+f?h.open+="state.".concat(n," = ").concat(f,"\n"):""!=f&&"!"==f.charAt(0)&&0==f.contains(".")?h.open+="state.".concat(n," = !state.").concat(n,"\n"):""!=f&&f.charAt(0)});return h});return function(a,b){return d.apply(this,arguments)}}()},def_store_call:{x_level:">1",x_icons:"desktop_new",x_text_contains:"store:",x_or_hasparent:"def_event_element,def_event_method,def_event_server,def_condicion,def_otra_condicion,def_event_mounted",
hint:"Representa al llamdo de un evento de un store",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b,hasChildren:!0});var h=e.text.split(" ")[0].replaceAll("store:","").trim(),d={},c="current_proxy"in b.state?!0:!1,f=a.dsl_parser.findVariables({text:e.text,symbol:'"',symbol_closing:'"'}).trim();Object.keys(e.attributes).map(function(a){var b=a.trim();a=e.attributes[a];a=a.replaceAll("$variables.","this.").replaceAll("$vars.","$this.").replaceAll("$params.","this.").replaceAll("$env.",
"process.env.");a.contains("$store.")&&(a=1==c?a.replaceAll("$store.","store.state."):a.replaceAll("$store.","this.$store.state."));d[b]=a});var g=a.jsDump(d).replaceAll("'`","`").replaceAll("`'","`");b.open=(1==c?"store.":"this.$store.")+"commit('".concat(h,"/").concat(f,"', ").concat(g,");");return b});return function(a,b){return d.apply(this,arguments)}}()},def_proxies:{x_icons:"desktop_new",x_level:2,x_text_contains:"prox",hint:"Representa una coleccion de proxies de Vue",func:function(){var d=
k(function*(e,b){return a.reply_template({state:b})});return function(a,b){return d.apply(this,arguments)}}()},def_proxy_def:{x_level:3,x_empty:"icons",x_or_isparent:"def_proxies",hint:"Representa una definicion de un proxy (middleware) en Vue",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});b.state.current_proxy=e.text.trim();a.x_state.proxies[b.state.current_proxy]={imports:{underscore:"_"},code:""};b.open=a.tagParams("proxy_code",{name:b.state.current_proxy},!1)+"\n";b.close=
"</proxy_code>";return b});return function(a,b){return d.apply(this,arguments)}}()},def_page:{x_level:2,x_not_icons:"button_cancel,desktop_new,list,help",x_not_text_contains:"componente:,layout:",hint:"Archivo vue",func:function(){var d=k(function*(e,b){var h=a.reply_template({state:b});h.state.current_page=e.text;a.x_state.pages[h.state.current_page]||(a.x_state.pages[h.state.current_page]={tipo:"page",acceso:"*",params:"",layout:"",defaults:{},imports:{},components:{},directives:{},variables:{},
seo:{},meta:{},head:{script:[],meta:[],seo:{}},var_types:{},proxies:"",return:"",styles:{},script:{},mixins:{},path:"/"+h.state.current_page});h.state.from_def_layout&&(a.x_state.pages[h.state.current_page].tipo="layout");h.state.from_def_componente&&(a.x_state.pages[h.state.current_page].tipo="componente");e.icons.includes("gohome")&&(a.x_state.pages[h.state.current_page].path="/");var d={};Object.keys(e.attributes).map(function(b){var c=e.attributes[b];c=c.replaceAll("$variables.","").replaceAll("$vars.",
"").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if(["proxy"].includes(b.toLowerCase()))a.x_state.pages[h.state.current_page].proxies=c;else if(["acceso","method"].includes(b.toLowerCase()))a.x_state.pages[h.state.current_page].acceso=c;else if(["path","url","ruta"].includes(b.toLowerCase()))a.x_state.pages[h.state.current_page].path=c;else if(["layout"].includes(b.toLowerCase()))a.x_state.pages[h.state.current_page].layout=c;else if(["meta:title",
"meta:titulo"].includes(b.toLowerCase()))a.x_state.pages[h.state.current_page].xtitle=c;else if(["background","fondo"].includes(b.toLowerCase())){d.id="tapa";var f=a.getAsset(c,"css");a.x_state.pages[h.state.current_page].styles["#tapa"]={"background-image":"url('".concat(f,"')"),"background-repeat":"no-repeat","background-size":"100vw"}}else":"!=b.charAt(0)&&c!=e.attributes[b]?d[":"+b]=c:d[b]=c;if(h.state.from_def_layout||h.state.from_def_componente)if("params"==b)a.x_state.pages[h.state.current_page].params=
c;else if(b.contains("params:")||b.contains("param:"))b=b.replaceAll("params:","").replaceAll("param:","").trim(),a.x_state.pages[h.state.current_page].defaults[b]=c}.bind(this));""!=e.text_note&&(h.open="\x3c!-- ".concat(e.text_note.replaceAll("<br/ >","\n")," --\x3e\n"));h.open+="<template>\n";!1==="from_def_componente"in h.state&&""==a.x_state.pages[h.state.current_page].layout&&(h.open+="\t"+a.tagParams("v-app",d,!1)+"\n",h.close+="\t</v-app>\n");h.close+="</template>\n";return h});return function(a,
b){return d.apply(this,arguments)}}()},def_page_seo:{x_level:3,x_icons:"desktop_new",x_text_contains:"seo",hint:"Definicion local de SEO",func:function(){var d=k(function*(e,b){var h=a.reply_template({state:b});(yield e.getNodes()).map(function(){var e=k(function*(e){var h=e.text.toLowerCase().trim(),d=yield e.getNodes();if("keywords"==h){var c=[];d.map(a=>{c.push(a.text)});a.x_state.pages[b.current_page].seo[h]=c;a.x_state.pages[b.current_page].meta.push({hid:a.hash(d),name:"keywords",content:c.join(",")})}else"language"==
h&&0<d.length?(a.x_state.pages[b.current_page].seo[h]=d[0].text,a.x_state.pages[b.current_page].meta.push({hid:a.hash(d),lang:d[0].text.toLowerCase().trim(),content:d[0].text})):0<d.length&&(a.x_state.pages[b.current_page].seo[h]=d[0].text,h.contains(":")?a.x_state.pages[b.current_page].meta.push({property:h,vmid:h,content:d[0].text}):a.x_state.pages[b.current_page].meta.push({hid:a.hash(d),name:e.text.trim(),content:d[0].text}))});return function(a){return e.apply(this,arguments)}}().bind(this));
return h});return function(a,b){return d.apply(this,arguments)}}()},def_page_estilos:{x_level:"3,4",x_icons:"desktop_new",x_text_contains:"estilos",x_or_hasparent:"def_page,def_componente,def_layout",hint:"Definicion de estilos/clases locales",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});e=l(l({},{scoped:!0}),f("def_page_estilos",e));b.open=a.tagParams("page_estilos",e,!1);b.close="</page_estilos>";return b});return function(a,b){return d.apply(this,arguments)}}()},def_page_estilos_class:{x_level:4,
x_empty:"icons",x_all_hasparent:"def_page_estilos",hint:"Definicion de clase CSS en template VUE",func:function(){var d=k(function*(e,b){var h=a.reply_template({state:b});b=e.text.trim().charAt(0);!1===["#",".","|"].includes(b)?h.open=".".concat(e.text.trim()," {\n"):h.open="|"==b?"".concat(e.text.trim().substring(1)," {\n"):"".concat(e.text.trim()," {\n");Object.keys(e.attributes).map(function(b){var d=e.attributes[b];a.x_state.es6&&!d.contains("!important")&&";"!=d.slice(-1)?h.open+="\t".concat(b,
": ").concat(d," !important;\n"):a.x_state.es6&&!d.contains("!important")?h.open+="\t".concat(b,": ").concat(d.slice(0,-1)," !important;\n"):h.open+="\t".concat(b,": ").concat(d,";\n")});h.open+="}\n";return h});return function(a,b){return d.apply(this,arguments)}}()},def_layout:{x_level:2,x_not_icons:"button_cancel,desktop_new,list,help,idea",x_text_contains:"layout:",x_empty:"icons",hint:"Archivo vue tipo layout",func:function(){var d=k(function*(e,b){a.reply_template({state:b});e=yield a.x_commands.def_page.func(e,
l(l({},b),{from_def_layout:!0}));delete e.state.from_def_layout;return e});return function(a,b){return d.apply(this,arguments)}}()},def_layout_view:{x_level:">2",x_icons:"idea",x_text_contains:"layout:",hint:"Contenedor flexible, layout:flex o layout:wrap",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var h="flex",d=6;""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note.trim()," --\x3e"));e.text.contains(":wrap")&&(h="wrap");var c=f("def_layout_view",e);e=l({},c);c.width&&
(d=c.width,c.width.contains("%")&&(d=Math.round(12*parseInt(c.width.replaceAll("%",""))/100)),delete c.width);c[":width"]&&delete c[":width"];e.margen&&"true"==e.margen?(delete c.margen,e.center&&"true"==e.center?(b.open+=a.tagParams("v-container",{"fill-height":null},!1)+"\n",b.open+=a.tagParams("v-row",{"align-center":null},!1)+"\n"):"flex"==h?(b.open+="<v-container>\n",c.row=null,b.open+=a.tagParams("v-layout",c,!1)+"\n"):"wrap"==h&&(b.open+=a.tagParams("v-container",{"fill-height":null,"container--fluid":null,
"grid-list-xl":null},!1)+"\n",c.wrap=null,b.open+=a.tagParams("v-layout",c,!1)+"\n"),"flex"==h&&e.center&&"true"==e.center&&(c.xs12=null,c["sm"+d]=null,c["offset-sm"+Math.round(d/2)]=null,b.open+=a.tagParams("v-flex",c,!1)+"\n",b.close+="</v-flex>"),b.close=a.x_state.es6&&e.center&&"true"==e.center?b.close+"</v-row>\n":b.close+"</v-layout>\n",b.close+="</v-container>\n"):(e.center&&"true"==e.center?(delete c.center,a.x_state.es6?(c=l(l({},c),{wrap:null,"align-center":null}),b.open+=a.tagParams("v-row",
c,!1)+"\n"):(c=l(l({},c),{row:null,wrap:null,"align-center":null}),b.open+=a.tagParams("v-layout",c,!1)+"\n")):b.open+=a.tagParams("v-layout",{wrap:null},!1)+"\n","flex"==h&&e.center&&"true"==e.center&&(delete c.center,c.xs12=null,c["sm"+d]=null,c["offset-sm"+Math.round(d/2)]=null,b.open+=a.tagParams("v-flex",c,!1)+"\n",b.close+="</v-flex>"),b.close=a.x_state.es6&&e.center&&"true"==e.center?b.close+"</v-row>":b.close+"</v-layout>");return b});return function(a,b){return d.apply(this,arguments)}}()},
def_layout_contenido:{x_level:3,x_icons:"idea",x_text_contains:"contenido",x_all_hasparent:"def_layout",hint:"Placeholder para contenidos de paginas en pantallas tipo layouts",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var h={};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));a.x_state.central_config["keep-alive"]&&(h["keep-alive"]=null);b.open+=a.tagParams("nuxt",h,!0)+"\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_componente:{x_level:2,
x_not_icons:"button_cancel,desktop_new,list,help,idea",x_text_contains:"componente:",x_empty:"icons",hint:"Archivo vue tipo componente",func:function(){var c=k(function*(e,b){a.reply_template({state:b});e=yield a.x_commands.def_page.func(e,l(l({},b),{from_def_componente:!0}));delete e.state.from_def_componente;return e});return function(a,b){return c.apply(this,arguments)}}()},def_componente_view:{x_level:">2",x_icons:"idea",x_text_contains:"componente:",hint:"Instancia de componente",func:function(){var c=
k(function*(e,b){var h=a.reply_template({state:b}),c=e.text.trim().split(":").pop(),d="c-".concat(c),g=c.replaceAll("-","");a.x_state.pages[b.current_page].imports["~/components/".concat(c,".vue")]=g;a.x_state.pages[b.current_page].components[d]=g;b=f("def_componente_view",e);""!=e.text_note&&(h.open="\x3c!-- ".concat(e.text_note.trim()," --\x3e\n"));h.open+=a.tagParams(d,b,!1)+"\n";h.close="</".concat(d,">\n");return h});return function(a,b){return c.apply(this,arguments)}}()},def_componente_emitir:{x_level:">2",
x_icons:"desktop_new",x_text_contains:"llamar evento|emitir evento",x_all_hasparent:"def_componente",hint:"Emite un evento desde el componente a sus instancias",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var h=a.dsl_parser.findVariables({text:e.text,symbol:'"',symbol_closing:'"'}).trim(),d=[];Object.keys(e.attributes).map(function(a){var b=e.attributes[a];b.contains("**")&&e.icons.includes("bell")?b=c(b):"true"==b||"false"==b?(b="true"==b?!0:b,b="false"==b?!1:b):b.contains("$")?
b=b.replaceAll("$variables.","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$config.","process.env").replaceAll("$store.","this.$store.state."):0==b.contains("this.")&&0==b.contains("'")&&(b="'".concat(b,"'"));d.push("".concat(a,": ").concat(b))});""!=e.text_note&&(b.open="// ".concat(e.text_note.trim(),"\n"));b.open+="this.$emit('".concat(h,"',{").concat(d.join(","),"});\n");return b});return function(a,b){return d.apply(this,arguments)}}()},def_card:{x_level:">2",
x_icons:"idea",x_text_contains:"card",x_not_text_contains:":text,:texto,:title,:action,:image,:media",attributes_aliases:{width:"width,ancho",height:"height,alto"},hint:"Card de vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_card",e);b.open+=a.tagParams("v-card",e,!1)+"\n";b.close+="</v-card>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_card_title:{x_level:">3",
x_icons:"idea",x_text_contains:"card:title",x_all_hasparent:"def_card",hint:"Titulo de card de vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_card_title",e);b.open+=a.tagParams("v-card-title",e,!1)+"\n";b.close+="</v-card-title>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_card_text:{x_level:">3",x_icons:"idea",x_text_contains:"card:text",x_all_hasparent:"def_card",
hint:"Contenido de card de vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_card_text",e);b.open+=a.tagParams("v-card-text",e,!1)+"\n";b.close+="</v-card-text>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_card_actions:{x_level:">3",x_icons:"idea",x_text_contains:"card:action",x_all_hasparent:"def_card",hint:"Acciones de card de vuetify",func:function(){var c=k(function*(e,
b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_card_actions",e);b.open+=a.tagParams("v-card-actions",e,!1)+"\n";b.close+="</v-card-actions>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_card_media:{x_level:">3",x_icons:"idea",x_text_contains:"card:media",x_all_hasparent:"def_card",hint:"Contenido multimedia para card de vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&
(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_card_media",e);a.x_state.es6?(b.open+=a.tagParams("v-img",e,!1)+"\n",b.close+="</v-img>\n"):(b.open+=a.tagParams("v-card-media",e,!1)+"\n",b.close+="</v-card-media>\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_form:{x_level:">2",x_icons:"idea",x_text_contains:"form",attributes_aliases:{"v-model":"valid,value"},hint:"Formulario de vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=
e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_form",e);b.open+=a.tagParams("v-form",e,!1)+"\n";b.close+="</v-form>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_form_field:{x_level:">2",x_icons:"pencil",x_not_icons:"calendar,clock,attach,freemind_butterfly",x_not_text_contains:"google:",attributes_aliases:{placeholder:"hint,ayuda",mark:"mask,mascara,formato","prepend-icon":"pre:icon","append-icon":"post:icon",type:"type,tipo",value:"value,valor",
counter:"counter,maxlen,maxlength,max"},hint:"Campo de entrada (text,textarea,checkbox,radio,combo,select,switch,toogle,autocomplete) para usar en formulario vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var h={};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var c=f("def_form_field",e);h=l(l({},{type:"text"}),c);c.refx=e.id;e.text.contains("$")?(e=e.text.trim().split(",").pop(),e=e.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.",
"").replaceAll("$store","$store.state."),c["v-model"]=e):c["v-model"]=e.text.trim();delete c.type;if("combo"==h.type)b.open+=a.tagParams("v-combobox",c,!1)+"\n",b.close+="</v-combobox>\n";else if("toogle"==h.type)b.open+=a.tagParams("v-btn-toogle",c,!1)+"\n",b.close+="</v-btn-toogle>\n";else if(["textarea","checkbox","radio","switch"].includes(h.type))b.open+=a.tagParams("v-".concat(h.type),c,!1)+"\n",b.close+="</v-".concat(h.type,">\n");else if(["autocomplete","autocompletar","auto","select"].includes(h.type)){if("item-text"in
c&&c["item-text"].contains("{{")){var d=c["item-text"];a.dsl_parser.findVariables({text:c["item-text"],symbol:"{{",symbol_closing:"}}",array:!0}).map(a=>{d.replaceAll(a,"item.".concat(a.trim()))});"{{ "==d.slice(0,3)&&(d=d.slice(3));d=" }}"==d.slice(-3)?d.slice(0,-3):d+"'";d=d.replaceAll(" }}","+'").replaceAll("{{ ","'+");c[":item-text"]="(item)=>".concat(d);delete c["item-text"]}else if("item-text"in c&&c["item-text"].contains(" ")){var g=[];c["item-text"].split(" ").map(a=>{g.push("item.".concat(a))});
c[":item-text"]="(item)=>"+g.join("+' '+");delete c["item-text"]}if("item-value"in c&&c["item-value"].contains(" ")){var q=[];c["item-value"].split(" ").map(a=>{q.push("item.".concat(a))});c[":item-value"]="(item)=>"+q.join("+' '+");delete c["item-value"]}["autocomplete","autocompletar","auto"].includes(h.type)?(b.open+=a.tagParams("v-autocomplete",c,!1)+"\n",b.close+="</v-autocomplete>\n"):"select"==h.type&&(!1==="item-value"in c&&!1==="return-object"in c&&!1===":return-object"in c&&(c[":return-object"]=
!0),b.open+=a.tagParams("v-select",c,!1)+"\n",b.close+="</v-select>\n")}else h[":mask"]?(h["v-mask"]=h[":mask"],delete h[":mask"]):h.mask&&(h["v-mask"]="'".concat(h.mask,"'"),delete h.mask),b.open+=a.tagParams("v-text-field",h,!1)+"\n",b.close+="</v-text-field>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_form_field_image:{x_level:">2",x_icons:"pencil,attach",x_not_icons:"calendar,clock,freemind_butterfly",x_not_text_contains:"google:",hint:"Campo de entrada de imagen (subir imagen) para usar en formulario vuetify",
func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var c=f("def_form_field",e);c.refx=e.id;"-"!=e.text.trim()&&(e.text.contains("$")?(e=e.text.trim().split(",").pop(),e=e.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$store","$store.state."),c[":prefill"]=e):c.prefill=e.text.trim());c[":removable"]=!1;c[":hideChangeButton"]=!0;a.x_state.plugins["vue-picture-input"]={global:!0,
npm:{"vue-picture-input":"*"},tag:"picture-input"};c.type&&delete c.type;b.open+=a.tagParams("picture-input",c,!1)+"\n";b.close="</picture-input>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_form_field_galery:{x_level:">2",x_icons:"pencil,freemind_butterfly",x_not_icons:"calendar,clock,attach",x_not_text_contains:"google:",hint:"Campo de entrada de galeria de imagenes (elegir una o varias imagenes) para usar en formulario vuetify",func:function(){var c=k(function*(e,
b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var c=f("def_form_field_galery",e);c.refx=e.id;if(""!=e.text.trim()){var d=e.text.trim();e.text.contains("$")&&(d=d.split(",").pop(),d=d.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$store","$store.state."));c["@onselectimage"]="(item)=>".concat(d,"=[item]");c["@onselectmultipleimage"]="(item)=>".concat(d,"=item");c[":selectedImages"]=d}a.x_state.plugins["vue-picture-input"]=
{global:!0,npm:{"vue-select-image":"*"},tag:"vue-select-image",requires:["vue-select-image/dist/vue-select-image.css"]};c.type&&delete c.type;b.open+=a.tagParams("vue-select-image",c,!1)+"\n";b.close="</vue-select-image>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_form_field_date:{x_level:">2",x_icons:"pencil,calendar",x_not_icons:"clock,attach,freemind_butterfly",x_not_text_contains:"google:",hint:"Campo de entrada con selector de fecha (sin hora) para usar en formulario vuetify",
func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var c=f("def_form_field_date",e);if(""!=e.text.trim()){var d=e.text.trim();e.text.contains("$")&&(d=d.split(",").pop(),d=d.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$store","$store.state."));c["v-model"]=d}a.x_state.npm.luxon="*";a.x_state.plugins["vue-datetime"]={global:!0,npm:{"vue-datetime":"*"}};c.type="date";b.open+=
a.tagParams("datetime",c,!1)+"\n";b.close="</datetime>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_form_field_datetime:{x_level:">2",x_icons:"pencil,calendar,clock",x_not_icons:"attach,freemind_butterfly",x_not_text_contains:"google:",hint:"Campo de entrada con selector de fecha y hora para usar en formulario vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var c=f("def_form_field_datetime",
e);if(""!=e.text.trim()){var d=e.text.trim();e.text.contains("$")&&(d=d.split(",").pop(),d=d.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$store","$store.state."));c["v-model"]=d}a.x_state.plugins["vuetify-datetime-picker"]={global:!0,npm:{"vuetify-datetime-picker":"2.0.3"},styles:[{file:"dtpicker.styl",lang:"styl",content:"@require '~vuetify-datetime-picker/src/stylus/main.styl'"}]};c.type&&delete c.type;b.open+=a.tagParams("v-datetime-picker",c,!1)+
"\n";b.close="</v-datetime-picker>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_form_google_autocomplete:{x_level:">2",x_icons:"pencil",x_text_contains:"google:autocomplet",attributes_aliases:{apiKey:"key,llave",language:"lang,language,lenguaje",id:"id",placeholder:"hint,ayuda"},hint:"Campo autocompletar para direcciones en formulario vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c={language:"es"},d=f("def_form_google_autocomplete",
e);d.apiKey&&(c.apiKey=d.apiKey,delete d.apiKey);d.language&&(c.language=d.language,delete d.language);a.x_state.plugins["vuetify-google-autocomplete"]={global:!0,npm:{"vuetify-google-autocomplete":"*"},config:JSON.stringify(c)};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));b.open+=a.tagParams("vuetify-google-autocomplete",d,!1)+"\n";b.close="</vuetify-google-autocomplete>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_margen:{x_icons:"idea",x_text_contains:"margen",
hint:"Define un margen alrededor del contenido",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c={};Object.keys(e.attributes).map(function(a){var b=e.attributes[a];b=b.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if("props"==a.toLowerCase())for(var d of b.split(" "))c[d]=null;else c[a]=b});b.open+=a.tagParams("v-container",c,!1)+"\n";b.close+="</v-container>\n";return b});
return function(a,b){return c.apply(this,arguments)}}()},def_contenedor:{x_icons:"idea",x_text_contains:"contenedor",x_level:">2",hint:"Vue Container",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c={refx:e.id};Object.keys(e.attributes).map(function(a){var b=e.attributes[a],d=a.toLowerCase().trim(),h=b.toString().replaceAll("$variables","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$env.","process.env.").replaceAll("$store.","$store.state.").trim();if("props"==
d)for(var f of h.split(" "))c[f]=null;else":"!=d.charAt(0)&&""!=b&&b!=h?c[":"+a.trim()]=h:c[a.trim()]=h}.bind(this));""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e\n"));b.open+=a.tagParams("v-container",c,!1)+"\n";b.close="</v-container>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_flex:{x_icons:"idea",x_text_contains:"flex",x_not_text_contains:":",hint:"Columna de ancho flexible",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c=
{refx:e.id};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));Object.keys(e.attributes).map(function(a){var b=e.attributes[a],d=a.toLowerCase().trim(),h=b.toString().replaceAll("$variables","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$env.","process.env.").replaceAll("$store.","$store.state.").trim(),f=0;-1!=h.indexOf("%")&&(h=parseInt(h.replaceAll("%","").trim()),f=Math.round(12*h/100));if("class"==d)c.class=h;else if("props"==d)for(var g of h.split(" "))c[g]=
null;else["padding","margen"].includes(d)?c["pa-"+h]=null:"ancho"==d?c=l(l({},c),z("xs-".concat(f,",sm-").concat(f,",md-").concat(f,",lg-").concat(f),null)):"offset"==d?c=l(l({},c),z("offset-xs-".concat(f,",offset-sm-").concat(f,",offset-md-").concat(f,",offset-lg-").concat(f),null)):["muy chico","movil","small","mobile"].includes(d)?c["xs".concat(f)]=null:["chico","tablet","small","tableta"].includes(d)?c["sm".concat(f)]=null:["medio","medium","average"].includes(d)?c["md".concat(f)]=null:["grande",
"pc","desktop","escritorio"].includes(d)?c["lg".concat(f)]=null:"xfila:grande xfila:pc xfila:desktop pc escritorio xfila:escritorio".split(" ").includes(d)?c["lg".concat(Math.round(12/h))]=null:["xfila:medio","xfila:tablet","tablet","xfila"].includes(d)?c["md".concat(Math.round(12/h))]=null:["xfila:chico","xfila:movil","xfila:mobile"].includes(d)?c["sm".concat(Math.round(12/h))]=null:["xfila:muy chico","xfila:movil chico","xfila:small mobile"].includes(d)?c["xs".concat(Math.round(12/h))]=null:["muy chico:offset",
"movil:offset","small:offset","mobile:offset"].includes(d)?c["offset-xs".concat(Math.round(12/h))]=null:["chico:offset","tablet:offset","small:offset","tableta:offset"].includes(d)?c["offset-sm".concat(Math.round(12/h))]=null:["medio:offset","medium:offset","average:offset"].includes(d)?c["offset-md".concat(Math.round(12/h))]=null:["grande:offset","pc:offset","desktop:offset","escritorio:offset","grande:left"].includes(d)?c["offset-lg".concat(Math.round(12/h))]=null:":"!=d.charAt(0)&&""!=b&&b!=h?
c[":"+a.trim()]=h:c[a.trim()]=h});b.open+=a.tagParams("v-flex",c,!1)+"\n";b.close="</v-flex>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_spacer:{x_icons:"idea",x_text_contains:"spacer",x_level:">2",hint:"Spacer es un espaciador flexible",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));b.open+=a.tagParams("v-spacer",{},!0)+"\n";return b});return function(a,b){return c.apply(this,arguments)}}()},
def_progress:{x_icons:"idea",x_text_contains:"progres",x_level:">2",attributes_aliases:{"background-color":"background-color,background","background-opacity":"background-opacity,opacity","buffer-value":"max,max-value",value:"value,valor",indeterminate:"loop,infinito",width:"width,ancho",size:"size,porte",rotate:"rotate,rotar"},hint:"Item de progreso",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c="circular";""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));
var d=f("def_progress",e);Object.keys(d).map(function(a){"tipo"==a.toLowerCase()&&["lineal","linea","linear"].includes(d[a])?(c="linear",delete d[a]):"indeterminate"==a.toLowerCase()&&(d[":".concat(a)]=d[a],delete d[a])});b.open+=a.tagParams("v-progress-".concat(c),d,!1)+"\n";b.close="</v-progress-".concat(c,">\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_dialog:{x_level:">2",x_icons:"idea",x_text_contains:"dialog",x_not_text_contains:"boton:",attributes_aliases:{width:"width,ancho",
"max-width":"max-width,ancho-max,max-ancho"},hint:"Dialogo de vuetify",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));e=f("def_dialog",e);b.open+=a.tagParams("v-dialog",e,!1)+"\n";b.close+="</v-dialog>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_center:{x_icons:"idea",x_text_contains:"centrar",hint:"Centra nodos hijos",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});
var c={refx:e.id,class:"text-xs-center"};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));b.open=a.tagParams("div",c,!1)+"<center>\n";b.close+="</center></div>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_html:{x_icons:"idea",x_text_contains:"html:",hint:"html:x, donde x es cualquier tag",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c={refx:e.id};Object.keys(e.attributes).map(function(b){var d=e.attributes[b];d=d.replaceAll("$variables.",
"").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if("props"==b.toLowerCase())for(var h of d.split(" "))c[h]=null;else if(":"!=b.charAt(0)&&d!=e.attributes[b])c[":"+b]=d;else if("v-model"!=b)if(-1!=a.x_state.central_config.idiomas.indexOf(",")){h=a.x_state.central_config.idiomas.split(",")[0];a.x_state.strings_i18n[h]||(a.x_state.strings_i18n[h]={});var f="t_"+a.hash(d);a.x_state.strings_i18n[h][f]=d;c[":"+b]="$t('".concat(f,
"')")}else c[b]=d;else c[b]=d}.bind(this));""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var d=e.text.replace("html:","");e.nodes_raw&&0<e.nodes_raw.length?(b.open+=a.tagParams(d,c,!1)+"\n",b.close+="</".concat(d,">\n")):b.open+=a.tagParams(d,c,!0)+"\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_textonly:{x_level:">2",x_empty:"icons",x_priority:-5,x_or_hasparent:"def_page,def_componente,def_layout",hint:"Texto a mostrar",func:function(){var c=k(function*(e,
b){b=a.reply_template({state:b});var c={class:[]},d,f,g,k=e.text.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env.").replaceAll("$store.","$store.state.");""==k&&(k="&nbsp;");if(1==(yield a.hasParentID(e.id,"def_toolbar"))&&0==(yield a.hasParentID(e.id,"def_slot")))b.valid=!1;else if(1==(yield a.hasParentID(e.id,"def_variables")))b.valid=!1;else if(1==(yield a.hasParentID(e.id,"def_page_estilos")))b.valid=!1;else if(1==(yield a.hasParentID(e.id,
"def_page_estilos")))b.valid=!1;else{""!=e.text_note&&(b.open+="\x3c!-- ".concat(e.text_note," --\x3e\n"));if(-1!=e.text.indexOf("..lorem..")&&-1!=e.text.indexOf(":")){var l=e.text.split(":");var p=l[l.length-1]}-1!=e.text.indexOf("numeral(")&&(a.x_state.plugins["vue-numeral-filter"]={global:!0,npm:{"vue-numeral-filter":"*"},config:"{ locale: 'es-es' }"});1==e.font.bold&&c.class.push("font-weight-bold");10<=e.font.size&&c.class.push("caption");1==e.font.italic&&c.class.push("font-italic");Object.keys(e.attributes).map(function(a){var b=
a.toLowerCase().trim(),h=e.attributes[a];"class"==b?c.class.push(h):":span"==b?d=!0:":omit"==b?f=!0:[":length",":largo","len","length","largo"].includes(a)?p=h:"small"==a?g=!0:["ucase","mayusculas","mayuscula"].includes(a)?"true"!=h&&1!=h||c.class.push("text-uppercase"):["capitales","capitalize","capital"].includes(a)?"true"!=h&&1!=h||c.class.push("text-capitalize"):["lcase","minusculas","minuscula"].includes(a)?"true"!=h&&1!=h||c.class.push("text-lowercase"):"truncate"==a?"true"!=h&&1!=h||c.class.push("text-truncate"):
"no-wrap"==a?"true"!=h&&1!=h||c.class.push("text-no-wrap"):["weight","peso","grosor"].includes(a)?(a=h.toLowerCase(),["thin","fina","100"].includes(a)?c.class.push("font-weight-thin"):["light","300"].includes(a)?c.class.push("font-weight-light"):["regular","400"].includes(a)?c.class.push("font-weight-light"):["medium","500"].includes(a)?c.class.push("font-weight-medium"):["bold","700"].includes(a)?c.class.push("font-weight-bold"):["black","gruesa","900"].includes(a)&&c.class.push("font-weight-black")):
"color"==a?-1!=a.indexOf(" ")?(a=h.split(" "),c.class.push("".concat(a[0],"--text text--").concat(a[1]))):c.class.push("".concat(h,"--text")):"align"==a?(a=h.toLowerCase(),["center","centro","centrar"].includes(a)?c.class.push("text-xs-center"):["right","derecha"].includes(a)?c.class.push("text-xs-right"):["left","izquierda","izquierdo"].includes(a)?c.class.push("text-xs-left"):["justify","justificar","justificado"].includes(a)&&(c.style=c.style?c.style.split(";").push("text-align: justify; text-justify: inter-word;").join(";"):
"text-align: justify; text-justify: inter-word;")):"style"==a?(c.style||(c.styles=[]),c.styles.push(h)):":"!=a.charAt(0)&&""!=e.text&&k!=e.text?c[":"+a]=h:c[a]=h});p&&(l=require("lorem-ipsum").loremIpsum,k=l({count:parseInt(p),units:"words"}));g&&(k="<small>".concat(k,"</small>"));c.class=c.class.map(function(a){a.replaceAll("text-h1","display-4").replaceAll("text-h2","display-3").replaceAll("text-h3","display-2").replaceAll("text-h4","display-1").replaceAll("text-h5","headline").replaceAll("text-subtitle-1",
"subtitle-1").replaceAll("text-subtitle-2","subtitle-2").replaceAll("text-h6","title").replaceAll("text-body-1","body-1").replaceAll("text-body-2","body-2").replaceAll("text-caption","caption").replaceAll("text-overline","overline");return a});0<c.class.length&&(c.class=c.class.join(" "));c.style&&(c.styles=c.styles.join(";"));f||(1==a.hasParentID(e.id,"def_textonly")||d?b.open+=a.tagParams("span",c)+k+"</span>\n":a.hasParentID(e.id,"def_card_title")&&!c.class?b.open+=k+"\n":b.open+=a.tagParams("div",
c)+k+"</div>\n")}return b});return function(a,b){return c.apply(this,arguments)}}()},def_avatar:{x_level:">2",x_icons:"idea",x_text_contains:"avatar",x_not_text_contains:"fila",hint:"Imagen con mascara redondeada",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open="\x3c!-- ".concat(c.text_note," --\x3e"));c=f("def_avatar",c);var e={};c.src&&(e.src=c.src,delete c.src);c[":src"]&&(e[":src"]=c[":src"],delete c[":src"]);b.open+=a.tagParams("v-avatar",c,!1)+"\n";
b.open+=a.tagParams("v-img",e,!0)+"\n";b.close+="</v-avatar>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_boton:{x_level:">2",x_icons:"idea",x_text_contains:"boton:",hint:"Boton de vuetify",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open="\x3c!-- ".concat(c.text_note," --\x3e"));var e=f("def_boton",c);if(e.scrollto){a.x_state.plugins["vue-scrollto"]={global:!0,npm:{"vue-scrollto":"*"}};if(e.scrollto.contains(",")){var d=e.scrollto.split(",")[0],
g=e.scrollto.split(",").pop().trim();e["v-scroll-to"]="{ element:'".concat(d,"', offset:").concat(g,", cancelable:false }")}else e["v-scroll-to"]="{ element:'".concat(e.scrollto,"', cancelable:false }");delete e.scrollto}"flat"in e&&null==e.flat&&(e.text=null,delete e.flat);"round"in e&&null==e.round&&(e.rounded=null,delete e.round);c=c.text.trim().replaceAll("boton:","");-1!=a.x_state.central_config.idiomas.indexOf(",")?(d=a.x_state.central_config.idiomas.split(",")[0],a.x_state.strings_i18n[d]||
(a.x_state.strings_i18n[d]={}),g="t_"+a.hash(c),a.x_state.strings_i18n[d][g]=c,c="{{ $t('".concat(g,"') }}")):c.contains("$")&&c.contains("{{")&&c.contains("}}")&&(c=c.replaceAll("$params.","").replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$store.","$store.state."));b.open+=a.tagParams("v-btn",e,!1)+c+"\n";b.close+="</v-btn>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_chip:{x_level:">2",x_icons:"idea",x_text_contains:"chip:",hint:"Chip de vuetify",
func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open="\x3c!-- ".concat(c.text_note," --\x3e"));var e=f("def_chip",c);c=c.text.trim().replaceAll("chip:","");if(-1!=a.x_state.central_config.idiomas.indexOf(",")){var d=a.x_state.central_config.idiomas.split(",")[0];a.x_state.strings_i18n[d]||(a.x_state.strings_i18n[d]={});var g="t_"+a.hash(c);a.x_state.strings_i18n[d][g]=c;c="{{ $t('".concat(g,"') }}")}else c.contains("$")&&c.contains("{{")&&c.contains("}}")&&
(c=c.replaceAll("$params.","").replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$store.","$store.state."));b.open+=a.tagParams("v-chip",e,!1)+"".concat(c,"\n");b.close+="</v-chip>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_menu:{x_level:">2",x_icons:"idea",x_text_contains:"menu",x_not_text_contains:":",hint:"Barra de contenido escondible para menu de vuetify",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open=
"\x3c!-- ".concat(c.text_note," --\x3e"));c=f("def_menu",c);c.visible&&(c["v-model"]=c.visible,delete c.visible);b.open+=a.tagParams("v-menu",c,!1)+"\n";b.close+="</v-menu>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_barralateral:{x_level:">2",x_icons:"idea",x_text_contains:"lateral",x_not_text_contains:":",hint:"Barra lateral (normalmente para un menu) escondible de vuetify",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open=
"\x3c!-- ".concat(c.text_note," --\x3e"));c=f("def_barralateral",c);c.visible&&(c["v-model"]=c.visible,delete c.visible);b.open+=a.tagParams("v-navigation-drawer",c,!1)+"\n";b.close+="</v-navigation-drawer>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_barrainferior:{x_level:">2",x_icons:"idea",x_text_contains:"inferior",x_not_text_contains:":",hint:"Barra inferior escondible de vuetify",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&
(b.open="\x3c!-- ".concat(c.text_note," --\x3e"));c=f("def_barrainferior",c);c.visible&&(c["v-model"]=c.visible,delete c.visible);b.open+=a.tagParams("v-bottom-sheet",c,!1)+"\n";b.close+="</v-bottom-sheet>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_contenido:{x_level:3,x_icons:"idea",x_text_exact:"contenido",x_or_hasparent:"def_page,def_componente",hint:"Contenido de pagina o componente vuetify",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=
c.text_note&&(b.open="\x3c!-- ".concat(c.text_note," --\x3e"));c=f("def_contenido",c);b.open+=a.tagParams("v-main",c,!1)+"\n";b.close+="</v-main>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_toolbar:{x_level:">2",x_icons:"idea",x_text_exact:"toolbar",attributes_aliases:{icon:"icon,icono"},hint:"Barra superior o toolbar vuetify que permite auto-alinear un titulo, botones, etc.",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open=
"\x3c!-- ".concat(c.text_note," --\x3e"));c=f("def_toolbar",c);if(c[":icon"]){var e="{{ ".concat(c[":icon"]," }}");delete c[":icon"]}else c.icon&&(e=c.icon.toLowerCase().trim(),delete c.icon);b.open+=a.tagParams("v-toolbar",c,!1)+"\n";e&&""!=e?b.open+="<v-toolbar-side-icon><v-icon>".concat(e,"</v-icon></v-toolbar-side-icon>\n"):e&&""==e&&(b.open+="<v-toolbar-side-icon></<v-toolbar-side-icon>\n");b.close="</v-toolbar>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_toolbar_title:{x_level:">3",
x_empty:"icons",x_all_hasparent:"def_toolbar",hint:"Titulo para nodo toolbar",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});""!=c.text_note&&(b.open="\x3c!-- ".concat(c.text_note," --\x3e"));var e=f("def_toolbar_title",c);if(e.color){e.class||(e.class="");var d=e.class.split(" ");if(e.color.contains(" ")){var g=e.color.split(" ")[0],n=e.color.split(" ").pop();d.push("".concat(g,"--text text--").concat(n))}else d.push("".concat(e.color,"--text"));e.class=d.join(" ");delete e.color}c=
c.text.trim();-1!=a.x_state.central_config.idiomas.indexOf(",")?(d=a.x_state.central_config.idiomas.split(",")[0],a.x_state.strings_i18n[d]||(a.x_state.strings_i18n[d]={}),g="t_"+a.hash(c),a.x_state.strings_i18n[d][g]=c,c="{{ $t('".concat(g,"') }}")):c.contains("$")&&c.contains("{{")&&c.contains("}}")&&(c=c.replaceAll("$params.","").replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$store.","$store.state."));b.open+=a.tagParams("v-toolbar-title",e,!1)+c+"\n";b.close="</v-toolbar-title>\n";
return b});return function(a,b){return c.apply(this,arguments)}}()},def_event_mounted:{x_icons:"help",x_level:3,x_text_contains:":mounted",hint:"Evento especial :mounted en pagina vue",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b,hasChildren:!0});b.open=a.tagParams("vue_mounted",{},!1);""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n"));b.close="</vue_mounted>";return b});return function(a,b){return c.apply(this,arguments)}}()},def_variables:{x_icons:"xmag",x_level:3,x_text_contains:"variables",
hint:"Definicion local de variables observadas",func:function(){var c=k(function*(c,b){c=a.reply_template({state:b});"undefined"!==typeof b.current_page&&("undefined"===typeof a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page]={}),!1==="variables"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].variables={}),!1==="types"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].types={}));return c});return function(a,b){return c.apply(this,arguments)}}()},
def_variables_field:{x_priority:1,x_empty:"icons",x_level:">3",x_all_hasparent:"def_variables",hint:"Campo con nombre de variable observada y tipo",func:function(){var c=k(function*(c,b){var e=a.reply_template({state:b});e.state.vars_path&&(e.state.vars_last_level=e.state.vars_path.length);var d={},f="string",g=c.text.trim(),k=c.level-3;if(g.contains("[")&&g.contains("]")||g.contains("{")&&g.contains("}"))f="script",g="script".concat(c.id);else if(g.contains(":"))f=g.split(":").pop().toLowerCase().trim(),
g=g.split(":")[0].trim();else if(c.nodes_raw&&0<c.nodes_raw.length){var l=yield c.getNodes(),p=!1,t;for(t of l)t.icons.includes("help")&&(p=!0);0==p&&(f="object")}else f="string";Object.keys(c.attributes).map(function(b){var e=b.toLowerCase().trim(),h=c.attributes[b];["type","tipo",":type",":tipo"].includes(e)?f=h.toLowerCase().trim():["valor","value",":valor",":value"].includes(e)?(b=h.replaceAll("$variables","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$config.",
"process.env.").replaceAll("$store.","this.$store.state."),"{now}"==b.toLowerCase().trim()&&(b="new Date()"),b.contains("assets:")&&(b=a.getAsset(b,"js")),d.value=b):e.contains(":")&&(d[b.trim()]=h.trim())});if(["string","text","texto"].includes(f))d.value=!1==="value"in d?"":d.value.toString();else if("script"==f){d.value=c.text.trim().replaceAll("&#xa;","").replaceAll("&apos;",'"').replaceAll("&#xf1;","\u00f1");"["!=d.value.charAt(0)&&(d.value="["+d.value+"]");l=require("safe-eval");try{d.value=
l(d.value)}catch(D){d.value=[{error_in_script_var:D}]}}else["int","numeric","number","numero"].includes(f)?d.value=!1==="value"in d?0:parseInt(d.value):["float","real","decimal"].includes(f)?d.value=!1==="value"in d?0:parseFloat(d.value):["boolean","boleano","booleano"].includes(f)?!1==="value"in d?d.value="true"==g?!0:!1:"true"==d.value?d.value=!0:"false"==d.value&&(d.value=!1):["array"].includes(f)?(f="array",d.value=!1==="value"in d?[]:JSON.parse(d.value)):["struct","object"].includes(f)&&(f="object",
d.value=!1==="value"in d?{}:JSON.parse(d.value));"undefined"!==typeof b.current_page&&(!1===b.current_page in a.x_state.pages&&(a.x_state.pages[b.current_page]={}),!1==="variables"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].variables={}),!1==="var_types"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].var_types={}));if(1==k)a.x_state.pages[b.current_page].var_types[g]=f,a.x_state.pages[b.current_page].variables[g]=d.value,e.state.vars_path=[g],e.state.vars_types=
[f],e.state.vars_last_level=k;else{if(!(k>e.state.vars_last_level))if(k==e.state.vars_last_level)e.state.vars_path.pop(),e.state.vars_types.pop();else{k=Array(e.state.vars_last_level-k+1);for(var v of k)e.state.vars_path.pop(),e.state.vars_types.pop()}e.state.vars_path.push(g);e.state.vars_types.push(f);if("object"==e.state.vars_types[e.state.vars_types.length-2])A(a.x_state.pages[b.current_page].variables,d.value,e.state.vars_path.join("."));else if("array"==e.state.vars_types[e.state.vars_types.length-
2]){v=[...e.state.vars_path];v.pop();var w=E(a.x_state.pages[b.current_page].variables,v.join("."));"script"==f?d.value.map(a=>{w.push(a)}):g!=d.value?(k={},k[g]=d.value,w.push(k)):w.push(d.value);A(a.x_state.pages[b.current_page].variables,w,v.join("."))}a.x_state.pages[b.current_page].var_types[e.state.vars_path.join(".")]=f;e.state.vars_last_level=e.state.vars_path.length}return e});return function(a,b){return c.apply(this,arguments)}}()},def_variables_watch:{x_icons:"help",x_level:">4",x_text_contains:"change",
x_all_hasparent:"def_variables",hint:"Monitorea los cambios realizados a la variable padre",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var e={name:c.text.trim(),type:"watched",oldvar:"old",newvar:"new"};Object.keys(c.attributes).map(function(a){var b=a.toLowerCase().trim();a=c.attributes[a];[":old","old"].includes(b)?e.oldvar=a:[":new","new"].includes(b)?e.newvar=a:[":deep","deep"].includes(b)&&(e.deep=a)});e.flat=b.state.vars_path.join(".");b.open=a.tagParams("vue_watched_var",
e,!1);""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n"));b.close="</vue_watched_var>";return b});return function(a,b){return c.apply(this,arguments)}}()},def_variables_func:{x_icons:"help",x_level:4,x_not_text_contains:":server,condicion si,otra condicion",x_all_hasparent:"def_variables",hint:"Variable tipo funcion",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var e={name:c.text.trim(),type:"computed"},d="async";Object.keys(c.attributes).map(function(a){var b=a.toLowerCase().trim().replaceAll(":",
"");a=c.attributes[a].trim();"default"==b?e.valor=a:["valor","value"].includes(b)?e.valor=a:"lazy"==b?e.lazy="true"==a?!0:!1:"observar onchange cambie cambien modifiquen cuando monitorear watch".split(" ").includes(b)?e.watch=a:"async"==b&&(d="true"==a?"async":"sync")});"async"==d?(a.x_state.plugins["vue-async-computed"]={global:!0,npm:{"vue-async-computed":"*"}},b.open=a.tagParams("vue_async_computed",e,!1),""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n")),b.close="</vue_async_computed>\n"):
(b.open=a.tagParams("vue_computed",e,!1),""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n")),b.close="</vue_computed>\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_responder:{x_icons:"desktop_new",x_text_contains:"responder",x_not_text_contains:"traducir,struct,extender",x_all_hasparent:"def_variables",x_level:">3",hint:"Emite una respuesta para la variable de tipo funcion",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open=
"//".concat(e.text_note,"\n"));var d=a.dsl_parser.findVariables({text:e.text,symbol:'"',symbol_closing:'"'});d.contains("**")&&e.icons.includes("bell")?(e=c(d),b.open+="return ".concat(e,";\n")):d.contains("$")?(d=d.replaceAll("$params.","this.").replaceAll("$variables.","this."),b.open+="return ".concat(d,";\n")):d.contains("assets:")?(d=a.getAsset(d,"js"),b.open+="return ".concat(d,";\n")):""==d?b.open+="return '';\n":"("==d.charAt(0)&&")"==d.slice(-1)?(d=d.slice(1).slice(0,-1),b.open+="return ".concat(d,
";\n")):a.x_state.central_config.idiomas&&a.x_state.central_config.idiomas.contains(",")||(b.open+="return '".concat(d,"';\n"));return b});return function(a,b){return d.apply(this,arguments)}}()},def_struct:{x_icons:"desktop_new",x_text_contains:"struct",x_not_text_contains:"traducir",x_level:">3",hint:"Crea una variable de tipo Objeto, con los campos y valores definidos en sus atributos.",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});if(e.text.contains(",")){var d=e.text.split(",").pop();
if(1==a.hasParentID(e.id,"def_event_server")){d=d.replaceAll("$variables.","resp.").replaceAll("$vars.","resp.").replaceAll("$params.","resp.");d="resp."==d?"resp":d;var f=!0}else d=d.replaceAll("$variables.","this.").replaceAll("store.","this.$store.state."),d="this."==d?"this":d;var g=l({},e.attributes);Object.keys(e.attributes).map(function(b){b.toLowerCase().trim();var d=e.attributes[b].trim();d=e.icons.includes("bell")?c(d):d.contains("assets:")?a.getAsset(d,"jsfunc"):1==f?d.replaceAll("$variables.",
"resp.").replaceAll("$vars.","resp.").replaceAll("$params.","resp."):d.replaceAll("$variables.","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$store.","this.$store.state.");g[b]=d});""!=e.text_note&&(b.open="// ".concat(e.text_note,"\n"));require("util");b.open+="var ".concat(d.trim()," = ").concat(a.jsDump(g).replaceAll("'`","`").replaceAll("`'","`"),";\n")}else b.valid=!1;return b});return function(a,b){return d.apply(this,arguments)}}()},def_literal_js:{x_icons:"penguin",
x_not_text_contains:"por cada registro en",x_level:">1",hint:"Nodo JS literal; solo traduce $variables y referencias de refrescos a metodos async.",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var d=c.text;d=c.text.contains("$variables.")&&"()"==c.text.right(2)?d.replaceAll("$variables.","this.$asyncComputed.").replaceAll("()",".update();").replaceAll(";;",";"):c.text.contains("$vars.")&&"()"==c.text.right(2)?d.replaceAll("$vars.","this.$asyncComputed.").replaceAll("()",".update();").replaceAll(";;",
";"):c.text.contains("$params.")&&"()"==c.text.right(2)?d.replaceAll("$params.","this.$asyncComputed.").replaceAll("()",".update();").replaceAll(";;",";"):c.text.contains("$store.")&&0==c.text.contains("this.$store.state")?d.replaceAll("$store.","this.$store.state.").replaceAll("this.$nuxt.this.$store.","this.$nuxt.$store."):d.replaceAll("$variables.","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$config.","process.env.");d.contains("this.$scrollTo")&&(a.plugins["vue-scrollto"]=
{global:!0,npm:{"vue-scrollto":"*"}});d.contains("vuescript2")&&(d=d.replaceAll("vuescript2.","require('vue-script2')."));d.contains("_.")&&(a.x_state.pages[b.state.current_page].imports.underscore="_");""!=c.text_note&&(b.open="// ".concat(c.text_note.trim(),"\n"));b.open+=d;";"!=b.open.right(1)&&(b.open+=";\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_console:{x_icons:"clanbomber",x_not_icons:"desktop_new",x_level:">1",hint:"Emite su texto a la consola. Soporta mostrar los datos/variables de sus atributos.",
func:function(){var d=k(function*(d,b){b=a.reply_template({state:b});var e=d.text;e=d.icons.includes("bell")?c(e):"'".concat(e,"'");var f=l({},d.attributes);Object.keys(d.attributes).map(function(b){b.toLowerCase().trim();var e=d.attributes[b].trim(),g=c(e);e=e.contains("assets:")?a.getAsset(e,"jsfunc"):e.replaceAll("$variables.","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$store.","this.$store.state.");d.icons.includes("bell")&&e.replaceAll("**","")!=g?e=c(e):
!d.icons.includes("bell")&&e.contains("**")&&(e="'".concat(e,"'"));f[b]=e});""!=d.text_note&&(b.open="// ".concat(d.text_note.trim(),"\n"));b.open+="console.log(".concat(e,",").concat(a.jsDump(f),");\n");return b});return function(a,b){return d.apply(this,arguments)}}()},def_npm_instalar:{x_icons:"desktop_new",x_text_contains:"npm:install|npm:instalar",x_level:">2",hint:"Instala el paquete npm indicado entrecomillas y lo instancia en la p\u00e1gina (import:true) o funci\u00f3n actual, o lo asigna a la variable indicada luego de la coma.",
func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var d={text:c.text,tipo:"import",tipo_:"",version:"*",git:"",init:""},e=f("def_npm_instalar",c);e=l(l({},d),e);e.import&&"true"!=e.import&&(e.tipo_=e.import);e.text=a.dsl_parser.findVariables({text:c.text,symbol:'"',symbol_closing:'"'}).trim();e.var=c.text.split(",").splice(-1)[0];a.x_state.npm[e.text]=e.version;""!=c.text_note&&(b.open="// ".concat(c.text_note.trim(),"\n"));e.require?b.open+="let ".concat(e.var," = require('").concat(e.text,
"');\n"):"current_func"in b.state?a.x_state.functions[b.state.current_func].imports[e.text]=e.tipo_:a.x_state.pages[b.state.current_page].imports[e.text]=e.tipo_;return b});return function(a,b){return c.apply(this,arguments)}}()},def_crear_id_unico:{x_icons:"desktop_new",x_text_contains:"crear id unico,,",x_level:">2",hint:"Obtiene un id unico (en 103 trillones) y lo asigna a la variable luego de la coma.",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var d=c.text.split(",").splice(-1)[0];
""!=c.text_note&&(b.open="// ".concat(c.text_note.trim(),"\n"));a.x_state.npm.nanoid="2.1.1";b.open+="let ".concat(d," = require('nanoid')();\n");return b});return function(a,b){return c.apply(this,arguments)}}()}}});return x.apply(this,arguments)}function z(a,g){var c=a;if("string"===typeof c){c={};a=a.split(",");for(var f in a)c[a[f]]=g}else for(var d in c)c[d]=g;return c}function A(a,g,c){var f;c=c.split(".");for(f=0;f<c.length-1;f++)a=a[c[f]];a[c[f]]=g}function E(a,g){return g.split(".").reduce((a,
f)=>a[f],a)}String.prototype.replaceAll=function(a,g){a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return this.replace(new RegExp(a,"ig"),g)};String.prototype.contains=function(a){return"string"===typeof this&&-1!=this.indexOf(a)?!0:!1};String.prototype.right=function(a){return this.substr(this.length-a)};class B{constructor(){var {context:a={},name:g="base_deploy"}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.context=a;this.name=g}logo(){var a=arguments,g=this;return k(function*(){var {name:c=
g.name,config:f={}}=0<a.length&&void 0!==a[0]?a[0]:{};require("cfonts").say(c,l(l({},{font:"block",gradient:"red,blue"}),f))})()}run(){return k(function*(){return!0})()}deploy(){var a=this;return k(function*(){a.context.x_console.spinner({message:"Deploying ".concat(a.name," instance")});return[]})()}base_build(){var a=this;return k(function*(){var g=require("await-spawn"),c=require("path");require("fs").promises;c=c.join(a.context.x_state.dirs.app,"node_modules");var f=[];a.context.x_console.outT({message:"Building project",
color:"cyan"});var d=a.context.x_console.spinner({message:"Building project"});if(yield a.exists(c))d.succeed("Using existing npm packages");else{d.start("Installing npm packages");try{yield g("npm",["install"],{cwd:a.context.x_state.dirs.app}),d.succeed("npm install succesfully")}catch(e){d.fail("Error installing npm packages"),f.push(e)}}d.start("Building NUXT project");try{yield g("npm",["run","build"],{cwd:a.context.x_state.dirs.app}),d.succeed("Project build successfully")}catch(e){d.fail("NUXT build failed");
a.context.x_console.out({message:"Building NUXT again to show error in console",color:"red"});try{console.log("\n"),yield g("npm",["run","dev"],{cwd:a.context.x_state.dirs.app,stdio:"inherit",timeout:15E3})}catch(b){}f.push(e)}return f})()}pre(){return k(function*(){})()}post(){return k(function*(){})()}exists(a){return k(function*(){var g=require("fs").promises;try{return yield g.access(a),!0}catch(c){return!1}})()}_isLocalServerRunning(){var a=arguments,g=this;return k(function*(){var c=0<a.length&&
void 0!==a[0]?a[0]:g.context.x_state.central_config.port;return yield require("is-port-reachable")(c)})()}launchTerminal(a){var g=arguments;return k(function*(){var c=1<g.length&&void 0!==g[1]?g[1]:[],f=2<g.length?g[2]:void 0,d=require("await-spawn"),e={error:!1};c=f?"sleep 2; clear; cd ".concat(f," && ").concat(a," ").concat(c.join(" ")):"sleep 2; clear; "+a+" "+c.join(" ");try{e=yield d("npx",["terminal-tab",c])}catch(b){e=l(l({},b),{error:!0})}return e})()}}class F extends B{constructor(){var {context:a=
{}}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};super({context:a,name:"Local"})}deploy(){var a=this;return k(function*(){if(0==(yield a._isLocalServerRunning())){a.context.x_console.title({title:"Deploying Local NuxtJS instance",color:"green"});yield a.logo();var g=yield a.base_build();if(0<g.length)return a.x_console.outT({message:"There was an error building the project.",color:"red"}),!1;g=yield a.run();if(0<g.length)return a.context.x_console.outT({message:"There was an error deploying locally.",
color:"red",data:g.toString()}),!1}else a.context.x_console.title({title:"Updating local running NuxtJS instance",color:"green"}),yield a.logo(),a.context.x_console.outT({message:"Project updated.",color:"green"});return!0})()}run(){var a=this;return k(function*(){var g=[];require("await-spawn");var c=a.context.x_console.spinner({message:"Deploying local instance"});c.start("Deploying local instance");try{yield a.launchTerminal("npm",["run","dev"],a.context.x_state.dirs.app),c.succeed("NuxtJS launched successfully")}catch(f){c.fail("Project failed to launch"),
g.push(f)}return g})()}}class G extends B{constructor(){var {context:a={}}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};super({context:a,name:"AWS EB"})}logo(){return k(function*(){var a=require("asciify-image"),g=require("path").join(__dirname,"assets","aws.png");a=yield a(g,{fit:"width",width:25});console.log(a)})()}deploy(){var a=this;return k(function*(){a.context.x_console.title({title:"Deploying to Amazon AWS Elastic Bean",color:"green"});yield a.logo();if(0<(yield a.base_build()).length)return a.context.x_console.outT({message:"There was an error building the project.",
color:"red"}),!1;var g=yield a.run();return 0<g.length?(a.context.x_console.outT({message:"There was an error deploying to Amazon AWS.",color:"red",data:g.toString()}),!1):!0})()}run(){var a=this;return k(function*(){var g=require("await-spawn"),c=[];a.context.debug("AWS EB deploy");var f=a.context.x_state.central_config.deploy.replaceAll("eb:",""),d=f,e="".concat(d,"-dev");a.context.x_state.central_config.deploy.contains(",")&&(d=f.split(",")[0],e=f.split(",").splice(-1)[0]);if(""!=d){f=a.context.x_console.spinner({message:"Creating config files"});
var b=require("yaml");d={"branch-defaults":{master:{enviroment:e,group_suffix:null}},global:{application_name:d,branch:null,default_ec2_keyname:"aws-eb",default_platform:"Node.js",default_region:"us-east-1",include_git_submodules:!0,instance_profile:null,platform_name:null,platform_version:null,profile:null,repository:null,sc:"git",workspace_type:"Application"}};var h=require("path"),k=require("fs").promises,m=a.context.x_state.dirs.app;a.context.x_state.central_config.static&&(m=h.join(m,"dist"));
var n=h.join(m,".elasticbeanstalk");try{yield k.mkdir(n,{recursive:!0})}catch(p){}yield a.context.writeFile(h.join(n,"config.yml"),b.stringify(d));yield a.context.writeFile(h.join(m,".npmrc"),"unsafe-perm=true");yield a.context.writeFile(h.join(m,".ebignore"),"node_modules/\njspm_packages/\n.npm\n.node_repl_history\n*.tgz\n.yarn-integrity\n.editorconfig\n# Mac OSX\n.DS_Store\n# Elastic Beanstalk Files\n.elasticbeanstalk/*\n!.elasticbeanstalk/*.cfg.yml\n!.elasticbeanstalk/*.global.yml");f.succeed("EB config files created successfully");
if(!(yield a.exists(h.join(m,".git")))){a.context.x_console.outT({message:"CREATING .GIT DIRECTORY"});f.start("Initializing project git repository");f.text("Creating .gitignore file");yield a.context.writeFile(h.join(m,".gitignore"),"# Mac System files\n.DS_Store\n.DS_Store?\n__MACOSX/\nThumbs.db\n# VUE files\nnode_modules/");f.succeed(".gitignore created");f.start("Initializing local git repository ..");try{yield g("git",["init","-q"],{cwd:m}),f.succeed("GIT initialized")}catch(p){f.fail("GIT failed to initialize"),
c.push(p)}f.start("Adding files to local git ..");try{yield g("git",["add","."],{cwd:m}),f.succeed("git added files successfully")}catch(p){f.fail("git failed to add local files"),c.push(p)}f.start("Creating first git commit ..");try{yield g("git",["commit","-m","Inicial"],{cwd:m}),f.succeed("git created first commit successfully")}catch(p){f.fail("git failed to create first commit"),c.push(p)}}1==a.context.x_state.central_config.static?f.start("Deploying *static version* to AWS ElasticBean .. please wait"):
f.start("Deploying to AWS ElasticBean .. please wait");try{yield g("eb",["deploy",e],{cwd:m}),f.succeed("EB deployed successfully")}catch(p){if(f.warn("EB failed to deploy"),4==p.code){f.start("Checking if AWS credentials are valid ..");try{yield g("aws",["sts","get-caller-identity"],{cwd:m}),f.succeed("AWS credentials are ok")}catch(t){f.fail("Current AWS credentials are invalid"),c.push(t)}if(0==c.length){f.start("EB it seems this is a new deployment: issuing eb create");try{yield g("eb",["create",
e],{cwd:m}),f.succeed("EB created and deployed successfully")}catch(t){a.context.x_console.outT({message:p.stdout.toString(),color:"red"}),f.fail("EB creation failed"),c.push(p)}}}else a.context.x_console.outT({message:"error: eb create (exitcode:"+p.code+"):"+p.stdout.toString(),color:"red"}),c.push(p)}if(0==c.length&&1==a.context.x_state.central_config.debug)if(0==require("ci-info").isCI){f.start("Opening EB debug terminal ..");try{var q=h.resolve(m),l="clear; sleep 2; clear; cd ".concat(q," && clear && eb open ").concat(e);
yield g("npx",["terminal-tab",l],{cwd:q});f.succeed("EB logging opened on new tab successfully")}catch(p){f.fail("I was unable to open a new tab terminal window with the EB debugging console")}}else f.warn("Omitting EB debug, because a CI env was detected.")}return c})()}post(){var a=this;return k(function*(){if(!a.context.x_state.central_config.componente&&a.context.x_state.central_config.deploy&&-1!=a.context.x_state.central_config.deploy.indexOf("eb:")&&a.context.x_state.config_node.aws){var g=
require("path"),c=require("recursive-copy"),f=require("os"),d=require("fs"),e=g.join(a.context.x_state.dirs.base,"aws_backup.ini");g=g.join(f.homedir(),"/.aws/")+"credentials";if(yield a.context.exists(e))yield c(e,g,{overwrite:!0,dot:!0,debug:!1}),yield d.promises.unlink(e)}})()}pre(){var a=this;return k(function*(){if(!a.context.x_state.central_config.componente&&a.context.x_state.central_config.deploy&&-1!=a.context.x_state.central_config.deploy.indexOf("eb:")){var g=require("ini"),c=require("path"),
f=require("fs").promises,d=require("os"),e="";d=c.join(d.homedir(),"/.aws/")+"credentials";try{e=yield f.readFile(d,"utf-8"),a.context.debug("AWS credentials:",e)}catch(b){}a.context.x_state.config_node.aws?(""!=e&&(c=c.join(a.context.x_state.dirs.base,"aws_backup.ini"),a.context.x_console.outT({message:"config:aws:creating .aws/credentials backup",color:"yellow"}),yield f.writeFile(c,e,"utf-8")),a.context.x_console.outT({message:"config:aws:access ->".concat(a.context.x_state.config_node.aws.access)}),
a.context.x_console.outT({message:"config:aws:secret ->".concat(a.context.x_state.config_node.aws.secret)}),g=g.stringify({aws_access_key_id:a.context.x_state.config_node.aws.access,aws_secret_access_key:a.context.x_state.config_node.aws.secret},{section:"default"}),a.context.debug("Setting .aws/credentials from config node"),yield f.writeFile(d,g,"utf-8")):""!=e&&(f=g.parse(e),f.default&&a.context.debug("Using local system AWS credentials",f.default),a.context.x_state.config_node.aws={access:"",
secret:""},f.default.aws_access_key_id&&(a.context.x_state.config_node.aws.access=f.default.aws_access_key_id),f.default.aws_secret_access_key&&(a.context.x_state.config_node.aws.secret=f.default.aws_secret_access_key))}})()}}var H=require("concepto");class I extends H{constructor(a){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g=l(l({},{class:"vue",debug:!0}),g);super(a,g)}onInit(){var a=this;return k(function*(){yield a.addCommands(C);a.x_console.outT({message:"".concat(Object.keys(a.x_commands).length,
" local x_commands loaded!"),color:"green"});a.x_crypto_key=require("crypto").randomBytes(32);a.x_state={plugins:{},npm:{},dev_npm:{},envs:{},functions:{},proxies:{},pages:{},current_func:"",current_folder:"",current_proxy:"",strings_i18n:{},stores:{},stores_types:{versions:{},expires:{}},nuxt_config:{head_script:{},build_modules:{},modules:{}}};a.x_state.config_node=yield a._readConfig();a.x_state.central_config=yield a._readCentralConfig();a.x_state.assets=yield a._readAssets();a.x_state.dirs=a.x_state.central_config.componente?
yield a._appFolders({components:"",pages:"",assets:"assets/","static":"static/",umd:"umd/"}):yield a._appFolders({client:"client/",layouts:"client/layouts/",components:"client/components/",pages:"client/pages/",plugins:"client/plugins/","static":"client/static/",middleware:"client/middleware/",server:"client/server/",assets:"client/assets/",css:"client/assets/css/",store:"client/store/",lang:"client/lang/",secrets:"secrets/"});a.x_state.models=yield a._readModelos();a.x_state.nuxt_is_running=yield a._isLocalServerRunning();
a.debug("is Server Running: "+a.x_state.nuxt_is_running);if("latest"==a.x_state.central_config.nuxt&&0==a.atLeastNode("10"))throw Error("You need to have at least Node v10+ to use latest Nuxt/Vuetify version!");a.x_state.es6="latest"==a.x_state.central_config.nuxt?!0:!1;if(a.x_state.config_node.copiar){var g=require("path"),c=require("recursive-copy");a.x_console.outT({message:"copying config:copiar directories to 'static' target folder",color:"yellow"});yield Object.keys(a.x_state.config_node.copiar).map(function(){var a=
k(function*(a){a=g.join(this.x_state.dirs.base,a);try{yield c(a,this.x_state.dirs.static)}catch(q){"EEXIST"!=q.code&&this.x_console.outT({message:"error: copying directory ".concat(a),data:q})}});return function(b){return a.apply(this,arguments)}}().bind(a));a.x_console.outT({message:"copying config:copiar directories ... READY",color:"yellow"})}if(a.x_state.config_node["nuxt:icon"]){a.x_state.npm["@nuxtjs/pwa"]="*";var f=require("path").join(a.x_state.dirs.base,a.x_state.config_node["nuxt:icon"]),
d=a.x_state.dirs.static+"icon.png";a.debug({message:"NUXT ICON dump (copy icon)",color:"yellow",data:f});var e=require("fs").promises;try{yield e.copyFile(f,d)}catch(m){a.x_console.outT({message:"error: copying NUXT icon",data:m})}}a.x_state.config_node["google:adsense"]&&(a.x_state.npm["vue-google-adsense"]="*",a.x_state.npm["vue-script2"]="*");a.x_state.config_node["google:analytics"]&&(a.x_state.npm["@nuxtjs/google-gtag"]="*");"latest"==a.x_state.central_config.nuxt&&(a.x_state.plugins["v-mask"]=
{global:!0,npm:{"v-mask":"*"},customcode:"import Vue from 'vue';\nimport VueMask from 'v-mask';\nVue.directive('mask', VueMask.VueMaskDirective);\nVue.use(VueMask);",dev_npm:{}});a.x_state.central_config.componente?(a.x_console.outT({message:"vue initialized() -> as component/plugin"}),a.x_state.npm.global="^4.4.0",a.x_state.npm.poi="9",a.x_state.npm.underscore="*",a.x_state.dev_npm["@vue/test-utils"]="^1.0.0-beta.12",a.x_state.dev_npm["babel-core"]="^6.26.0",a.x_state.dev_npm["babel-preset-env"]=
"^1.6.1",a.x_state.dev_npm.jest="^22.4.0",a.x_state.dev_npm["jest-serializer-vue"]="^0.3.0",a.x_state.dev_npm.vue="*",a.x_state.dev_npm["vue-jest"]="*",a.x_state.dev_npm["vue-server-renderer"]="*",a.x_state.dev_npm["vue-template-compiler"]="*"):(a.x_console.outT({message:"vue initialized() ->"}),a.x_state.plugins["vue-moment"]={global:!0,npm:{"vue-moment":"*"},extra_imports:["moment"],requires:["moment/locale/es"],config:"{ moment }"},a.x_state.npm["@nuxtjs/axios"]="*",a.x_state.npm.nuxt="latest"==
a.x_state.central_config.nuxt?"*":"2.11.0",a.x_state.npm.express="*",a.x_state.npm["serverless-http"]="*",a.x_state.npm["serverless-apigw-binary"]="*",a.x_state.npm.underscore="*",a.x_state.dev_npm["serverless-prune-plugin"]="*",a.x_state.dev_npm["serverless-offline"]="*",a.x_state.dev_npm["vue-beautify-loader"]="*",a.x_state.central_config.dominio&&(a.x_state.dev_npm["serverless-domain-manager"]="*"));a.x_state.secrets={};f=require("path");for(var b in a.x_state.config_node)if(0==b.contains(":")&&
a.x_state.config_node[b][":secret"]){d=l({},a.x_state.config_node[b]);delete d[":secret"];d[":link"]&&delete d[":link"];a.x_state.secrets[b]={};e=Object.keys(d);for(var h in e)a.x_state.secrets[b][h.toUpperCase()]=d[h];e=f.join(a.x_state.dirs.secrets,"".concat(b,".json"));yield a.writeFile(e,JSON.stringify(d))}b=function(b){["aurora","vpc","aws"].includes(b)&&"object"===typeof a.x_state.config_node[b]&&Object.keys(a.x_state.config_node[b]).map(function(a){this.x_state.envs["config.".concat(b,".").concat(a)]=
"process.env.".concat((b+"_"+a).toUpperCase())}.bind(a))};for(var u in a.x_state.config_node)b(u)})()}onAfterProcess(a){return k(function*(){return a})()}onDefineTitle(a){var g=this;return k(function*(){var c=a.text;Object.keys(a.attributes).map(function(f){if("title"==f||"titulo"==f)return c=a.attributes[f],!1}.bind(g));return c})()}onDefineFilename(a){var g=this;return k(function*(){var c=a.text;c=c.replace(/ /g,"_")+".vue";a.icons.includes("gohome")?c=1==g.x_state.central_config.componente&&g.x_state.central_config.service_name?
g.x_state.central_config.service_name+".vue":"index.vue":a.icons.includes("desktop_new")?-1!=a.text.indexOf("assets")?c="internal_assets.omit":-1!=a.text.indexOf("store")?c="internal_stores.omit":-1!=a.text.indexOf("proxy")||-1!=a.text.indexOf("proxies")?c="internal_middleware.omit":-1!=a.text.indexOf("config")?c="config.omit":-1!=a.text.indexOf("modelos")?c="modelos.omit":["servidor","server","api"].includes(a.text)&&(c="server.omit"):-1!=a.text.indexOf("componente:")?c=a.text.split(":")[a.text.split(":").length-
1]+".vue":-1!=a.text.indexOf("layout:")&&(c=a.text.split(":")[a.text.split(":").length-1]+".vue");return c})()}onDefineNodeName(a){return k(function*(){return a.text.replace(" ","_")})()}onCompleteCodeTemplate(a){return k(function*(){return a})()}onPrepare(){var a=this;return k(function*(){a.deploy_module={pre:()=>{},post:()=>{},deploy:()=>!0};var g=a.x_state.central_config.deploy+"";g&&(g.contains("eb:")?a.deploy_module=new G({context:a}):"local"==g&&(a.deploy_module=new F({context:a})));yield a.deploy_module.pre()})()}onErrors(a){return k(function*(){})()}generalConfigSetup(){var a=
this;return k(function*(){a.debug("Setting general configuration steps");a.debug("Defining nuxt.config.js : initializing");a.debug("Defining nuxt.config.js : default modules");a.x_state.nuxt_config.modules["@nuxtjs/axios"]={};a.x_state.config_node["google:analytics"]&&(a.debug("Defining nuxt.config.js : Google Analytics"),a.x_state.nuxt_config.build_modules["@nuxtjs/google-gtag"]={id:a.x_state.config_node["google:analytics"].id,debug:!0,disableAutoPageTrack:!0},a.x_state.config_node["google:analytics"].local&&
(a.x_state.nuxt_config.build_modules["@nuxtjs/google-gtag"].debug=a.x_state.config_node["google:analytics"].local),a.x_state.config_node["google:analytics"].auto&&1==a.x_state.config_node["google:analytics"].auto&&delete a.x_state.nuxt_config.build_modules["@nuxtjs/google-gtag"].disableAutoPageTrack);a.x_state.config_node["ads:medianet"]&&a.x_state.config_node["ads:medianet"].cid&&(a.debug("Defining nuxt.config.js : MediaNet"),a.x_state.nuxt_config.head_script.z_ads_medianet_a={innerHTML:'window._mNHandle = window._mNHandle || {}; window._mNHandle.queue = window._mNHandle.queue || []; medianet_versionId = "3121199";',
type:"text/javascript"},a.x_state.nuxt_config.head_script.z_ads_medianet_b={src:"https://contextual.media.net/dmedianet.js?cid=".concat(a.x_state.config_node["ads:medianet"][cid]),async:!0},a.x_state.plugins["vue-script2"]={global:!0,npm:{"vue-script2":"*"}});a.x_state.config_node["google:adsense"]&&(a.debug("Defining nuxt.config.js : Google Adsense"),a.x_state.config_node["google:adsense"].auto&&a.x_state.config_node["google:adsense"].client?(a.x_state.nuxt_config.head_script.google_adsense={src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",
"data-ad-client":a.x_state.config_node["google:adsense"].client,async:!0},a.x_state.plugins.adsense={global:!0,npm:{"vue-google-adsense":"*","vue-script2":"*"},mode:"client",customcode:'\n\t\t\t\t\timport Vue from "vue";\n\t\t\t\t\timport Ads from "vue-google-adsense";\n\n\t\t\t\t\tVue.use(require(\'vue-script2\'));\n\t\t\t\t\tVue.use(Ads.AutoAdsense, { adClient: \''.concat(a.x_state.config_node["google:adsense"].client,"'});")}):a.x_state.plugins.adsense={global:!0,npm:{"vue-google-adsense":"*",
"vue-script2":"*"},mode:"client",customcode:'\n\t\t\t\t\timport Vue from "vue";\n\t\t\t\t\timport Ads from "vue-google-adsense";\n\n\t\t\t\t\tVue.use(require(\'vue-script2\'));\n\t\t\t\t\tVue.use(Ads.Adsense);\n\t\t\t\t\tVue.use(Ads.InArticleAdsense);\n\t\t\t\t\tVue.use(Ads.InFeedAdsense);'});a.x_state.config_node["nuxt:icon"]&&(a.debug("Defining nuxt.config.js : module nuxtjs/pwa (nuxt:icon)"),a.x_state.nuxt_config.modules["@nuxtjs/pwa"]={});-1!=a.x_state.central_config.idiomas.indexOf(",")&&(a.debug("Defining nuxt.config.js : module nuxt/i18n (idiomas)"),
a.x_state.npm["nuxt-i18n"]="*",a.x_state.npm.fs="*",a.x_state.nuxt_config.modules["nuxt-i18n"]={defaultLocale:a.x_state.central_config.idiomas.split(",")[0],vueI18n:{fallbackLocale:a.x_state.central_config.idiomas.split(",")[0]},detectBrowserLanguage:{useCookie:!0,alwaysRedirect:!0},locales:[],lazy:!0,langDir:"lang/"},a.x_state.central_config.idiomas.split(",").map(function(c){"es"==c?a.x_state.nuxt_config.modules["nuxt-i18n"].locales.push({code:"es",iso:"es-ES",file:"".concat(c,".js")}):"en"==c?
a.x_state.nuxt_config.modules["nuxt-i18n"].locales.push({code:"en",iso:"en-US",file:"".concat(c,".js")}):a.x_state.nuxt_config.modules["nuxt-i18n"].locales.push({code:c,file:"".concat(c,".js")})}.bind(a)));a.x_state.stores_types.local&&""!=Object.keys(a.x_state.stores_types.local)&&(a.debug("Defining nuxt.config.js : module nuxt-vuex-localstorage (store:local)"),a.x_state.nuxt_config.modules["nuxt-vuex-localstorage"]={mode:"debug",localStorage:Object.keys(a.x_state.stores_types.local)});if(a.x_state.stores_types.session&&
""!=Object.keys(a.x_state.stores_types.session)){a.debug("Defining nuxt.config.js : module nuxt-vuex-localstorage (store:session)");var g={};a.x_state.nuxt_config.modules["nuxt-vuex-localstorage"]&&(g=a.x_state.nuxt_config.modules["nuxt-vuex-localstorage"]);a.x_state.nuxt_config.modules["nuxt-vuex-localstorage"]=l(l({},g),{mode:"debug",sessionStorage:Object.keys(a.x_state.stores_types.session)})}var c=!1,f={};Object.keys(a.x_state.central_config).map(function(d){if(-1!=d.indexOf("proxy:")){var e=
d.split(":")[1];f[e]=a.x_state.central_config[d];c=!0}}.bind(a));c&&(a.debug("Defining nuxt.config.js : module nuxtjs/proxy (central:proxy)"),a.x_state.npm["@nuxtjs/proxy"]="*",a.x_state.nuxt_config.modules["@nuxtjs/proxy"]={proxy:f})})()}createGitIgnore(){var a=this;return k(function*(){a.debug("writing .gitignore files");var g=require("fs").promises;require("path");if(a.x_state.central_config.componente){a.debug({message:"writing dsl /.gitignore file"});var c="# Mac System files\n.DS_Store\n.DS_Store?\n_MACOSX/\nThumbs.db\n# VUE files\n# Concepto files\ndsl_cache/\ndsl_cache.ini\nvue.dsl\ntmp.ini\n".concat(a.x_state.dirs.compile_folder,
"/node_modules/");yield g.writeFile("".concat(a.x_state.dirs.base,".gitignore"),c,"utf-8");a.x_console.out({message:"writing component .gitignore file"});c="# Mac System files\n.DS_Store\n.DS_Store?\n_MACOSX/\nThumbs.db\n# NPM files\npackage-lock.json\nnode_modules/\n# AWS EB files\n.elasticbeanstalk/*\n!.elasticbeanstalk/*.cfg.yml\n!.elasticbeanstalk/*.global.yml";yield g.writeFile("".concat(a.x_state.dirs.app,"/.gitignore"),c,"utf-8")}else a.x_console.out({message:"writing /.gitignore file"}),c=
"# Mac System files\n.DS_Store\n.DS_Store?\n_MACOSX/\nThumbs.db\n# VUE files\n.nuxt/\n# Concepto files\ndsl_cache/\ndsl_cache.ini\ntmp.ini\nvue.dsl\nstats.txt\nstats.json\nstore/\n".concat(a.x_state.dirs.compile_folder,"/node_modules/\n").concat(a.x_state.dirs.compile_folder,"/secrets/"),yield g.writeFile("".concat(a.x_state.dirs.base,".gitignore"),c,"utf-8")})()}processOmitFile(a){var g=this;return k(function*(){if("internal_stores.omit"==a.file){g.debug("processing internal_stores.omit");var c=
require("cheerio").load(a.code,{ignoreWhitespace:!1,xmlMode:!0,decodeEntities:!1});c("store_mutation").toArray().map(function(a){var b=c(a);a=b.attr("store")?b.attr("store"):"";var d=b.attr("mutation")?b.attr("mutation"):"",e=b.attr("params")?b.attr("params"):"";b=b.text();!g.x_state.stores[a]||":mutations"in g.x_state.stores[a]||(g.x_state.stores[a][":mutations"]={});g.x_state.stores[a][":mutations"][d]={code:b,params:e}})}if("internal_middleware.omit"==a.file){g.debug("processing internal_middleware.omit");
var f=require("cheerio").load(a.code,{ignoreWhitespace:!1,xmlMode:!0,decodeEntities:!1});f("proxy_code").toArray().map(function(a){a=f(a);var b=a.attr("name")?a.attr("name"):"";g.x_state.proxies[b].code=a.text().trim()})}if("server.omit"==a.file){g.debug("processing server.omit");var d=require("cheerio").load(a.code,{ignoreWhitespace:!1,xmlMode:!0,decodeEntities:!1});d("func_code").toArray().map(function(a){a=d(a);var b=a.attr("name")?a.attr("name"):"";g.x_state.functions[b].code=a.text().trim()})}})()}getBasicVue(a){var g=
this;return k(function*(){var c={template:a.code,script:"",style:"",first:!1},f=g.x_state.pages[a.title];if(f){-1!=f.proxies.indexOf(",")?(g.debug("- declare middlewares"),c.script+="middleware: [".concat(f.proxies,"]"),c.first=!0):""!=f.proxies.trim()&&(g.debug("- declare middlewares"),c.script+="middleware: '".concat(f.proxies,"'"),c.first=!0);""!=f.layout&&(g.debug("- declare layout"),c.first&&(c.script+=",\n"),c.first=!0,c.script+="layout: '".concat(f.layout.trim(),"'"));if(""!=f.components){g.debug("- declare components");
c.first&&(c.script+=",\n");c.first=!0;c.script+="components: {";var d=[];Object.keys(f.components).map(function(a){d.push(" '".concat(a,"': ").concat(f.components[a]))});c.script+="".concat(d.join(","),"\n\t}")}if(""!=f.directives){g.debug("- declare directives");c.first&&(c.script+=",\n");c.first=!0;c.script+="directives: {";var e=[];Object.keys(f.directives).map(function(a){a==f.directives[a]?e.push(a):e.push("'".concat(a,"': ").concat(f.directives[a]))});c.script+="".concat(e.join(","),"\n\t}")}if("componente"==
f.tipo&&""!=f.params){g.debug("- declare componente:props");c.first&&(c.script+=",\n");c.first=!0;var b=[];""!=Object.keys(f.defaults)?(f.params.split(",").map(function(a){var c="";f.defaults[a]&&(c=f.defaults[a]);if("true"==c||"false"==c)b.push("".concat(a,": { type: Boolean, default: ").concat(c,"}"));else{var d=c;!isNaN(parseFloat(d))&&isFinite(d)?b.push("".concat(a,": { type: Number, default: ").concat(c,"}")):-1!=c.indexOf("[")&&-1!=c.indexOf("]")?b.push("".concat(a,": { type: Array, default: () => ").concat(c,
"}")):-1!=c.indexOf("{")&&-1!=c.indexOf("}")?b.push("".concat(a,": { type: Object, default: () => ").concat(c,"}")):-1!=c.indexOf("()")?b.push("".concat(a,": { type: Object, default: () => ").concat(c,"}")):-1!=c.toLowerCase().indexOf("null")?b.push("".concat(a,": { default: null }")):-1!=c.indexOf("'")?b.push("".concat(a,": { type: String, default: ").concat(c,"}")):b.push("".concat(a,": { default: '").concat(c,"' }"))}}),c.script+="\tprops: {".concat(b.join(","),"}")):(f.params.split(",").map(function(a){b.push("'".concat(a,
"'"))}),c.script+="\tprops: [".concat(b.join(","),"]"))}if(f.xtitle||0<f.meta.length){g.debug("- declare head() meta data");c.first&&(c.script+=",\n");c.first=!0;c.script+=" head() {\n return {\n";if(f.xtitle)if(-1!=g.x_state.central_config.idiomas.indexOf(",")){var h="t_".concat(g.hash(f.xtitle)),k=g.x_state.central_config.idiomas.indexOf(",")[0].trim().toLowerCase();g.x_state.strings_i18n[k]||(g.x_state.strings_i18n[k]={});g.x_state.strings_i18n[k][h]=f.xtitle;c.script+="titleTemplate: this.$t('".concat(h,
"')\n")}else c.script+="titleTemplate: '".concat(f.xtitle,"'\n");0<f.meta.length&&(f.xtitle&&(c.script+=","),c.script+="meta: ".concat(JSON.stringify(f.meta),"\n"));c.script+="};\n}"}""!=Object.keys(f.variables)&&(g.debug("- declare data() variables"),c.first&&(c.script+=",\n"),c.first=!0,require("util"),c.script+="data() {\n",c.script+=" return ".concat(g.jsDump(f.variables),"\n"),c.script+="}\n")}return c})()}processInternalTags(a,g){var c=this;return k(function*(){var f=require("cheerio").load(a.template,
{ignoreWhitespace:!1,xmlMode:!0,decodeEntities:!1}),d=f("server_asyncdata").toArray();0<d.length&&c.debug("post-processing server_asyncdata tag");0<d.length&&a.first&&(a.script+=",\n");a.first=!0;d.map(function(b){b=f(b);var c=b.attr("return")?b.attr("return"):"";a.script+="async asyncData({ req, res, params }) {\n";a.script+=" if (!process.server) { const req={}, res={}; }\n";a.script+=" ".concat(b.text());a.script+=" return ".concat(c,";\n");a.script+="}\n";b.remove()});a.template=f.html();0<d.length&&
(a.script+="}\n");d=f("vue_mounted").toArray();0<d.length&&c.debug("post-processing vue_mounted tag");0<d.length&&a.first&&(a.script+=",\n");a.first=!0;0<d.length&&(a.script+="async mounted() {\n");d.map(function(b){b=f(b);a.script+=b.text();b.remove()});a.template=f.html();0<d.length&&(a.script+="}\n");d=f("vue_computed").toArray();0<d.length&&c.debug("post-processing vue_computed tag");0<d.length&&a.first&&(a.script+=",\n");a.first=!0;0<d.length&&(a.script+="computed: {\n");var e=[];d.map(function(a){a=
f(a);var b=a.attr("name"),c=a.html();e.push("".concat(b,"() {").concat(c,"}"));a.remove()});a.template=f.html();a.script+=e.join(",");0<d.length&&(a.script+="}\n");d=f("vue_async_computed").toArray();0<d.length&&c.debug("post-processing vue_async_computed tag");0<d.length&&a.first&&(a.script+=",\n");a.first=!0;0<d.length&&(a.script+="asyncComputed: {\n");var b=[];d.map(function(a){a=f(a);var c=a.text();if(a.attr("valor")||a.attr("watch")){var d="";a.attr("lazy")&&(d+=",lazy: ".concat(a.attr("lazy")));
var e="";if(a.attr("valor")){e+=",";var g=a.attr("valor");e=-1!=g.indexOf("[")&&-1!=g.indexOf("]")||-1!=g.indexOf("{")&&-1!=g.indexOf("}")||-1!=g.indexOf("(")&&-1!=g.indexOf(")")?e+"default: ".concat(g):e+"default: '".concat(g,"'")}g="";if(a.attr("watch")){g+=",";var h=[];a.attr("watch").split(",").map(function(a){a=a.replaceAll("$variables.","").replaceAll("$vars","").replaceAll("$params","").replaceAll("$store","$store.state.");h.push("'".concat(a,"'"))});g+="watch: [".concat(h.join(","),"]")}b.push("\n".concat(a.attr("name"),
": {\n    async get() {\n        ").concat(c,"\n    }\n    ").concat(d,"\n    ").concat(e,"\n    ").concat(g,"\n}"))}else b.push("async ".concat(a.attr("name"),"() {").concat(c,"}"));a.remove()});a.template=f.html();a.script+=b.join(",");0<d.length&&(a.script+="}\n");d=f("vue_watched_var").toArray();0<d.length&&c.debug("post-processing vue_async_computed tag");0<d.length&&a.first&&(a.script+=",\n");a.first=!0;0<d.length&&(a.script+="watch: {\n");var h=[];d.map(function(a){a=f(a);var b=a.text();a.attr("deep")?
h.push("\n\t\t\t\t'".concat(a.attr("flat"),"': {\n\t\t\t\t\thandler(newVal, oldVal) {\n\t\t\t\t\t\tlet evento = { ").concat(a.attr("newvar"),":newVal, ").concat(a.attr("oldvar"),":oldVal };\n\t\t\t\t\t\t").concat(b,"\n\t\t\t\t\t},\n\t\t\t\t\tdeep: true\n\t\t\t\t}\n\t\t\t\t")):h.push("\n\t\t\t\t'".concat(a.attr("flat"),"': function (newVal, oldVal) {\n\t\t\t\t\tlet evento = { ").concat(a.attr("newvar"),":newVal, ").concat(a.attr("oldvar"),":oldVal };\n\t\t\t\t\t").concat(b,"\n\t\t\t\t}\n\t\t\t\t"));
a.remove()});a.template=f.html();a.script+=h.join(",");0<d.length&&(a.script+="}\n");d=f("vue_if").toArray();0<d.length&&c.debug("post-processing vue_if tag");d.map(function(a){a=f(a);var b=a.attr("tipo"),c=a.attr("expresion");if("template"!=a.attr("target")){var d=f('*[refx="'.concat(a.attr("target"),'"]')).toArray();0<d.length&&(d=f(d[0]),"v-else"==b?d.attr(b,""):d.attr(b,c));a.remove()}});a.template=f.html();d=f("vue_for").toArray();0<d.length&&c.debug("post-processing vue_for tag");d.map(function(a){a=
f(a);var b=a.attr("iterator").replaceAll("$variables","").replaceAll("$vars","").replaceAll("$params.","").replaceAll("$store","$store.state.");b=a.attr("use_index")&&"false"==a.attr("use_index")&&"0"!=a.attr("key")?"(".concat(a.attr("item"),", ").concat(a.attr("key"),") in ").concat(b):a.attr("use_index")&&"false"==a.attr("use_index")&&"0"==a.attr("key")?"".concat(a.attr("item")," in ").concat(b):a.attr("key")&&"0"!=a.attr("key")&&"false"!=a.attr("use_index")?"(".concat(a.attr("item"),", ").concat(a.attr("key"),
", ").concat(a.attr("use_index"),") in ").concat(b):"(".concat(a.attr("item"),", ").concat(a.attr("use_index"),")");if("template"!=a.attr("target")){var c=f('*[refx="'.concat(a.attr("target"),'"]')).toArray();0<c.length&&(c=f(c[0]),c.attr("v-for",b),0!=a.attr("unique")&&c.attr(":key",a.attr("unique")));a.remove()}else c=a.html(),a.replaceWith('<template v-for="'.concat(b,'">').concat(c,"</template>"))});a.template=f.html();d=f("vue_event_method").toArray();var k=f("vue_event_element").toArray();if(0<
d.length||0<k.length){c.debug("post-processing methods (common, timer, and v-on element events methods)");a.first&&(a.script+=",\n");a.first=!0;var l=[];d.map(function(a){a=f(a);var b=a.text(),d="";if(a.attr("timer_time")){c.x_state.npm["vue-interval"]="*";g.mixins.vueinterval="vue-interval/dist/VueInterval.common";var e="";if(a.attr("timer_time")&&""!=a.attr("timer_time")){e=a.attr("timer_time").length-1;var h=a.attr("timer_time")[0];e="INTERVAL__".concat(h,"e").concat(e,"$")}d=a.attr("m_params")?
"async"==a.attr("type")?d+"".concat(e).concat(a.attr("name"),": async function(").concat(a.attr("m_params"),") {"):d+"".concat(e).concat(a.attr("name"),": function(").concat(a.attr("m_params"),") {"):"async"==a.attr("type")?d+"".concat(e).concat(a.attr("name"),": async function() {"):d+"".concat(e).concat(a.attr("name"),": function() {")}else d=a.attr("m_params")?"async"==a.attr("type")?d+"".concat(a.attr("name"),": async function(").concat(a.attr("m_params"),") {"):d+"".concat(a.attr("name"),": function(").concat(a.attr("m_params"),
") {"):"async"==a.attr("type")?d+"".concat(a.attr("name"),": async function() {"):d+"".concat(a.attr("name"),": function() {");l.push("".concat(d,"\n").concat(b,"\n}"));a.remove()});k.map(function(a){a=f(a);var b=f(f('*[refx="'.concat(a.attr("parent_id"),'"]')).toArray()[0]),c=a.attr("event");if(a.attr("link")){var d=a.attr("link");"click-outside"==c?b.attr("v-click-outside",d):"visibility"==c?b.attr("v-observe-visibility",d):":rules"==c?b.attr(":rules","[".concat(d,"]")):"resize"==c?b.attr("v-resize",
d):a.attr("v_params")?a.attr("link_id")?b.attr("v-on:".concat(c),"".concat(d,"_").concat(a.attr("link_id"),"(").concat(a.attr("v_params"),")")):b.attr("v-on:".concat(c),"".concat(d,"(").concat(a.attr("v_params"),")")):a.attr("link_id")?b.attr("v-on:".concat(c),"".concat(d,"_").concat(a.attr("link_id"))):b.attr("v-on:".concat(c),d)}else{d=c.replaceAll(":","_").replaceAll(".","_").replaceAll("-","_");var e=a.text();"click-outside"==c?(b.attr("v-click-outside",d),b="".concat(d,": async function() {\n\t\t\t\t\t\t\t").concat(e,
"\n\t\t\t\t\t\t}")):"visibility"==c?(b.attr("v-observe-visibility",d),b="".concat(d,": async function(estado, elemento) {\n\t\t\t\t\t\t\t").concat(e,"\n\t\t\t\t\t\t}")):":rules"==c?(b.attr(":rules","[".concat(d,"]")),b="".concat(d,": function() {\n\t\t\t\t\t\t\t").concat(e,"\n\t\t\t\t\t\t}")):"resize"==c?(b.attr("v-resize",d),b="".concat(d,": async function() {\n\t\t\t\t\t\t\t").concat(e,"\n\t\t\t\t\t\t}")):(a.attr("v_params")&&""!=a.attr("v_params")?b.attr("v-on:".concat(c),"".concat(d,"(").concat(a.attr("v_params"),
")")):b.attr("v-on:".concat(c),"".concat(d,"($event)")),b=a.attr("n_params")?"".concat(d,": async function(").concat(a.attr("n_params"),") {\n\t\t\t\t\t\t\t\t").concat(e,"\n\t\t\t\t\t\t\t}"):"".concat(d,": async function(evento) {\n\t\t\t\t\t\t\t\t").concat(e,"\n\t\t\t\t\t\t\t}"));l.push(b)}a.remove()});a.script+="methods: {\n\t\t\t\t\t\t\t".concat(l.join(","),"\n\t\t\t\t\t\t   }");a.template=f.html()}return a})()}processStyles(a,g){var c=require("cheerio").load(a.template,{ignoreWhitespace:!1,xmlMode:!0,
decodeEntities:!1}),f=c("page_estilos").toArray();0<f.length&&(this.debug("post-processing styles"),f=c(f[0]),f.attr("scoped")&&"true"==f.attr("scoped")?a.style+="\n\t\t\t\t<style scoped>\n\t\t\t\t".concat(f.text(),"\n\t\t\t\t</style>"):a.style+="\n\t\t\t\t<style>\n\t\t\t\t".concat(f.text(),"\n\t\t\t\t</style>"),f.remove());a.template=c.html();0<Object.keys(g.styles).length&&(c=require("jss").default,f=require("jss-plugin-global").default,c.use(f()),g=c.createStyleSheet({"@global":g.styles}),a.style||
(a.style=""),a.style+="<style>\n".concat(g.toString(),"</style>"));return a}processMixins(a,g){if(g.mixins&&0<Object.keys(g.mixins).length){this.debug("post-processing mixins");a.first&&(a.script+=",\n");a.first=!0;a.script+="mixins: [".concat(Object.keys(g.mixins).join(","),"]");var c=[],f;for(f in g.mixins)c.push("import ".concat(f," from '").concat(g.mixins[f],"';"));a.script=a.script.replaceAll("{concepto:import:mixins}",c.join(";"))}else a.script=a.script.replaceAll("{concepto:import:mixins}",
"");return a}removeRefx(a){var g=require("cheerio").load(a.template,{ignoreWhitespace:!1,xmlMode:!0,decodeEntities:!1}),c=g("*[refx]").toArray();0<c.length&&(this.debug("removing refx attributes (internal)"),c.map(function(a){g(a).attr("refx",null)}),a.template=g.html());return a}fixVuePaths(a,g){for(var c in this.x_state.pages)this.x_state.pages[c].path?a.script=a.script.replaceAll("{vuepath:".concat(c,"}"),this.x_state.pages[c].path):this.x_console.outT({message:"WARNING! path key doesn't exist for page ".concat(c),
color:"yellow"});a.script=a.script.replaceAll("this.$router.push({ name:'/","this.$router.push({ name:'");return a}processLangPo(a,g){var c=this;return k(function*(){if(-1!=c.x_state.central_config.idiomas.indexOf(",")){c.debug("process /lang/ po/mo files");var f=require("path"),d=require("fs").promises;f=f.join(c.x_state.dirs.base,"/lang/");try{yield d.mkdir(f,{recursive:!0})}catch(b){}c.x_state.central_config.idiomas.split(",")[0];for(var e in c.x_state.central_config.idiomas.split(","));}return a})()}createVueXStores(){var a=
this;return k(function*(){if(0<Object.keys(a.x_state.stores).length){a.x_console.outT({message:"creating VueX store definitions",color:"cyan"});var g=require("path");require("util");var c=require("safe-eval"),f;for(f in a.x_state.stores){var d=a.x_state.stores[f],e=g.join(a.x_state.dirs.store,"".concat(f,".js")),b={integer:0,"int":0,"float":0,"boolean":!1,array:[]},h={},k;for(k in d){var l=d[k];l.default&&""==l.default.trim()?h[k]=l.type in b?b[l.type]:"":h[k]=["integer","int","float","boolean","array"].includes[l.type]?
c(l.default):["true","false","0","1"].includes[l.default]?c(l.default):""+l.default}f in a.x_state.stores_types.expires&&(h.expire=parseInt(a.x_state.stores_types.expires[f]));f in a.x_state.stores_types.versions&&(h.version=parseInt(a.x_state.stores_types.versions[f]));delete h[":mutations"];b="export const state = () => (".concat(a.jsDump(h),")\n");if(":mutations"in d){h=[];for(var n in d[":mutations"]){l=d[":mutations"][n];var q=["state"];0<Object.keys(l.params).length&&q.push("objeto");h.push("".concat(n,
"(").concat(q.join(","),") {\n                            ").concat(l.code,"\n                        }"))}b+="\nexport const mutations = {".concat(h.join(","),"}")}a.writeFile(e,b)}}})()}createServerMethods(){var a=this;return k(function*(){if(0<Object.keys(a.x_state.functions).length){a.x_console.outT({message:"creating NuxtJS server methods",color:"green"});var g=require("path").join(a.x_state.dirs.server,"api.js"),c={};for(d in a.x_state.functions)for(var f in a.x_state.functions[d])c[f]=a.x_state.functions[d][f];
var d="\n            var express = require('express'), _ = require('underscore'), axios = require('axios');\n            var server = express();\n            var plugins = {\n                bodyParser: require('body-parser'),\n                cookieParser: require('cookie-parser')\n            };\n            server.disable('x-powered-by');\n            server.use(plugins.bodyParser.urlencoded({ extended: false,limit: '2gb' }));\n            server.use(plugins.bodyParser.json({ extended: false,limit: '2gb' }));\n            server.use(plugins.cookieParser());\n            // app declared functions imports\n";
for(var e in c)d+="var ".concat(c[e]," = require('").concat(e,"');\n");d+="// app declared functions\n";for(var b in a.x_state.functions)c=a.x_state.functions[b],e="",""!=c.return&&(e="res.send(".concat(c.return,");")),d+="server.".concat(c.method,"('").concat(c.path,"', async function(req,res) {\n                    var params = req.").concat("get"==c.method?"params":"body",";\n                    ").concat(c.code,"\n                    ").concat(e,"\n                });\n");a.writeFile(g,d+"module.exports = server;\n");
a.x_console.outT({message:"NuxtJS server methods ready",color:"green"})}})()}createMiddlewares(){var a=this;return k(function*(){if(0<Object.keys(a.x_state.proxies).length){a.x_console.outT({message:"creating VueJS Middlewares",color:"cyan"});var g=require("path"),c;for(c in a.x_state.proxies){var f=a.x_state.proxies[c],d=g.join(a.x_state.dirs.middleware,"".concat(c,".js")),e="",b;for(b in f.imports)e+="import ".concat(f.imports[b]," from '").concat(b,"';\n");e+="export default async function ({ route, store, redirect, $axios }) {\n                    ".concat(f.code,
"\n\n                }\n                ");for(var h in a.x_state.pages)""!=h&&(f=a.x_state.pages[h],f.path?e=e.replaceAll("{vuepath:".concat(h,"}"),f.path):a.x_console.outT({message:"Warning! path key doesn't exist for page ".concat(h),color:"yellow"}));a.writeFile(d,e)}a.x_console.outT({message:"VueJS Middlewares ready",color:"cyan"})}})()}prepareServerFiles(){var a=this;return k(function*(){var g=require("path"),c=g.join(a.x_state.dirs.app,"index.js");a.writeFile(c,"// index.js\n        const sls = require('serverless-http');\n        const binaryMimeTypes = require('./binaryMimeTypes');\n        const express = require('express');\n        const app = express();\n        const { Nuxt } = require('nuxt');\n        const path = require('path');\n        const config = require('./nuxt.config.js');\n\n        async function nuxtApp() {\n            app.use('/_nuxt', express.static(path.join(__dirname, '.nuxt', 'dist')));\n            const nuxt = new Nuxt(config);\n            await nuxt.ready();\n            app.use(nuxt.render);\n            return app;\n        }\n\n        module.exports.nuxt = async (event, context) => {\n            let nuxt_app = await nuxtApp();\n            let handler = sls(nuxt_app, { binary: binaryMimeTypes });\n            return await handler (event, context);\n        }\n        ");
require("util");c="application/javascript application/json application/octet-stream application/xml font/eot font/opentype font/otf image/jpeg image/png image/svg+xml text/comma-separated-values text/css text/html text/javascript text/plain text/text text/xml".split(" ");if(a.x_state.config_node["nuxt:mimetypes"]){var f=[];for(d in a.x_state.config_node["nuxt:mimetypes"])f.push(d);var d=[...c,...f];c=[...new Set(d)]}d="// binaryMimeTypes.js\n        module.exports = ".concat(a.jsDump(c),";");g=g.join(a.x_state.dirs.app,
"binaryMimeTypes.js");a.writeFile(g,d)})()}installRequiredPlugins(){var a=this;return k(function*(){a.x_state.plugins.vuetify={global:!0,npm:{"node-sass":"*"},dev_npm:{"@nuxtjs/vuetify":"*"},nuxt_config:{vuetify:{theme:{dark:!0,themes:{dark:{primary:"colors.blue.darken2",accent:"colors.grey.darken3",secondary:"colors.amber.darken3",info:"colors.teal.lighten1",warning:"colors.amber.base",error:"colors.deepOrange.accent4",success:"colors.green.accent3"}}}}}};a.x_state.nuxt_config.build_modules["@nuxtjs/vuetify"]=
{};a.x_state.plugins.aos={global:!0,npm:{aos:"*"},mode:"client",customcode:'import AOS from "aos";\n            import "aos/dist/aos.css";\n            export default ({app}) => {\n                app.AOS = new AOS.init({});\n            };'}})()}createNuxtPlugins(){var a=this;return k(function*(){var g=require("path"),c={global_plugins:{},css_files:[],nuxt_config:[]},f;for(f in a.x_state.plugins){var d=a.x_state.plugins[f];if("object"===typeof d){d.npm&&(a.x_state.npm=l(l({},a.x_state.npm),d.npm));
d.dev_npm&&(a.x_state.dev_npm=l(l({},a.x_state.dev_npm),d.dev_npm));d.global&&1==d.global&&(c.global_plugins[f]="*");if(d.styles)for(var e in d.styles){var b=d.styles[e];if(0==b.file.contains("/")){var h=g.join(a.x_state.dirs.css,b.file);yield a.writeFile(h,b.content);c.css_files.push(b)}}h=d.var?d.var:f.split("/").splice(-1)[0].replaceAll("-","").replaceAll("_","").toLowerCase().trim();b="import Vue from 'vue';\n";b=d.as_star?1==d.as_star?b+"import * as ".concat(h," from '").concat(f,"';\n"):b+"import ".concat(h,
" from '").concat(f,"';\n"):b+"import ".concat(h," from '").concat(f,"';\n");d.custom&&(b+="".concat(d.custom,"\n"));if(d.extra_imports)for(var k in d.extra_imports){var m=d.extra_imports[k].replaceAll("-","").replaceAll("_","").replaceAll("/","").replaceAll(".css","").replaceAll(".","_").toLowerCase().trim();b+="import ".concat(m," from '").concat(d.extra_imports[k],"'\n")}if(d.requires)for(var n in d.requires)b+="require('".concat(d.requires[n],"');\n");if(d.styles)for(var q in d.styles)m=d.styles[q],
m.file.contains("/")&&(b+="import '".concat(m.file,"';\n"));b=d.config?"object"===typeof d.config?b+"const config = ".concat(a.jsDump(d.config),";\n                        Vue.use(").concat(h,",config);"):b+"Vue.use(".concat(h,",").concat(d.config,");\n"):d.tag?b+"Vue.component('".concat(d.tag,"',").concat(h,");\n"):d.customvar?b+"Vue.use(".concat(d.customvar,");\n"):b+"Vue.use(".concat(h,");\n");d.customcode&&(b=d.customcode);"vuetify"!=h&&(d.mode?c.nuxt_config.push({mode:d.mode.toLowerCase().trim(),
src:"~/plugins/".concat(h,".js")}):c.nuxt_config.push({src:"~/plugins/".concat(h,".js")}),d=g.join(a.x_state.dirs.plugins,"".concat(h,".js")),yield a.writeFile(d,b))}else a.x_state.npm[f]=d,d=f.replaceAll("-","").replaceAll("_","").toLowerCase().trim(),code+="import Vue from 'vue';\n                import ".concat(d," from '").concat(f,"';\n                Vue.use(").concat(d,");\n                "),"vuetify"!=d&&(c.nuxt_config.push({src:"~/plugins/".concat(d,".js")}),d=g.join(a.x_state.dirs.plugins,
"".concat(d,".js")),yield a.writeFile(d,code))}return c})()}createNuxtConfig(){var a=this;return k(function*(){var g=require("path").join(a.x_state.dirs.app,"nuxt.config.js"),c="spa"==a.x_state.central_config[":mode"]?!0:!1;a.x_state.central_config[":ssr"]&&(c=a.x_state.central_config[":ssr"]);var f=a.x_state.central_config.deploy+"";c={ssr:c,target:1==a.x_state.central_config.static?"static":"server",components:!0,telemetry:!1,loading:{color:"orange",height:"2px",continuous:!0},head:{title:a.x_state.config_node["nuxt:title"]?
a.x_state.config_node["nuxt:title"]:a.x_state.central_config.apptitle,meta:[],link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons"}],script:[],__dangerouslyDisableSanitizers:["script"]},env:{},debug:!1,modules:[],buildModules:[],plugins:[],css:[],build:{publicPath:"/_nuxt/"},srcDir:"client/",performance:{gzip:!1},router:{base:"/"},dev:!1};if(a.x_state.config_node["nuxt:meta"])for(var d in a.x_state.config_node["nuxt:meta"]){if(":"!=
d.charAt(0)){var e=d.toLowerCase().trim(),b=a.x_state.config_node["nuxt:meta"][d];"charset"==e?c.head.meta.push({charset:b}):"description"==e?c.head.push({hid:"description",name:"description",content:b}):c.head.meta.push({name:d,content:b})}}else a.x_state.config_node.meta&&0<a.x_state.config_node.meta.length&&(c.head.meta=a.x_state.config_node.meta);d=[];for(var h in a.x_state.head_script)d.push({key:h,params:a.x_state.head_script[h]});h=d.sort(function(a){return function(b,c){return b[a]<c[a]?-1:
b[a]>c[a]?1:0}});for(var k in h)c.head.script.push(h[k].params);a.x_state.config_node.axios&&(k={proxy:a.x_state.nuxt_config.modules["@nuxtjs/proxy"]?!0:!1},k=l(l({},a.x_state.config_node.axios),k),k.retries&&(k.retry={retries:k.retries},delete k.retries,a.x_state.npm["axios-retry"]="*"),f.contains("eb:")||f.contains("true")?a.x_state.config_node.axios.deploy&&(k.baseURL=a.x_state.config_node.axios.deploy,k.browserBaseURL=a.x_state.config_node.axios.deploy,delete k.deploy):"local"==f&&a.x_state.config_node.axios.local&&
(k.baseURL=a.x_state.config_node.axios.local,k.browserBaseURL=a.x_state.config_node.axios.local,delete k.local,a.x_state.config_node.axios.local.contains("127.0.0.1")&&(a.x_state.config_node.axios.https=!1)),c.axios=k);a.x_state.config_node["vue:config"]&&(c.vue={config:a.x_state.config_node["vue:config"]},delete c.vue.config[":secret"],delete c.vue.config[":link"]);a.x_state.nuxt_config.modules["@nuxtjs/proxy"]&&(c.proxy=a.x_state.nuxt_config.modules["@nuxtjs/proxy"]);c.env={};for(var m in a.x_state.config_node)0==
m.contains(":")&&0==["aurora","vpc","aws"].includes(m)&&void 0===a.x_state.secrets[m]&&"object"===typeof a.x_state.config_node[m]&&(c.env[m.toLowerCase()]=l({},a.x_state.config_node[m]));a.x_state.config_node["google:analytics"]&&a.x_state.config_node["google:analytics"].local&&1==a.x_state.config_node["google:analytics"].local&&(c.debug=!0);for(var n in a.x_state.nuxt_config.modules)f=a.x_state.nuxt_config.modules[n],""==Object.keys(f)?c.modules.push(n):c.modules.push([n,f]);for(var q in a.x_state.nuxt_config.build_modules)n=
a.x_state.nuxt_config.build_modules[q],""==Object.keys(n)?c.buildModules.push(q):c.buildModules.push([q,n]);c.plugins=a.x_state.nuxt_config.plugins;c.css=a.x_state.nuxt_config.css;a.x_state.functions&&0<Object.keys(a.x_state.functions).length&&(c.serverMiddleware=["~/server/api"]);c.build={publicPath:"/_nuxt/"};a.x_state.central_config.stage&&"production"!=a.x_state.central_config.stage&&"prod"!=a.x_state.central_config.stage&&(c.build.publicPath="/".concat(a.x_state.central_config.stage,"/_nuxt/"));
q=a.jsDump(c).replaceAll("'`","`").replaceAll("`'","`");yield a.writeFile(g,"export default ".concat(q))})()}createPackageJSON(){var a=this;return k(function*(){var g={name:a.x_state.central_config.service_name,version:"",description:a.x_state.central_config[":description"],main:"index.js",dependencies:{},devDependencies:{},scripts:{dev:"nuxt",build:"nuxt export --no-lock",start:"nuxt export && nuxt serve",generate:"nuxt export",deploy:"nuxt export --no-lock && eb deploy","start-server":"nuxt build && node app.js",
"start-sls":"nuxt build && sls offline start"},keywords:[],author:"",license:""};a.x_state.central_config.static||(g.scripts=l(l({},g.scripts),{build:"nuxt build --no-lock",start:"nuxt start --no-lock",generate:"nuxt generate",deploy:"nuxt build --no-lock && sls deploy"}));a.x_state.central_config.componente&&(g={name:"",version:"",description:"",main:a.x_state.central_config.service_name+".vue",dependencies:{},devDependencies:{},scripts:{test:"jest",build:"poi build --prod"},jest:{moduleFileExtensions:["js",
"vue"],moduleNameMapper:{"^@/(.*)$":"<rootDir>/src/$1"},transform:{"^.+\\.js$":"<rootDir>/node_modules/babel-jest",".*\\.(vue)$":"<rootDir>/node_modules/vue-jest"},snapshotSerializers:["<rootDir>/node_modules/jest-serializer-vue"]},unpkg:"umd/".concat(a.x_state.central_config.service_name,".js"),jsdelivr:"umd/".concat(a.x_state.central_config.service_name,".js"),keywords:[],author:"",license:""});3E3!=a.x_state.central_config.port&&(g.scripts.dev="nuxt --port ".concat(a.x_state.central_config.port));
a.x_state.central_config[":version"]&&(g.version=a.x_state.central_config[":version"]);a.x_state.central_config[":author"]&&(g.author=a.x_state.central_config[":author"]);a.x_state.central_config[":license"]&&(g.license=a.x_state.central_config[":license"]);a.x_state.central_config[":git"]&&(g.repository={type:"git",url:"git+".concat(a.x_state.central_config[":git"],".git")},g.bugs={url:"".concat(a.x_state.central_config[":git"],"/issues")},g.homepage=a.x_state.central_config[":git"]);a.x_state.central_config[":keywords"]&&
(g.keywords=a.x_state.central_config[":keywords"].split(","));for(var c in a.x_state.npm)a.x_state.npm[c].contains("http")&&a.x_state.npm[c].contains("github.com")?g.dependencies[c]="git+".concat(a.x_state.npm[c]):g.dependencies[c]=a.x_state.npm[c];for(var f in a.x_state.dev_npm)a.x_state.dev_npm[f].contains("http")&&a.x_state.dev_npm[f].contains("github.com")?g.devDependencies[f]="git+".concat(a.x_state.dev_npm[f]):g.devDependencies[f]=a.x_state.dev_npm[f];c=require("path").join(a.x_state.dirs.app,
"package.json");g=JSON.stringify(g);yield a.writeFile(c,g)})()}createServerlessYML(){var a=this;return k(function*(){var g=require("yaml"),c={},f=a.x_state.central_config.deploy+"";if(0==f.contains("eb:")&&0!=f&&"local"!=f){c.service=a.x_state.central_config.service_name;c.custom={prune:{automatic:!0,includeLayers:!0,number:1},apigwBinary:{types:["*/*"]}};for(var d in a.x_state.secrets)c.custom[d]="${file(secrets/"+d+".json)}";a.x_state.central_config.dominio&&(c.custom.customDomain={domainName:a.x_state.central_config.dominio},
a.x_state.central_config.basepath&&(c.custom.customDomain.basePath=a.x_state.central_config.basepath),a.x_state.central_config.stage&&(c.custom.customDomain.stage=a.x_state.central_config.stage),c.custom.customDomain.createRoute53Record=!0);c.provider={name:"aws",runtime:"nodejs8.10",timeout:a.x_state.central_config.timeout};a.x_state.central_config.stage&&(c.provider.stage=a.x_state.central_config.stage);""!=Object.keys(a.x_state.config_node)&&(c.provider.enviroment={},a.x_state.central_config.stage&&
(c.provider.enviroment.STAGE=a.x_state.central_config.stage),a.x_state.config_node.vpc&&(c.provider.vpc={securityGroupIds:[a.x_state.config_node.vpc.security_group_id],subnetIDs:[]},a.x_state.secrets.vpc&&(c.provider.vpc.securityGroupIds=["${self:custom.vpc.SECURITY_GROUP_ID}"]),a.x_state.config_node.vpc.subnet1_id&&c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET1_ID}"),a.x_state.config_node.vpc.subnet2_id&&c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET2_ID}"),a.x_state.config_node.vpc.subnet3_id&&
c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET3_ID}"),a.x_state.config_node.vpc.subnet4_id&&c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET4_ID}"),a.x_state.config_node.vpc.subnet5_id&&c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET5_ID}"),a.x_state.config_node.vpc.subnet6_id&&c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET6_ID}"),a.x_state.config_node.vpc.subnet7_id&&c.provider.vpc.subnetIDs.push("${self:custom.vpc.SUBNET7_ID}")));c.functions={nuxt:{handler:"index.nuxt",
events:[{http:"ANY /"},{http:"ANY /{proxy+}"}]}};a.x_state.central_config["keep-warm"]&&c.functions.nuxt.events.push({schedule:"rate(20 minutes)"});c.plugins=["serverless-apigw-binary","serverless-offline","serverless-prune-plugin"];a.x_state.central_config.dominio&&c.plugins.push("serverless-domain-manager");g=g.stringify(c);c=require("path").join(a.x_state.dirs.app,"serverless.yml");yield a.writeFile(c,g)}})()}onEnd(){var a=this;return k(function*(){(yield a.deploy_module.deploy())||a.x_state.central_config.componente||
a.x_console.outT({message:"Something went wrong deploying, check the console, fix it and run again.",color:"red"});yield a.deploy_module.post()})()}exists(a){return k(function*(){var g=require("fs").promises;try{return yield g.access(a),!0}catch(c){return!1}})()}writeFile(a,g){var c=arguments;return k(function*(){var f=2<c.length&&void 0!==c[2]?c[2]:"utf-8",d=require("fs").promises,e=require("prettier"),b=a.split(".").splice(-1)[0].toLowerCase(),h=g;"js"==b?h=e.format(h,{parser:"babel",useTabs:!0,
singleQuote:!0}):"json"==b?h=e.format(h,{parser:"json"}):"vue"==b?h=e.format(h.replaceAll('="xpropx"',""),{parser:"vue",htmlWhitespaceSensitivity:"ignore",useTabs:!0,printWidth:2E3,embeddedLanguageFormatting:"auto",singleQuote:!0,trailingComma:"none"}):"css"==b&&(h=e.format(h,{parser:"css"}));yield d.writeFile(a,h,f)})()}onCreateFiles(a){var g=this;return k(function*(){yield g.generalConfigSetup();yield g.createGitIgnore();g.debug("processing nodes");var c=require("fs").promises,f=require("path");
for(l in a){var d=a[l];d.code+"\n";if("omit"==d.file.split(".").slice(-1))yield g.processOmitFile(d);else{g.debug("processing node "+d.title);var e=yield g.getBasicVue(d),b=g.x_state.pages[d.title];g.debug("post-processing internal custom tags");e=yield g.processInternalTags(e,b);var h="";if(b)for(var k in b.imports)h+="import ".concat(b.imports[k]," from '").concat(k,"';\n");e.script="{concepto:import:mixins}\n\t\t\t\t".concat(h,"\n\t\t\t\texport default {\n\t\t\t\t\t").concat(e.script,"\n\t\t\t\t}");
e=g.processMixins(e,b);e=g.processStyles(e,b);e=g.removeRefx(e);e=g.fixVuePaths(e,b);e=yield g.processLangPo(e,b);e.script="<script>\n"+e.script+"\n\x3c/script>";e.style||(e.style="");e.full="".concat(e.template,"\n").concat(e.script,"\n").concat(e.style);h=f.join(g.x_state.dirs.pages,d.file);"componente"==b.tipo?(g.x_console.outT({message:"trying to write vue 'component' file ".concat(d.file),color:"cyan"}),h=f.join(g.x_state.dirs.components,d.file)):"layout"==b.tipo?(g.x_console.outT({message:"trying to write vue 'layout' file ".concat(d.file),
color:"cyan"}),h=f.join(g.x_state.dirs.layouts,d.file)):g.x_console.outT({message:"trying to write vue 'page' file ".concat(d.file),color:"cyan"});yield g.writeFile(h,e.full)}}if(g.x_state.npm["gif.js"]){g.x_console.outT({message:"downloading required gif.worker.js file for gif.js npm package",color:"yellow"});d=require("node-fetch");var l=f.join(g.x_state.dirs.static,"gif.worker.js");d=yield(yield d("https://raw.githubusercontent.com/jnordberg/gif.js/master/dist/gif.worker.js")).text();yield c.writeFile(l,
d,"utf-8")}if(0<Object.keys(g.x_state.assets).length){g.debug({message:"Copying assets",color:"cyan"});c=require("recursive-copy");for(var n in g.x_state.assets)if(d=g.x_state.assets[n],!d.i18n){l=f.join(g.x_state.dirs.base,d.original);d=f.join(g.x_state.dirs.assets,d.original.split("/").slice(-1)[0]);try{yield c(l,d)}catch(q){}}g.debug({message:"Copying assets ready",color:"cyan"})}g.x_state.central_config.componente||(yield g.createVueXStores(),yield g.createServerMethods(),yield g.createMiddlewares(),
yield g.prepareServerFiles(),yield g.installRequiredPlugins(),f=yield g.createNuxtPlugins(),g.x_state.nuxt_config.plugins=f.nuxt_config,g.x_state.nuxt_config.css=f.css_files,yield g.createNuxtConfig(),yield g.createPackageJSON(),yield g.createServerlessYML())})()}_isLocalServerRunning(){var a=this;return k(function*(){return yield require("is-port-reachable")(a.x_state.central_config.port)})()}_readModelos(){var a=this;return k(function*(){a.debug("_readModelos");a.debug_time({id:"readModelos"});
var g=yield a.dsl_parser.getNodes({text:"modelos",level:2,icon:"desktop_new",recurse:!0}),c={},f={tables:{},attributes:{},length:0,doc:""},d={id:{value:"INT AUTOINCREMENT PRIMARY KEY",alias:["identificador","autoid","autonum","key"]},texto:{value:"STRING",alias:["text","varchar","string"]},int:{value:"INTEGER",alias:["numero chico","small int","numero"]},float:{value:"FLOAT",alias:["decimal","real"]},boolean:{value:"BOOLEAN",alias:["boleano","true/false"]},date:{value:"DATEONLY",alias:["fecha"]},
datetime:{value:"DATETIME",alias:["fechahora"]},blob:{value:"BLOB",alias:["binario","binary"]}};Object.keys(d).map(function(a){var b=d[a].alias;b.push(a);b.map(b=>{c[b]=d[a].value})});if(0<g.length){f.attributes=l({},g[0].attributes);f.doc=g[0].text_note;f.length=g[0].nodes.length;for(var e of g[0].nodes){var b=l({},e.attributes);f.tables[e.text]={fields:{}};g=[];for(var h in b)f.tables[e.text].fields[h]=c[b[h]],g.push(h+" "+c[b[h]]);f.tables[e.text].sql="CREATE TABLE ".concat(e.text,"(").concat(g.join(","),
")")}}a.debug_timeEnd({id:"readModelos"});if(0<f.length){e=[];for(var k in f.tables)e.push("alasqlJs('".concat(f.tables[k].sql,"');"));k="const alasql = {\n\t\t\t\tinstall (v) {\n\t\t\t\t\t// create tables from models\n\t\t\t\t\t".concat(e.join("\n"),"\n\t\t\t\t\tVue.prototype.alasql = alasqlJs;\n\t\t\t\t}\n\t\t\t}");a.x_state.plugins["../../node_modules/alasql/dist/alasql.min.js"]={global:!0,npm:{alasql:"*"},var:"alasqlJs",mode:"client",customvar:"alasql",custom:k}}return f})()}_readAssets(){var a=
this;return k(function*(){var g={},c=require("path");a.debug("_readAssets");a.debug_time({id:"_readAssets"});var f=yield a.dsl_parser.getNodes({text:"assets",level:2,icon:"desktop_new",recurse:!0}),d=c.sep;if(0<f.length){f=f[0];for(var e of f.nodes)if(1==e.nodes.length&&""!=e.nodes[0].image)g[e.text.toLowerCase()]={i18n:!1,original:e.nodes[0].image,css:"~assets"+d+c.basename(e.nodes[0].image),js:"~"+d+"assets"+d+c.basename(e.nodes[0].image)};else if(1<e.nodes.length){f=e.text.toLowerCase();g[f]={i18n:!0,
i18n_keys:[]};for(var b of e.nodes){var h=l({},b.attributes);h.idioma&&""!=b.image&&(h=h.idioma.toLowerCase(),g[f].i18n_keys.push(h),g[f][h]={original:b.image,css:"~assets"+d+c.basename(b.image),js:"~"+d+"assets"+d+c.basename(b.image)})}g[f].i18n_keys=g[f].i18n_keys.join(",")}else""!=e.link&&(g[e.text.toLowerCase()]={original:e.link,css:"~assets"+d+c.basename(e.link),js:"~"+d+"assets"+d+c.basename(e.link)})}a.debug_timeEnd({id:"_readAssets"});return g})()}_readCentralConfig(){var a=this;return k(function*(){a.debug("_readCentralConfig");
var g=yield a.dsl_parser.getNodes({level:1,recurse:!1}),c={cloud:"aws",type:"simple",i18n:!1,log:"console",debug:!1,deploy:!1,static:!1,timeout:30,modelos:"aurora",componente:!1,"keep-alive":!0,"keep-warm":!0,port:3E3,git:!0,nuxt:"latest",idiomas:"es",":cache":a.x_config.cache,":mode":"spa",":keywords":"",":author":"Punto Origen SpA",":license":"MIT",":github":"",":version":"1.0.0",":description":g[0].text_note,default_face:g[0].font.face,default_size:g[0].font.size,apptitle:g[0].text},f={},d;for(d in g[0].attributes){var e=
g[0].attributes[d];"true"==e?e=!0:"false"==e&&(e=!1);f=l(l({},f),{[d]:e})}c=l(l({},c),f);c.service_name=c.dominio?c.dominio.replace(/\./g,"").toLowerCase():c.apptitle;c[":cache"]||(a.x_config.cache=!1);return c})()}_readConfig(){var a=this;return k(function*(){a.debug("_readConfig");var g={id:"",meta:[],seo:{},secrets:{}},c={};c=yield a.dsl_parser.getNodes({text:"config",level:2,icon:"desktop_new",recurse:!0});if(0<c.length){c=c[0];g.default_face=c.font.face;g.default_size=c.font.size;for(var f of c.nodes)if("meta"==
f.text.toLowerCase())for(var d of f.nodes)"keywords"==d.text.toLowerCase()?(g.seo.keywords=d.nodes.map(a=>a.text),g.meta.push({hid:a.hash(d.nodes[0].text),name:"keywords",content:g.seo.keywords.join(",")})):"language"==d.text.toLowerCase()?(g.seo.language=d.nodes[0].text,g.meta.push({hid:a.hash(d.nodes[0].text),lang:d.nodes[0].text})):"charset"==d.text.toLowerCase()?(g.seo.charset=d.nodes[0].text,g.meta.push({charset:d.nodes[0].text})):(g.seo.charset=d.nodes[0].text,-1!=d.text.indexOf(":")?g.meta.push({property:d.text,
vmid:d.text,content:d.nodes[0].text}):g.meta.push({hid:a.hash(d.nodes[0].text),name:d.text,content:d.nodes[0].text}));else if(0<Object.keys(f.attributes).length){c=f.text.toLowerCase().replace(/ /g,"");var e={};for(h in f.attributes){var b=f.attributes[h];"true"==b?b=!0:"false"==b&&(b=!1);e=l(l({},e),{[h]:b})}g[c]=e;f.icons.includes("password")&&(g[c][":secret"]=!0);""!=f.link&&(g[c][":link"]=f.link)}else 0<f.nodes.length?g[f.text]=f.nodes[0].text:""!=f.link&&(g[f.text]=f.link)}if(!g.name){f=require("path");
d=f.dirname(f.resolve(a.x_flags.dsl));var h=f.resolve(d,"../");d=d.replace(h,"");g.name=d.replace("/","").replace("\\","")+"_"+f.basename(a.x_flags.dsl,".dsl")}g.id||(g.id="com.puntorigen."+g.name);return g})()}getParentNodes(){var a=arguments,g=this;return k(function*(){var c=0<a.length&&void 0!==a[0]?a[0]:g.throwIfMissing("id"),f=1<a.length&&void 0!==a[1]?a[1]:!1,d=yield g.dsl_parser.getParentNodesIDs({id:c,array:!0});c=[];for(var e of d)d=yield g.dsl_parser.getNode({id:e,recurse:!1}),(d=yield g.findValidCommand({node:d,
object:f}))&&c.push(d);return c})()}getAsset(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.throwIfMissing("text"),g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"js",c=a;a=a.replaceAll("jsfunc","js").toLowerCase();if(-1!=c.toLowerCase().indexOf("assets:")&&c in this.x_state.assets)if(-1!=this.x_state.central_config.idiomas.indexOf(",")&&1==this.x_state.assets[c].i18n){var f=this.x_state.assets[c].i18n_keys.split(",")[0];c=this.x_state.assets[c][f][a];"js"==g.toLowerCase()?
(c=c.replaceAll("/".concat(f,"/"),"/' + $i18n.locale + '/"),c="require('".concat(c,"')")):"jsfunc"==g.toLowerCase()&&(c=c.replaceAll("/".concat(f,"/"),"/' + this.$i18n.locale + '/"),c="require('".concat(c,"')"))}else c in this.x_state.assets&&a in this.x_state.assets[c]&&(c=this.x_state.assets[c][a],-1!=g.toLowerCase().indexOf("js")&&(c="require('".concat(c,"')")));return c}struct2params(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.throwIfMissing("id"),g=[],c=l({},a);"aos"in
c&&(a=a.aos.split(","),3==a.length?(c["data-aos"]=a[0],c["data-aos-duration"]=a[1],c["data-aos-delay"]=a[2]):(c["data-aos"]=a[0],c["data-aos-duration"]=a[1]),delete c.aos);var f,d;for([f,d]of Object.entries(c))null==d?g.push("".concat(f,"='xpropx'")):"object"!==typeof d&&"function"!==typeof d&&"undefined"!==typeof d&&g.push("".concat(f,"='").concat(d,"'"));return g.join(" ")}jsDump(a){var g="";g=function(a){var b="";return b="number"===typeof a?b+a:"boolean"===typeof a?b+a:"string"===typeof a&&-1==
a.indexOf("'")&&-1!=a.indexOf("**")&&"**"==a.substr(a.length-2)?b+a.replaceAll("**",""):"string"!==typeof a||-1==a.indexOf("this.")&&-1==a.indexOf("new ")&&-1==a.indexOf("'")&&-1==a.indexOf("`")?"string"===typeof a?b+"'".concat(a,"'"):b+a:b+a};if(Array.isArray(a)){var c=[];for(f in a)c.push(this.jsDump(a[f]));g="[".concat(c.join(","),"]")}else if("object"===typeof a){var f=[];for(c in a){var d="".concat(c,": "),e=a[c];d="object"===typeof e||Array.isArray(e)?d+this.jsDump(e):d+g(e);f.push(d)}g="{\n".concat(f.join(","),
"\n}")}else g="string"===typeof a?g(a):a;return g}hash(a){var g=require("highwayhash"),c;"string"===typeof a?c=Buffer.from(a):"object"===typeof a&&(c=Buffer.from(JSON.stringify(a)));return g.asHexString(this.x_crypto_key,c)}atLeastNode(a){var g=process.versions.node.split(".").map(a=>parseInt(a,10));a=a.split(".").map(a=>parseInt(a,10));return g[0]>a[0]||g[0]===a[0]&&(g[1]>a[1]||g[1]===a[1]&&g[2]>=a[2])}}return I})
