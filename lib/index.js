'use strict';(function(m,k){"object"===typeof exports&&"undefined"!==typeof module?module.exports=k():"function"===typeof define&&define.amd?define(k):(m="undefined"!==typeof globalThis?globalThis:m||self,m.vue_dsl=k())})(this,function(){function m(a,f,c,h,d,e,b){try{var g=a[e](b),q=g.value}catch(p){c(p);return}g.done?f(q):Promise.resolve(q).then(h,d)}function k(a){return function(){var f=this,c=arguments;return new Promise(function(h,d){function e(a){m(g,h,d,e,b,"next",a)}function b(a){m(g,h,d,e,
b,"throw",a)}var g=a.apply(f,c);e(void 0)})}}function u(a,f){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(a);f&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(a,d).enumerable}));c.push.apply(c,h)}return c}function l(a){for(var f=1;f<arguments.length;f++){var c=null!=arguments[f]?arguments[f]:{};f%2?u(Object(c),!0).forEach(function(f){var d=c[f];f in a?Object.defineProperty(a,f,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[f]=d}):
Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):u(Object(c)).forEach(function(f){Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(c,f))})}return a}function y(a){return t.apply(this,arguments)}function t(){t=k(function*(a){var f={hint:"Allowed node type that must be ommited",func:function(){var d=k(function*(e,b){return a.reply_template({hasChildren:!1,state:b})});return function(a,b){return d.apply(this,arguments)}}()},c=function(d){var e=a.dsl_parser.findVariables({text:d,
symbol:"**",symbol_closing:"**"});d=a.dsl_parser.replaceVarsSymbol({text:d,from:{open:"**",close:"**"},to:{open:"${",close:"}"}});return"${"+e+"}"==d?e:"`".concat(d,"`")},h=function(d,e){var b={},g={};if("attributes_aliases"in a.x_commands[d]){var c=a.x_commands[d].attributes_aliases;Object.keys(c).map(function(a){c[a].split(",").map(b=>{g[b]=a})})}Object.keys(e.attributes).map(function(a){var d=e.attributes[a];a=a.trim().replace(":","");var p=a.toLowerCase(),c=d.toString().replaceAll("$variables",
"").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env.").replaceAll("$store.","$store.state.").trim();"props"==p?d.split(",").map(a=>{b[a]=null}):p in g&&d!=c?b[":".concat(g[p])]=c:p in g?b[g[p]]=c:d!=c?b[":".concat(a)]=c:b[a]=c});return b};return{def_config:l(l({},f),{x_icons:"desktop_new",x_level:"2",x_text_contains:"config"}),def_modelos:l(l({},f),{x_icons:"desktop_new",x_level:"2",x_text_contains:"modelos"}),def_assets:l(l({},f),{x_icons:"desktop_new",x_level:"2",
x_text_contains:"assets"}),def_server:{x_icons:"desktop_new",x_level:"2",x_text_contains:"server|servidor|api",hint:"Representa a un backend integrado con funciones de express.",func:function(){var d=k(function*(e,b){e=a.reply_template();a.x_state.npm=l(l({},a.x_state.npm),{body_parser:"*","cookie-parser":"*"});a.x_state.central_config.static=!1;return e});return function(a,b){return d.apply(this,arguments)}}()},def_server_path:{x_icons:"list",x_level:"3,4",x_or_isparent:"def_server",x_not_icons:"button_cancel,desktop_new,help",
hint:"Carpeta para ubicacion de funcion de servidor",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});if(2==e.level)b.state.current_folder=e.text;else if(3==e.level&&(yield a.isExactParentID(e.id,"def_server_path"))){var g=yield a.dsl_parser.getParentNode({id:e.id});b.state.current_folder="".concat(g.text,"/").concat(e.id)}else b.valid=!1;return b});return function(a,b){return d.apply(this,arguments)}}()},def_server_func:{x_empty:"icons",x_level:"3,4,5",x_or_isparent:"def_server",
hint:"Corresponde a la declaracion de una funcion de servidor",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});a.x_state.central_config.static=!1;b.state.current_func=e.text;2!=e.level&&(yield a.getParentNodes(e.id));b.open="<func_code>";b.close="</func_code>";return b});return function(a,b){return d.apply(this,arguments)}}()},def_store:{x_icons:"desktop_new",x_level:"2",x_text_contains:"store",hint:"Representa una coleccion de stores de Vue",func:function(){var d=k(function*(e,
b){return a.reply_template({state:b,hasChildren:!0})});return function(a,b){return d.apply(this,arguments)}}()},def_store_def:{x_empty:"icons",x_level:"3",x_all_hasparent:"def_store",hint:"Representa a una definicion de store de VueX",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var g="normal",d="";b.state.current_store=e.text;a.x_state.stores||(a.x_state.stores={});a.x_state.stores&&!1===e.text in a.x_state.stores&&(a.x_state.stores[e.text]={});Object.keys(e.attributes).map(function(b){b=
b.toLowerCase();[":type","type","tipo",":tipo"].includes(b)?["sesion","session"].includes(e.attributes[b])?(g="session",a.x_state.npm["nuxt-vuex-localstorage"]="*"):"local persistent persistente localstorage storage db bd".split(" ").includes(e.attributes[b])&&(g="local",a.x_state.npm["nuxt-vuex-localstorage"]="*"):["version",":version"].includes(b)?d=e.attributes[b]:["expire",":expire","expira",":expira"].includes(b)});a.x_state.stores_types&&!1===g in a.x_state.stores_types&&(a.x_state.stores_types[g]=
{});!1===b.state.current_store in a.x_state.stores_types[g]&&(a.x_state.stores_types[g][b.state.current_store]={});""!=d&&!1===b.state.current_store in a.x_state.stores_types.versions&&(a.x_state.stores_types.versions[b.state.current_store]={});""!=d&&!1===b.state.current_store in a.x_state.stores_types.expires&&(a.x_state.stores_types.expires[b.state.current_store]={});return b});return function(a,b){return d.apply(this,arguments)}}()},def_proxies:{x_icons:"desktop_new",x_level:2,x_text_contains:"prox",
hint:"Representa una coleccion de proxies de Vue",func:function(){var d=k(function*(e,b){return a.reply_template({state:b})});return function(a,b){return d.apply(this,arguments)}}()},def_proxy_def:{x_level:3,x_empty:"icons",x_or_isparent:"def_proxies",hint:"Representa una definicion de un proxy (middleware) en Vue",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});b.state.current_proxy=e.text.trim();a.x_state.proxies[b.state.current_proxy]={imports:{underscore:"_"},code:""};b.open=
a.tagParams("proxy_code",{name:b.state.current_proxy},!1)+"\n";b.close="</proxy_code>";return b});return function(a,b){return d.apply(this,arguments)}}()},def_page:{x_level:2,x_not_icons:"button_cancel,desktop_new,list,help",x_not_text_contains:"componente:,layout:",hint:"Archivo vue",func:function(){var d=k(function*(e,b){var g=a.reply_template({state:b});g.state.current_page=e.text;a.x_state.pages[g.state.current_page]||(a.x_state.pages[g.state.current_page]={tipo:"page",acceso:"*",params:"",layout:"",
defaults:{},imports:{},components:{},directives:{},variables:{},seo:{},meta:{},head:{script:[],meta:[],seo:{}},var_types:{},proxies:"",return:"",styles:{},script:{},path:"/"+g.state.current_page});g.state.from_def_layout&&(a.x_state.pages[g.state.current_page].tipo="layout");g.state.from_def_componente&&(a.x_state.pages[g.state.current_page].tipo="componente");e.icons.includes("gohome")&&(a.x_state.pages[g.state.current_page].path="/");var d={};Object.keys(e.attributes).map(function(b){var c=e.attributes[b];
c=c.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");["proxy"].includes(b.toLowerCase())?a.x_state.pages[g.state.current_page].proxies=c:["acceso","method"].includes(b.toLowerCase())?a.x_state.pages[g.state.current_page].acceso=c:["path","url","ruta"].includes(b.toLowerCase())?a.x_state.pages[g.state.current_page].path=c:["layout"].includes(b.toLowerCase())?a.x_state.pages[g.state.current_page].layout=
c:["meta:title","meta:titulo"].includes(b.toLowerCase())?a.x_state.pages[g.state.current_page].xtitle=c:["background","fondo"].includes(b.toLowerCase())?(d.id="tapa",b=a.getAsset(c,"css"),a.x_state.pages[g.state.current_page].styles["#tapa"]={"background-image":"url('".concat(b,"')"),"background-repeat":"no-repeat","background-size":"100vw"}):":"!=b.charAt(0)&&c!=e.attributes[b]?d[":"+b]=c:d[b]=c}.bind(this));""!=e.text_note&&(g.open="\x3c!-- ".concat(e.text_note.replaceAll("<br/ >","\n")," --\x3e\n"));
g.open+="<template>\n";!1==="from_def_componente"in g.state&&""==a.x_state.pages[g.state.current_page].layout&&(g.open+="\t"+a.tagParams("v-app",d,!1)+"\n",g.close+="\t</v-app>\n");g.close+="</template>\n";return g});return function(a,b){return d.apply(this,arguments)}}()},def_page_seo:{x_level:3,x_icons:"desktop_new",x_text_contains:"seo",hint:"Definicion local de SEO",func:function(){var d=k(function*(e,b){var g=a.reply_template({state:b});(yield e.getNodes()).map(function(){var e=k(function*(e){var g=
e.text.toLowerCase().trim(),d=yield e.getNodes();if("keywords"==g){var c=[];d.map(a=>{c.push(a.text)});a.x_state.pages[b.current_page].seo[g]=c;a.x_state.pages[b.current_page].meta.push({hid:a.hash(d),name:"keywords",content:c.join(",")})}else"language"==g&&0<d.length?(a.x_state.pages[b.current_page].seo[g]=d[0].text,a.x_state.pages[b.current_page].meta.push({hid:a.hash(d),lang:d[0].text.toLowerCase().trim(),content:d[0].text})):0<d.length&&(a.x_state.pages[b.current_page].seo[g]=d[0].text,g.contains(":")?
a.x_state.pages[b.current_page].meta.push({property:g,vmid:g,content:d[0].text}):a.x_state.pages[b.current_page].meta.push({hid:a.hash(d),name:e.text.trim(),content:d[0].text}))});return function(a){return e.apply(this,arguments)}}().bind(this));return g});return function(a,b){return d.apply(this,arguments)}}()},def_page_estilos:{x_level:"3,4",x_icons:"desktop_new",x_text_contains:"estilos",x_or_hasparent:"def_page,def_componente,def_layout",hint:"Definicion de estilos/clases locales",func:function(){var d=
k(function*(e,b){e=a.reply_template({state:b});e.open=a.tagParams("page_estilos",{},!1);e.close="</page_estilos>";return e});return function(a,b){return d.apply(this,arguments)}}()},def_page_estilos_class:{x_level:4,x_empty:"icons",x_all_hasparent:"def_page_estilos",hint:"Definicion de clase CSS en template VUE",func:function(){var d=k(function*(e,b){var g=a.reply_template({state:b});b=e.text.trim().charAt(0);!1===["#",".","|"].includes(b)?g.open=".".concat(e.text.trim()," {\n"):g.open="|"==b?"".concat(e.text.trim().substring(1),
" {\n"):"".concat(e.text.trim()," {\n");Object.keys(e.attributes).map(function(a){var b=e.attributes[a];g.open+="\t".concat(a,": ").concat(b,";\n")});g.open+="}\n";return g});return function(a,b){return d.apply(this,arguments)}}()},def_layout:{x_level:2,x_not_icons:"button_cancel,desktop_new,list,help,idea",x_text_contains:"layout:",x_empty:"icons",hint:"Archivo vue tipo layout",func:function(){var d=k(function*(e,b){a.reply_template({state:b});e=yield a.x_commands.def_page.func(e,l(l({},b),{from_def_layout:!0}));
delete e.state.from_def_layout;return e});return function(a,b){return d.apply(this,arguments)}}()},def_layout_view:{x_level:">2",x_icons:"idea",x_text_contains:"layout:",hint:"Contenedor flexible, layout:flex o layout:wrap",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var g="flex",d=6;""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note.trim()," --\x3e"));e.text.contains(":wrap")&&(g="wrap");var c=h("def_layout_view",e);e=l({},c);c.width&&(d=c.width,c.width.contains("%")&&
(d=Math.round(12*parseInt(c.width.replaceAll("%",""))/100)),delete c.width);c[":width"]&&delete c[":width"];e.margen&&"true"==e.margen?(delete c.margen,e.center&&"true"==e.center?(b.open+="<v-container fill-height>\n",b.open+="<v-layout row wrap align-center>\n"):"flex"==g?(b.open+="<v-container>\n",c.row=null,b.open+=a.tagParams("v-layout",c,!1)+"\n"):"wrap"==g&&(b.open+="<v-container fill-height fluid grid-list-xl>\n",c.wrap=null,b.open+=a.tagParams("v-layout",c,!1)+"\n"),"flex"==g&&e.center&&"true"==
e.center&&(c.xs12=null,c["sm"+d]=null,c["offset-sm"+Math.round(d/2)]=null,b.open+=a.tagParams("v-flex",c,!1)+"\n",b.close+="</v-flex>"),b.close+="</v-layout>\n",b.close+="</v-container>\n"):(e.center&&"true"==e.center?(c.row=null,delete c.center,b.open+=a.tagParams("v-layout",c,!1)+"\n"):b.open+="<v-layout wrap>\n","flex"==g&&e.center&&"true"==e.center&&(delete c.center,c.xs12=null,c["sm"+d]=null,c["offset-sm"+Math.round(d/2)]=null,b.open+=a.tagParams("v-flex",c,!1)+"\n",b.close+="</v-flex>"),b.close+=
"</v-layout>");return b});return function(a,b){return d.apply(this,arguments)}}()},def_componente:{x_level:2,x_not_icons:"button_cancel,desktop_new,list,help,idea",x_text_contains:"componente:",x_empty:"icons",hint:"Archivo vue tipo componente",func:function(){var c=k(function*(e,b){a.reply_template({state:b});e=yield a.x_commands.def_page.func(e,l(l({},b),{from_def_componente:!0}));delete e.state.from_def_componente;return e});return function(a,b){return c.apply(this,arguments)}}()},def_componente_view:{x_level:">2",
x_icons:"idea",x_text_contains:"componente:",hint:"Instancia de componente",func:function(){var c=k(function*(e,b){var g=a.reply_template({state:b}),c=e.text.trim().split(":").pop(),d="c-".concat(c),f=c.replaceAll("-","");a.x_state.pages[b.current_page].imports["~/components/".concat(c,".vue")]=f;a.x_state.pages[b.current_page].components[d]=f;b=h("def_componente_view",e);""!=e.text_note&&(g.open="\x3c!-- ".concat(e.text_note.trim()," --\x3e\n"));g.open+=a.tagParams(d,b,!1)+"\n";g.close="</".concat(d,
">\n");return g});return function(a,b){return c.apply(this,arguments)}}()},def_componente_emitir:{x_level:">2",x_icons:"desktop_new",x_text_contains:"llamar evento|emitir evento",x_all_hasparent:"def_componente",hint:"Emite un evento desde el componente a sus instancias",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});var g=a.dsl_parser.findVariables({text:e.text,symbol:'"',symbol_closing:'"'}).trim(),d=[];Object.keys(e.attributes).map(function(a){var b=e.attributes[a];b.contains("**")&&
e.icons.includes("bell")?b=c(b):"true"==b||"false"==b?(b="true"==b?!0:b,b="false"==b?!1:b):b.contains("$")?b=b.replaceAll("$variables.","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$config.","process.env").replaceAll("$store.","this.$store.state."):0==b.contains("this.")&&0==b.contains("'")&&(b="'".concat(b,"'"));d.push("".concat(a,": ").concat(b))});""!=e.text_note&&(b.open="// ".concat(e.text_note.trim(),"\n"));b.open+="this.$emit('".concat(g,"',{").concat(d.join(","),
"});\n");return b});return function(a,b){return d.apply(this,arguments)}}()},def_margen:{x_icons:"idea",x_text_contains:"margen",hint:"Define un margen alrededor del contenido",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var g={};Object.keys(e.attributes).map(function(a){var b=e.attributes[a];b=b.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if("props"==a.toLowerCase())for(var c of b.split(","))g[c]=
null;else g[a]=b});b.open+=a.tagParams("v-container",g,!1)+"\n";b.close+="</v-container>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_contenedor:{x_icons:"idea",x_text_contains:"contenedor",x_level:">2",hint:"Vue Container",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var g={refx:e.id};Object.keys(e.attributes).map(function(a){var b=e.attributes[a],c=a.toLowerCase().trim(),d=b.toString().replaceAll("$variables","").replaceAll("$vars.","").replaceAll("$params.",
"").replaceAll("$env.","process.env.").replaceAll("$store.","$store.state.").trim();if("props"==c)for(var f of d.split(","))g[f]=null;else":"!=c.charAt(0)&&""!=b&&b!=d?g[":"+a.trim()]=d:g[a.trim()]=d}.bind(this));""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e\n"));b.open+=a.tagParams("v-container",g,!1)+"\n";b.close="</v-container>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_flex:{x_icons:"idea",x_text_contains:"flex",x_not_text_contains:":",hint:"Columna de ancho flexible",
func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var g={refx:e.id};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));Object.keys(e.attributes).map(function(a){var b=e.attributes[a],c=a.toLowerCase().trim(),d=b.toString().replaceAll("$variables","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$env.","process.env.").replaceAll("$store.","$store.state.").trim(),f=0;-1!=d.indexOf("%")&&(d=parseInt(d.replaceAll("%","").trim()),f=Math.round(12*d/100));
if("class"==c)g.class=d;else if("props"==c)for(var h of d.split(","))g[h]=null;else["padding","margen"].includes(c)?g["pa-"+d]=null:"ancho"==c?g=l(l({},g),w("xs-".concat(f,",sm-").concat(f,",md-").concat(f,",lg-").concat(f),null)):"offset"==c?g=l(l({},g),w("offset-xs-".concat(f,",offset-sm-").concat(f,",offset-md-").concat(f,",offset-lg-").concat(f),null)):["muy chico","movil","small","mobile"].includes(c)?g["xs".concat(f)]=null:["chico","tablet","small","tableta"].includes(c)?g["sm".concat(f)]=null:
["medio","medium","average"].includes(c)?g["md".concat(f)]=null:["grande","pc","desktop","escritorio"].includes(c)?g["lg".concat(f)]=null:"xfila:grande xfila:pc xfila:desktop pc escritorio xfila:escritorio".split(" ").includes(c)?g["lg".concat(Math.round(12/d))]=null:["xfila:medio","xfila:tablet","tablet","xfila"].includes(c)?g["md".concat(Math.round(12/d))]=null:["xfila:chico","xfila:movil","xfila:mobile"].includes(c)?g["sm".concat(Math.round(12/d))]=null:["xfila:muy chico","xfila:movil chico","xfila:small mobile"].includes(c)?
g["xs".concat(Math.round(12/d))]=null:["muy chico:offset","movil:offset","small:offset","mobile:offset"].includes(c)?g["offset-xs".concat(Math.round(12/d))]=null:["chico:offset","tablet:offset","small:offset","tableta:offset"].includes(c)?g["offset-sm".concat(Math.round(12/d))]=null:["medio:offset","medium:offset","average:offset"].includes(c)?g["offset-md".concat(Math.round(12/d))]=null:["grande:offset","pc:offset","desktop:offset","escritorio:offset","grande:left"].includes(c)?g["offset-lg".concat(Math.round(12/
d))]=null:":"!=c.charAt(0)&&""!=b&&b!=d?g[":"+a.trim()]=d:g[a.trim()]=d});b.open+=a.tagParams("v-flex",g,!1)+"\n";b.close="</v-flex>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_spacer:{x_icons:"idea",x_text_contains:"spacer",x_level:">2",hint:"Spacer es un espaciador flexible",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));b.open+=a.tagParams("v-spacer",{},!0)+"\n";return b});return function(a,
b){return c.apply(this,arguments)}}()},def_progress:{x_icons:"idea",x_text_contains:"progres",x_level:">2",attributes_aliases:{"background-color":"background-color,background","background-opacity":"background-opacity,opacity","buffer-value":"max,max-value",value:"value,valor",indeterminate:"loop,infinito",width:"width,ancho",size:"size,porte",rotate:"rotate,rotar"},hint:"Item de progreso",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var g="circular";""!=e.text_note&&(b.open=
"\x3c!-- ".concat(e.text_note," --\x3e"));var c=h("def_progress",e);Object.keys(c).map(function(a){"tipo"==a.toLowerCase()&&["lineal","linea","linear"].includes(c[a])?(g="linear",delete c[a]):"indeterminate"==a.toLowerCase()&&(c[":".concat(a)]=c[a],delete c[a])});b.open+=a.tagParams("v-progress-".concat(g),c,!1)+"\n";b.close="</v-progress-".concat(g,">\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_center:{x_icons:"idea",x_text_contains:"centrar",hint:"Centra nodos hijos",
func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var g={refx:e.id,class:"text-xs-center"};""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));b.open=a.tagParams("div",g,!1)+"<center>\n";b.close+="</center></div>\n";return b});return function(a,b){return c.apply(this,arguments)}}()},def_html:{x_icons:"idea",x_text_contains:"html:",hint:"html:x, donde x es cualquier tag",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});var c={refx:e.id};Object.keys(e.attributes).map(function(b){var g=
e.attributes[b];g=g.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if("props"==b.toLowerCase())for(var d of g.split(","))c[d]=null;else if(":"!=b.charAt(0)&&g!=e.attributes[b])c[":"+b]=g;else if("v-model"!=b)if(-1!=a.x_state.central_config.idiomas.indexOf(",")){d=a.x_state.centrar.idiomas.split(",")[0];a.x_state.strings_i18n[d]||(a.x_state.strings_i18n[d]={});var f="t_"+a.hash(g);a.x_state.strings_i18n[d][f]=
g;c[":"+b]="$t('".concat(f,"')")}else c[b]=g;else c[b]=g}.bind(this));""!=e.text_note&&(b.open="\x3c!-- ".concat(e.text_note," --\x3e"));var d=e.text.replace("html:","");b.open+=a.tagParams(d,c,!1)+"\n";b.close+="</".concat(d,">\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_textonly:{x_level:">2",x_empty:"icons",x_priority:-5,x_or_hasparent:"def_page,def_componente,def_layout",hint:"Texto a mostrar",func:function(){var c=k(function*(e,b){b=a.reply_template({state:b});
var c={class:[]},d,f,h,k=e.text.replaceAll("$variables","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env.").replaceAll("$store.","$store.state.");""==k&&(k="&nbsp;");if(1==(yield a.hasParentID(e.id,"def_toolbar"))&&0==(yield a.hasParentID(e.id,"def_slot")))b.valid=!1,b.invalidated_me="def_toolbar";else if(1==(yield a.hasParentID(e.id,"def_variables")))b.valid=!1,b.invalidated_me="def_variables";else if(1==(yield a.hasParentID(e.id,"def_page_estilos")))b.valid=
!1,b.invalidated_me="def_page_estilos";else if(1==(yield a.hasParentID(e.id,"def_page_estilos")))b.valid=!1,b.invalidated_me="def_datatable_headers";else{""!=e.text_note&&(b.open+="\x3c!-- ".concat(e.text_note," --\x3e\n"));if(-1!=e.text.indexOf("..lorem..")&&-1!=e.text.indexOf(":")){var l=e.text.split(":");var n=l[l.length-1]}-1!=e.text.indexOf("numeral(")&&(a.x_state.plugins["vue-numeral-filter"]={global:!0,npm:{"vue-numeral-filter":"*"},config:"{ locale: 'es-es' }"});1==e.font.bold&&c.class.push("font-weight-bold");
10<=e.font.size&&c.class.push("caption");1==e.font.italic&&c.class.push("font-italic");Object.keys(e.attributes).map(function(a){var b=a.toLowerCase().trim(),g=e.attributes[a];"class"==b?c.class.push(g):":span"==b?d=!0:":omit"==b?f=!0:[":length",":largo","len","length","largo"].includes(a)?n=g:"small"==a?h=!0:["ucase","mayusculas","mayuscula"].includes(a)?"true"!=g&&1!=g||c.class.push("text-uppercase"):["capitales","capitalize","capital"].includes(a)?"true"!=g&&1!=g||c.class.push("text-capitalize"):
["lcase","minusculas","minuscula"].includes(a)?"true"!=g&&1!=g||c.class.push("text-lowercase"):"truncate"==a?"true"!=g&&1!=g||c.class.push("text-truncate"):"no-wrap"==a?"true"!=g&&1!=g||c.class.push("text-no-wrap"):["weight","peso","grosor"].includes(a)?(a=g.toLowerCase(),["thin","fina","100"].includes(a)?c.class.push("font-weight-thin"):["light","300"].includes(a)?c.class.push("font-weight-light"):["regular","400"].includes(a)?c.class.push("font-weight-light"):["medium","500"].includes(a)?c.class.push("font-weight-medium"):
["bold","700"].includes(a)?c.class.push("font-weight-bold"):["black","gruesa","900"].includes(a)&&c.class.push("font-weight-black")):"color"==a?-1!=a.indexOf(" ")?(a=g.split(" "),c.class.push("".concat(a[0],"--text text--").concat(a[1]))):c.class.push("".concat(g,"--text")):"align"==a?(a=g.toLowerCase(),["center","centro","centrar"].includes(a)?c.class.push("text-xs-center"):["right","derecha"].includes(a)?c.class.push("text-xs-right"):["left","izquierda","izquierdo"].includes(a)&&c.class.push("text-xs-left")):
"style"==a?(c.style||(c.styles=[]),c.styles.push(g)):":"!=a.charAt(0)&&""!=e.text&&k!=e.text?c[":"+a]=g:c[a]=g});n&&(l=require("lorem-ipsum").loremIpsum,k=l({count:parseInt(n),units:"words"}));h&&(k="<small>".concat(k,"</small>"));c.class=c.class.map(function(a){a.replaceAll("text-h1","display-4").replaceAll("text-h2","display-3").replaceAll("text-h3","display-2").replaceAll("text-h4","display-1").replaceAll("text-h5","headline").replaceAll("text-subtitle-1","subtitle-1").replaceAll("text-subtitle-2",
"subtitle-2").replaceAll("text-h6","title").replaceAll("text-body-1","body-1").replaceAll("text-body-2","body-2").replaceAll("text-caption","caption").replaceAll("text-overline","overline");return a});0<c.class.length&&(c.class=c.class.join(" "));c.style&&(c.styles=c.styles.join(";"));f||(a.hasParentID(e.id,"def_textonly")||d?b.open+=a.tagParams("span",c)+k+"</span>\n":a.hasParentID(e.id,"def_card_title")&&!c.class?b.open+=k+"\n":b.open+=a.tagParams("div",c)+k+"</div>\n")}return b});return function(a,
b){return c.apply(this,arguments)}}()},def_variables:{x_icons:"xmag",x_level:3,x_text_contains:"variables",hint:"Definicion local de variables observadas",func:function(){var c=k(function*(c,b){c=a.reply_template({state:b});"undefined"!==typeof b.current_page&&("undefined"===typeof a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page]={}),!1==="variables"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].variables={}),!1==="types"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].types=
{}));return c});return function(a,b){return c.apply(this,arguments)}}()},def_variables_field:{x_priority:1,x_empty:"icons",x_level:">3",x_all_hasparent:"def_variables",hint:"Campo con nombre de variable observada y tipo",func:function(){var c=k(function*(c,b){var e=a.reply_template({state:b}),d={},f="string",h=c.text.trim(),k=c.level-3;if(h.contains("[")&&h.contains("]")||h.contains("{")&&h.contains("}"))f="script",h="script".concat(c.id);else if(h.contains(":"))f=h.split(":").pop().toLowerCase().trim(),
h=h.split(":")[0].trim();else if(c.nodes_raw&&0<c.nodes_raw.length){var l=yield c.getNodes(),n=!1,m;for(m of l)m.icons.includes("help")&&(n=!0);0==n&&(f="object")}else f="string";Object.keys(c.attributes).map(function(b){var e=b.toLowerCase().trim(),g=c.attributes[b];["type","tipo",":type",":tipo"].includes(e)?f=g.toLowerCase().trim():["valor","value",":valor",":value"].includes(e)?(b=g.replaceAll("$variables","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$config.",
"process.env.").replaceAll("$store.","this.$store.state."),"{now}"==b.toLowerCase().trim()&&(b="new Date()"),b.contains("assets:")&&(b=a.getAsset(b,"js")),d.value=b):e.contains(":")&&(d[b.trim()]=g.trim())});if(["string","text","texto"].includes(f))d.value=!1==="value"in d?"":d.value.toString();else if("script"==f){d.value=c.text.trim().replaceAll("&#xa;","").replaceAll("&apos;",'"').replaceAll("&#xf1;","\u00f1");"["!=d.value.charAt(0)&&(d.value="["+d.value+"]");l=require("safe-eval");try{d.value=
l(d.value)}catch(z){d.value=[{error_in_script_var:z}]}}else["int","numeric","number","numero"].includes(f)?d.value=!1==="value"in d?0:parseInt(d.value):["float","real","decimal"].includes(f)?d.value=!1==="value"in d?0:parseFloat(d.value):["boolean","boleano","booleano"].includes(f)?!1==="value"in d?d.value="true"==h?!0:!1:"true"==d.value?d.value=!0:"false"==d.value&&(d.value=!1):["array"].includes(f)?(f="array",d.value=!1==="value"in d?[]:JSON.parse(d.value)):["struct","object"].includes(f)&&(f="object",
d.value=!1==="value"in d?{}:JSON.parse(d.value));"undefined"!==typeof b.current_page&&(!1===b.current_page in a.x_state.pages&&(a.x_state.pages[b.current_page]={}),!1==="variables"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].variables={}),!1==="var_types"in a.x_state.pages[b.current_page]&&(a.x_state.pages[b.current_page].var_types={}));if(1==k)a.x_state.pages[b.current_page].var_types[h]=f,a.x_state.pages[b.current_page].variables[h]=d.value,e.state.vars_path=[h],e.state.vars_types=
[f];else{e.state.vars_last_level==k&&(e.state.vars_path.pop(),e.state.vars_types.pop());e.state.vars_path.push(h);if("object"==e.state.vars_types[e.state.vars_types.length-1])x(a.x_state.pages[b.current_page].variables,d.value,e.state.vars_path.join("."));else if("array"==e.state.vars_types[e.state.vars_types.length-1]){l=[...e.state.vars_path];l.pop();var r=A(a.x_state.pages[b.current_page].variables,l.join("."));"script"==f?d.value.map(a=>{r.push(a)}):h!=d.value?(n={},n[h]=d.value,r.push(n)):r.push(d.value);
x(a.x_state.pages[b.current_page].variables,r,l.join("."))}e.state.vars_types.push(f);a.x_state.pages[b.current_page].var_types[e.state.vars_path.join(".")]=f}e.state.vars_last_level=k;return e});return function(a,b){return c.apply(this,arguments)}}()},def_variables_watch:{x_icons:"help",x_level:">4",x_text_contains:"change",x_all_hasparent:"def_variables",hint:"Monitorea los cambios realizados a la variable padre",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var e={name:c.text.trim(),
type:"watched",oldvar:"old",newvar:"new",deep:!1};Object.keys(c.attributes).map(function(a){var b=a.toLowerCase().trim();a=c.attributes[a];[":old","old"].includes(b)?e.oldvar=a:[":new","new"].includes(b)?e.newvar=a:[":deep","deep"].includes(b)&&(e.deep=a)});e.flat=b.state.vars_path.join(".");b.open=a.tagParams("vue_watched_var",e,!1);""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n"));b.close="</vue_watched_var>";return b});return function(a,b){return c.apply(this,arguments)}}()},def_variables_func:{x_icons:"help",
x_level:4,x_not_text_contains:":server,condicion si,otra condicion",x_all_hasparent:"def_variables",hint:"Variable tipo funcion",func:function(){var c=k(function*(c,b){b=a.reply_template({state:b});var e={name:c.text.trim(),type:"computed"},d="async";Object.keys(c.attributes).map(function(a){var b=a.toLowerCase().trim().replaceAll(":","");a=c.attributes[a].trim();"default"==b?e.valor=a:["valor","value"].includes(b)?e.valor=a:"lazy"==b?e.lazy="true"==a?!0:!1:"observar onchange cambie cambien modifiquen cuando monitorear watch".split(" ").includes(b)?
e.watch=a:"async"==b&&(d="true"==a?"async":"sync")});"async"==d?(a.x_state.plugins["vue-async-computed"]={global:!0,npm:{"vue-async-computed":"*"}},b.open=a.tagParams("vue_async_computed",e,!1),""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n")),b.close="</vue_async_computed>\n"):(b.open=a.tagParams("vue_computed",e,!1),""!=c.text_note&&(b.open+="//".concat(c.text_note,"\n")),b.close="</vue_computed>\n");return b});return function(a,b){return c.apply(this,arguments)}}()},def_responder:{x_icons:"desktop_new",
x_text_contains:"responder",x_not_text_contains:"traducir,struct,extender",x_all_hasparent:"def_variables",x_level:">3",hint:"Emite una respuesta para la variable de tipo funcion",func:function(){var d=k(function*(e,b){b=a.reply_template({state:b});""!=e.text_note&&(b.open="//".concat(e.text_note,"\n"));var d=a.dsl_parser.findVariables({text:e.text,symbol:'"',symbol_closing:'"'});d.contains("**")&&e.icons.includes("bell")?(e=c(d),b.open+="return ".concat(e,";\n")):d.contains("$")?(d=d.replaceAll("$params",
"this.").replaceAll("$variables","this."),b.open+="return ".concat(d,";\n")):d.contains("assets:")?(d=a.getAsset(d,"js"),b.open+="return ".concat(d,";\n")):""==d?b.open+="return '';\n":"("==d.charAt(0)&&")"==d.slice(-1)?(d=d.slice(1).slice(0,-1),b.open+="return ".concat(d,";\n")):a.x_state.central_config.idiomas&&a.x_state.central_config.idiomas.contains(",")||(b.open+="return '".concat(d,"';\n"));return b});return function(a,b){return d.apply(this,arguments)}}()},def_struct:{x_icons:"desktop_new",
x_text_contains:"struct",x_not_text_contains:"traducir",x_level:">3",hint:"Crea una variable de tipo Objeto, con los campos y valores definidos en sus atributos.",func:function(){var d=k(function*(d,b){b=a.reply_template({state:b});if(d.text.contains(",")){var e=d.text.split(",").pop();if(a.hasParentID(d.id,"def_event_server")){e=e.replaceAll("$variables.","resp.").replaceAll("$vars.","resp.").replaceAll("$params.","resp.");e="resp."==e?"resp":e;var f=!0}else e=e.replaceAll("$variables.","this.").replaceAll("store.",
"this.$store.state."),e="this."==e?"this":e;var h=l({},d.attributes);Object.keys(d.attributes).map(function(b){b.toLowerCase().trim();var e=d.attributes[b].trim();e=d.icons.includes("bell")?c(e):e.contains("assets:")?a.getAsset(e,"jsfunc"):f?e.replaceAll("$variables.","resp.").replaceAll("$vars.","resp.").replaceAll("$params.","resp."):e.replaceAll("$variables.","this.").replaceAll("$vars.","this.").replaceAll("$params.","this.").replaceAll("$store.","this.$store.state.");h[b]=e});""!=d.text_note&&
(b.open="// ".concat(d.text_note,"\n"));b.open+="var ".concat(e.trim()," = ").concat(JSON.stringify(h),";\n")}else b.valid=!1;return b});return function(a,b){return d.apply(this,arguments)}}()}}});return t.apply(this,arguments)}function w(a,f){var c=a;if("string"===typeof c){c={};a=a.split(",");for(var h in a)c[a[h]]=f}else for(var d in c)c[d]=f;return c}function x(a,f,c){var h;c=c.split(".");for(h=0;h<c.length-1;h++)a=a[c[h]];a[c[h]]=f}function A(a,f){return f.split(".").reduce((a,f)=>a[f],a)}String.prototype.replaceAll=
function(a,f){a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return this.replace(new RegExp(a,"ig"),f)};String.prototype.contains=function(a){return-1!=this.indexOf(a)?!0:!1};var B=require("concepto");class C extends B{constructor(a){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f=l(l({},{class:"vue",debug:!0}),f);super(a,f)}onInit(){var a=this;return k(function*(){yield a.addCommands(y);a.x_crypto_key=require("crypto").randomBytes(32);a.x_state={plugins:{},npm:{},dev_npm:{},envs:{},
funciones:{},proxies:{},pages:{},current_func:"",current_folder:"",current_proxy:"",strings_i18n:{},stores_types:{versions:{},expires:{}}};a.x_state.config_node=yield a._readConfig();a.x_state.central_config=yield a._readCentralConfig();a.x_state.assets=yield a._readAssets();a.x_state.dirs=a.x_state.central_config.componente?yield a._appFolders({components:"",pages:"",assets:"assets/","static":"static/",umd:"umd/"}):yield a._appFolders({client:"client/",layouts:"client/layouts/",components:"client/components/",
pages:"client/pages/",plugins:"client/plugins/","static":"client/static/",middleware:"client/middleware/",server:"client/server/",assets:"client/assets/",css:"client/assets/css/",store:"client/store/",lang:"client/lang/"});a.x_state.models=yield a._readModelos();a.x_state.nuxt_is_running=yield a._isLocalServerRunning();a.debug("is Server Running: "+a.x_state.nuxt_is_running);if(a.x_state.config_node.copiar){var f=require("path"),c=f.dirname(f.resolve(a.x_flags.dsl)),h=require("recursive-copy");a.x_console.outT({message:"copying config:copiar directories to 'static' target folder",
color:"yellow"});yield Object.keys(a.x_state.config_node.copiar).map(function(){var a=k(function*(a){a=f.join(c,a);try{yield h(a,this.x_state.dirs.static)}catch(v){"EEXIST"!=v.code&&this.x_console.outT({message:"error: copying directory ".concat(a),data:v})}});return function(b){return a.apply(this,arguments)}}().bind(a));a.x_console.outT({message:"copying config:copiar directories ... READY",color:"yellow"})}if(a.x_state.config_node["nuxt:icon"]){a.x_state.npm["@nuxtjs/pwa"]="*";var d=require("path"),
e=d.dirname(d.resolve(a.x_flags.dsl));d=d.join(e,a.x_state.config_node["nuxt:icon"]);e=a.x_state.dirs.static+"icon.png";a.debug({message:"NUXT ICON dump (copy icon)",color:"yellow",data:d});var b=require("fs").promises;try{yield b.copyFile(d,e)}catch(q){a.x_console.outT({message:"error: copying NUXT icon",data:q})}}a.x_state.config_node["google:adsense"]&&(a.x_state.npm["vue-google-adsense"]="*",a.x_state.npm["vue-script2"]="*");a.x_state.config_node["google:analytics"]&&(a.x_state.npm["@nuxtjs/google-gtag"]=
"*");a.x_state.central_config.componente?(a.x_console.outT({message:"vue initialized() -> as component/plugin"}),a.x_state.npm.global="^4.4.0",a.x_state.npm.poi="9",a.x_state.npm.underscore="*",a.x_state.dev_npm["@vue/test-utils"]="^1.0.0-beta.12",a.x_state.dev_npm["babel-core"]="^6.26.0",a.x_state.dev_npm["babel-preset-env"]="^1.6.1",a.x_state.dev_npm.jest="^22.4.0",a.x_state.dev_npm["jest-serializer-vue"]="^0.3.0",a.x_state.dev_npm.vue="*",a.x_state.dev_npm["vue-jest"]="*",a.x_state.dev_npm["vue-server-renderer"]=
"*",a.x_state.dev_npm["vue-template-compiler"]="*"):(a.x_console.outT({message:"vue initialized() ->"}),a.x_state.plugins["vue-moment"]={global:!0,npm:{"vue-moment":"*"},extra_imports:["moment"],requires:["moment/locale/es"],config:"{ moment }"},a.x_state.npm["@nuxtjs/axios"]="*",a.x_state.npm.nuxt="latest"==a.x_state.central_config.nuxt?"*":"2.11.0",a.x_state.npm.express="*",a.x_state.npm["serverless-http"]="*",a.x_state.npm["serverless-apigw-binary"]="*",a.x_state.npm.underscore="*",a.x_state.dev_npm["serverless-prune-plugin"]=
"*",a.x_state.dev_npm["serverless-offline"]="*",a.x_state.dev_npm["vue-beautify-loader"]="*",a.x_state.central_config.dominio&&(a.x_state.dev_npm["serverless-domain-manager"]="*"));d=function(b){["aurora","vpc","aws"].includes(b)&&"object"===typeof a.x_state.config_node[b]&&Object.keys(a.x_state.config_node[b]).map(function(a){this.x_state.envs["config.".concat(b,".").concat(a)]="process.env.".concat((b+"_"+a).toUpperCase())}.bind(a))};for(var g in a.x_state.config_node)d(g)})()}onAfterProcess(a){return k(function*(){return a})()}onDefineTitle(a){var f=
this;return k(function*(){var c=a.text;Object.keys(a.attributes).map(function(f){if("title"==f||"titulo"==f)return c=a.attributes[f],!1}.bind(f));return c})()}onDefineFilename(a){var f=this;return k(function*(){var c=a.text;c=c.replace(/ /g,"_")+".vue";a.icons.includes("gohome")?c=1==f.x_state.central_config.componente&&f.x_state.central_config.service_name?f.x_state.central_config.service_name+".vue":"index.vue":a.icons.includes("desktop_new")?-1!=a.text.indexOf("assets")?c="internal_assets.omit":
-1!=a.text.indexOf("store")?c="internal_stores.omit":-1!=a.text.indexOf("proxy")||-1!=a.text.indexOf("proxies")?c="internal_middleware.omit":-1!=a.text.indexOf("config")?c="config.omit":-1!=a.text.indexOf("modelos")?c="modelos.omit":["servidor","server","api"].includes(a.text)&&(c="server.omit"):-1!=a.text.indexOf("componente:")?c=a.text.split(":")[a.text.split(":").length-1]+".vue":-1!=a.text.indexOf("layout:")&&(c=a.text.split(":")[a.text.split(":").length-1]+".vue");return c})()}onDefineNodeName(a){return k(function*(){return a.text.replace(" ",
"_")})()}onCompleteCodeTemplate(a){return k(function*(){return a})()}onPrepare(){var a=this;return k(function*(){if(!a.x_state.central_config.componente&&a.x_state.central_config.deploy&&-1!=a.x_state.central_config.deploy.indexOf("eb:")){var f=require("ini"),c=require("path"),h=require("fs").promises,d=require("os"),e="";d=c.join(d.homedir(),"/.aws/")+"credentials";try{e=yield h.readFile(d,"utf-8")}catch(g){}if(a.x_state.config_node.aws){if(""!=e){var b=c.dirname(c.resolve(a.x_flags.dsl));c=c.join(b,
"aws_backup.ini");a.x_console.outT({message:"config:aws:creating .aws/credentials backup",color:"yellow"});yield h.writeFile(c,e,"utf-8")}a.x_console.outT({message:"config:aws:access ->".concat(a.x_state.config_node.aws.access)});a.x_console.outT({message:"config:aws:secret ->".concat(a.x_state.config_node.aws.secret)});f=f.stringify({aws_access_key_id:a.x_state.config_node.aws.access,aws_secret_access_key:a.x_state.config_node.aws.secret},{section:"default"});a.debug("Setting .aws/credentials from config node");
yield h.writeFile(d,f,"utf-8")}else""!=e&&(h=f.parse(e),h.default&&a.debug("Using local system AWS credentials",h.default),a.x_state.config_node.aws={access:"",secret:""},h.default.aws_access_key_id&&(a.x_state.config_node.aws.access=h.default.aws_access_key_id),h.default.aws_secret_access_key&&(a.x_state.config_node.aws.secret=h.default.aws_secret_access_key))}})()}onErrors(a){return k(function*(){})()}onCreateFiles(a){var f=this;return k(function*(){f.x_console.out({message:"onCreateFiles",data:a})})()}_isLocalServerRunning(){var a=
this;return k(function*(){return yield require("is-port-reachable")(a.x_state.central_config.port)})()}_readModelos(){var a=this;return k(function*(){a.debug("_readModelos");a.debug_time({id:"readModelos"});var f=yield a.dsl_parser.getNodes({text:"modelos",level:2,icon:"desktop_new",recurse:!0}),c={},h={tables:{},attributes:{},length:0,doc:""},d={id:{value:"INT AUTOINCREMENT PRIMARY KEY",alias:["identificador","autoid","autonum","key"]},texto:{value:"STRING",alias:["text","varchar","string"]},int:{value:"INTEGER",
alias:["numero chico","small int","numero"]},float:{value:"FLOAT",alias:["decimal","real"]},boolean:{value:"BOOLEAN",alias:["boleano","true/false"]},date:{value:"DATEONLY",alias:["fecha"]},datetime:{value:"DATETIME",alias:["fechahora"]},blob:{value:"BLOB",alias:["binario","binary"]}};Object.keys(d).map(function(a){var b=d[a].alias;b.push(a);b.map(b=>{c[b]=d[a].value})});if(0<f.length){h.attributes=l({},f[0].attributes);h.doc=f[0].text_note;h.length=f[0].nodes.length;for(var e of f[0].nodes){var b=
l({},e.attributes);h.tables[e.text]={fields:{}};f=[];for(var g in b)h.tables[e.text].fields[g]=c[b[g]],f.push(g+" "+c[b[g]]);h.tables[e.text].sql="CREATE TABLE ".concat(e.text,"(").concat(f.join(","),")")}}a.debug_timeEnd({id:"readModelos"});if(0<h.length){e=[];for(var k in h.tables)e.push("alasqlJs('".concat(h.tables[k].sql,"');"));k="const alasql = {\n\t\t\t\tinstall (v) {\n\t\t\t\t\t// create tables from models\n\t\t\t\t\t".concat(e.join("\n"),"\n\t\t\t\t\tVue.prototype.alasql = alasqlJs;\n\t\t\t\t}\n\t\t\t}");
a.x_state.plugins["../../node_modules/alasql/dist/alasql.min.js"]={global:!0,npm:{alasql:"*"},var:"alasqlJs",mode:"client",customvar:"alasql",custom:k}}return h})()}_readAssets(){var a=this;return k(function*(){var f={},c=require("path");a.debug("_readAssets");a.debug_time({id:"_readAssets"});var h=yield a.dsl_parser.getNodes({text:"assets",level:2,icon:"desktop_new",recurse:!0}),d=c.sep;if(0<h.length){h=h[0];for(var e of h.nodes)if(1==e.nodes.length&&""!=e.nodes[0].image)f[e.text.toLowerCase()]=
{i18n:!1,original:e.nodes[0].image,css:"~assets"+d+c.basename(e.nodes[0].image),js:"~"+d+"assets"+d+c.basename(e.nodes[0].image)};else if(1<e.nodes.length){h=e.text.toLowerCase();f[h]={i18n:!0,i18n_keys:[]};for(var b of e.nodes){var g=l({},b.attributes);g.idioma&&""!=b.image&&(g=g.idioma.toLowerCase(),f[h].i18n_keys.push(g),f[h][g]={original:b.image,css:"~assets"+d+c.basename(b.image),js:"~"+d+"assets"+d+c.basename(b.image)})}f[h].i18n_keys=f[h].i18n_keys.join(",")}else""!=e.link&&(f[e.text.toLowerCase()]=
{original:e.link,css:"~assets"+d+c.basename(e.link),js:"~"+d+"assets"+d+c.basename(e.link)})}a.debug_timeEnd({id:"_readAssets"});return f})()}_readCentralConfig(){var a=this;return k(function*(){a.debug("_readCentralConfig");var f=yield a.dsl_parser.getNodes({level:1,recurse:!1}),c={cloud:"aws",type:"simple",i18n:!1,log:"console",debug:!1,deploy:!1,static:!1,timeout:30,modelos:"aurora",componente:!1,"keep-alive":!0,"keep-warm":!0,port:3E3,git:!0,nuxt:"2.11.0",idiomas:"es",":cache":a.x_config.cache,
":mode":"spa",":keywords":"",":author":"Punto Origen SpA",":license":"MIT",":github":"",":version":"1.0.0",":description":f[0].text_note,default_face:f[0].font.face,default_size:f[0].font.size,apptitle:f[0].text};c=l(l({},c),f[0].attributes);c.service_name=c.dominio?c.dominio.replace(/\./g,"").toLowerCase():c.apptitle;c[":cache"]||(a.x_config.cache=!1);return c})()}_readConfig(){var a=this;return k(function*(){a.debug("_readConfig");var f={id:"",meta:[],seo:{},secrets:{}},c={};c=yield a.dsl_parser.getNodes({text:"config",
level:2,icon:"desktop_new",recurse:!0});if(0<c.length){c=c[0];f.default_face=c.font.face;f.default_size=c.font.size;for(var h of c.nodes)if("meta"==h.text.toLowerCase())for(var d of h.nodes)"keywords"==d.text.toLowerCase()?(f.seo.keywords=d.nodes.map(a=>a.text),f.meta.push({hid:a.hash(d.nodes[0].text),name:"keywords",content:f.seo.keywords.join(",")})):"language"==d.text.toLowerCase()?(f.seo.language=d.nodes[0].text,f.meta.push({hid:a.hash(d.nodes[0].text),lang:d.nodes[0].text})):"charset"==d.text.toLowerCase()?
(f.seo.charset=d.nodes[0].text,f.meta.push({charset:d.nodes[0].text})):(f.seo.charset=d.nodes[0].text,-1!=d.text.indexOf(":")?f.meta.push({property:d.text,vmid:d.text,content:d.nodes[0].text}):f.meta.push({hid:a.hash(d.nodes[0].text),name:d.text,content:d.nodes[0].text}));else if(0<Object.keys(h.attributes).length){c=h.text.toLowerCase().replace(/ /g,"");var e=l({},h.attributes);f[c]=e;h.icons.includes("password")&&(f[c][":secret"]=!0);""!=h.link&&(f[c][":link"]=h.link)}else 0<h.nodes.length?f[h.text]=
h.nodes[0].text:""!=h.link&&(f[h.text]=h.link)}f.name||(h=require("path"),d=h.dirname(h.resolve(a.x_flags.dsl)),c=h.resolve(d,"../"),d=d.replace(c,""),f.name=d.replace("/","").replace("\\","")+"_"+h.basename(a.x_flags.dsl,".dsl"));f.id||(f.id="com.puntorigen."+f.name);return f})()}getParentNodes(){var a=arguments,f=this;return k(function*(){var c=0<a.length&&void 0!==a[0]?a[0]:f.throwIfMissing("id"),h=1<a.length&&void 0!==a[1]?a[1]:!1,d=yield f.dsl_parser.getParentNodesIDs({id:c,array:!0});c=[];for(var e of d)d=
yield f.dsl_parser.getNode({id:e,recurse:!1}),(d=yield f.findValidCommand({node:d,object:h}))&&c.push(d);return c})()}getAsset(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.throwIfMissing("text"),f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"js",c=a;a=a.replaceAll("jsfunc","js").toLowerCase();if(-1!=c.toLowerCase().indexOf("assets:")&&c in this.x_state.assets)if(-1!=this.x_state.central_config.idiomas.indexOf(",")&&1==this.x_state.assets[c].i18n){var h=this.x_state.assets[c].i18n_keys.split(",")[0];
c=this.x_state.assets[c][h][a];"js"==f.toLowerCase()?(c=c.replaceAll("/".concat(h,"/"),"/' + $i18n.locale + '/"),c="require('".concat(c,"')")):"jsfunc"==f.toLowerCase()&&(c=c.replaceAll("/".concat(h,"/"),"/' + this.$i18n.locale + '/"),c="require('".concat(c,"')"))}else c in this.x_state.assets&&a in this.x_state.assets[c]&&(c=this.x_state.assets[c][a],-1!=f.toLowerCase().indexOf("js")&&(c="require('".concat(c,"')")));return c}struct2params(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
this.throwIfMissing("id"),f=[],c=l({},a);"aos"in c&&(a=a.aos.split(","),3==a.length?(c["data-aos"]=a[0],c["data-aos-duration"]=a[1],c["data-aos-delay"]=a[2]):(c["data-aos"]=a[0],c["data-aos-duration"]=a[1]),delete c.aos);var h,d;for([h,d]of Object.entries(c))null===d?f.push(h):"object"!==typeof d&&"function"!==typeof d&&"undefined"!==typeof d&&f.push("".concat(h,"='").concat(d,"'"));return f.join(" ")}hash(a){var f=require("highwayhash"),c;"string"===typeof a?c=Buffer.from(a):"object"===typeof a&&
(c=Buffer.from(JSON.stringify(a)));return f.asHexString(this.x_crypto_key,c)}}return C})
