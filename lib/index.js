'use strict';(function(q,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f():"function"===typeof define&&define.amd?define(f):(q="undefined"!==typeof globalThis?globalThis:q||self,q.vue_dsl=f())})(this,function(){function q(a,d,b,e,c,n,p){try{var g=a[n](p),k=g.value}catch(l){b(l);return}g.done?d(k):Promise.resolve(k).then(e,c)}function f(a){return function(){var d=this,b=arguments;return new Promise(function(e,c){function n(a){q(g,e,c,n,p,"next",a)}function p(a){q(g,e,c,n,
p,"throw",a)}var g=a.apply(d,b);n(void 0)})}}function t(a,d){var b=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);d&&(e=e.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable}));b.push.apply(b,e)}return b}function h(a){for(var d=1;d<arguments.length;d++){var b=null!=arguments[d]?arguments[d]:{};d%2?t(Object(b),!0).forEach(function(e){var c=b[e];e in a?Object.defineProperty(a,e,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[e]=c}):
Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):t(Object(b)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(b,e))})}return a}function v(a){return r.apply(this,arguments)}function r(){r=f(function*(a){var d={hint:"Allowed node type that must be ommited",func:function(){var b=f(function*(e,c){return a.reply_template({hasChildren:!1,state:c})});return function(a,c){return b.apply(this,arguments)}}()};return{def_config:h(h({},
d),{x_icons:"desktop_new",x_level:"2",x_text_contains:"config"}),def_modelos:h(h({},d),{x_icons:"desktop_new",x_level:"2",x_text_contains:"modelos"}),def_assets:h(h({},d),{x_icons:"desktop_new",x_level:"2",x_text_contains:"assets"}),def_server:{x_icons:"desktop_new",x_level:"2",x_text_contains:"server|servidor|api",hint:"Representa a un backend integrado con funciones de express.",func:function(){var b=f(function*(e,c){e=a.reply_template();a.x_state.npm=h(h({},a.x_state.npm),{body_parser:"*","cookie-parser":"*"});
a.x_state.central_config.static=!1;return e});return function(a,c){return b.apply(this,arguments)}}()},def_path:{x_icons:"list",x_level:"3,4",x_or_isparent:"def_server",x_not_icons:"button_cancel,desktop_new,help",hint:"Carpeta para ubicacion de funcion de servidor",func:function(){var b=f(function*(e,c){c=a.reply_template({state:c});if(2==e.level)c.state.current_folder=e.text;else if(3==e.level&&(yield a.isExactParentID(e.id,"def_path"))){var b=yield a.dsl_parser.getParentNode({id:e.id});c.state.current_folder=
"".concat(b.text,"/").concat(e.id)}else c.valid=!1;return c});return function(a,c){return b.apply(this,arguments)}}()},def_server_func:{x_empty:"icons",x_level:"3,4,5",x_or_isparent:"def_server",hint:"Corresponde a la declaracion de una funcion de servidor",func:function(){var b=f(function*(e,c){c=a.reply_template({state:c});a.x_state.central_config.static=!1;c.state.current_func=e.text;2!=e.level&&(yield a.getParentNodes(e.id));c.open="<func_code>";c.close="</func_code>";return c});return function(a,
c){return b.apply(this,arguments)}}()},def_store:{x_icons:"desktop_new",x_level:"2",x_text_contains:"store",hint:"Representa una coleccion de stores de Vue",func:function(){var b=f(function*(e,c){return a.reply_template({state:c,hasChildren:!0})});return function(a,c){return b.apply(this,arguments)}}()},def_store_def:{x_empty:"icons",x_level:"3",x_all_hasparent:"def_store",hint:"Representa a una definicion de store de VueX",func:function(){var b=f(function*(e,c){c=a.reply_template({state:c});var b=
"normal",d="";c.state.current_store=e.text;a.x_state.stores||(a.x_state.stores={});a.x_state.stores&&!1===e.text in a.x_state.stores&&(a.x_state.stores[e.text]={});var g={};e.attributes.map(function(a){g=h(h({},g),a)});Object.keys(g).map(function(c){c=c.toLowerCase();[":type","type","tipo",":tipo"].includes(c)?["sesion","session"].includes(g[c])?(b="session",a.x_state.npm["nuxt-vuex-localstorage"]="*"):"local persistent persistente localstorage storage db bd".split(" ").includes(g[c])&&(b="local",
a.x_state.npm["nuxt-vuex-localstorage"]="*"):["version",":version"].includes(c)?d=g[c]:["expire",":expire","expira",":expira"].includes(c)});a.x_state.stores_types&&!1===b in a.x_state.stores_types&&(a.x_state.stores_types[b]={});!1===c.state.current_store in a.x_state.stores_types[b]&&(a.x_state.stores_types[b][c.state.current_store]={});""!=d&&!1===c.state.current_store in a.x_state.stores_types.versions&&(a.x_state.stores_types.versions[c.state.current_store]={});""!=d&&!1===c.state.current_store in
a.x_state.stores_types.expires&&(a.x_state.stores_types.expires[c.state.current_store]={});return c});return function(a,c){return b.apply(this,arguments)}}()},def_proxies:{x_icons:"desktop_new",x_level:2,x_text_contains:"prox",hint:"Representa una coleccion de proxies de Vue",func:function(){var b=f(function*(e,c){return a.reply_template({state:c,hasChildren:!0})});return function(a,c){return b.apply(this,arguments)}}()},def_page:{x_level:"2",x_not_icons:"button_cancel,desktop_new,list,help",x_not_text_contains:"componente:,layout:",
hint:"Archivo vue",func:function(){var b=f(function*(e,c){var b=a.reply_template({state:c});b.state.current_page=e.text;a.x_state.pages[b.state.current_page]||(a.x_state.pages[b.state.current_page]={tipo:"page",acceso:"*",params:"",layout:"",defaults:{},imports:{},components:{},directives:{},variables:{},seo:{},meta:{},head:{script:[],meta:[],seo:{}},var_types:{},proxies:"",return:"",styles:{},script:{},path:"/"+b.state.current_page});e.icons.includes("gohome")&&(a.x_state.pages[b.state.current_page].path=
"/");var d={},g={};e.attributes.map(function(a){d=h(h({},d),a)});Object.keys(d).map(function(c){var e=d[c];e=e.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");["proxy"].includes(c.toLowerCase())?a.x_state.pages[b.state.current_page].proxies=e:["acceso","method"].includes(c.toLowerCase())?a.x_state.pages[b.state.current_page].acceso=e:["path","url","ruta"].includes(c.toLowerCase())?a.x_state.pages[b.state.current_page].path=
e:["layout"].includes(c.toLowerCase())?a.x_state.pages[b.state.current_page].layout=e:["meta:title","meta:titulo"].includes(c.toLowerCase())?a.x_state.pages[b.state.current_page].xtitle=e:["background","fondo"].includes(c.toLowerCase())?(g.id="tapa",c=a.getAsset(e,"css"),a.x_state.pages[b.state.current_page].styles["#tapa"]={"background-image":"url('".concat(c,"')"),"background-repeat":"no-repeat","background-size":"100vw"}):":"!=c.charAt(0)&&e!=d[c]?g[":"+c]=e:g[c]=e}.bind(this));""!=e.text_note&&
(b.open="\x3c!-- ".concat(e.text_note.replaceAll("<br/ >","\n")," --\x3e\n"));b.open+="<template>\n";""==a.x_state.pages[b.state.current_page].layout&&(b.open+="\t"+a.tagParams("v-app",g,!1)+"\n",b.close+="\t</v-app>\n");b.close+="</template>\n";return b});return function(a,c){return b.apply(this,arguments)}}()},def_margen:{x_icons:"idea",x_text_contains:"margen",hint:"Define un margen alrededor del contenido",func:function(){var b=f(function*(b,c){c=a.reply_template({state:c});var e={},d={};b.attributes.map(function(a){e=
h(h({},e),a)});Object.keys(e).map(function(a){var c=e[a];c=c.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if("props"==a.toLowerCase())for(var b of c.split(","))d[b]="vue:prop";else d[a]=c});c.open+=a.tagParams("v-container",d,!1)+"\n";c.close+="</v-container>\n";return c});return function(a,c){return b.apply(this,arguments)}}()},def_center:{x_icons:"idea",x_text_contains:"centrar",hint:"Centra nodos hijos",
func:function(){var b=f(function*(b,c){c=a.reply_template({state:c});var e={refx:b.id,class:"text-xs-center"};""!=b.text_note&&(c.open="\x3c!-- ".concat(b.text_note," --\x3e"));c.open=a.tagParams("div",e,!1)+"<center>\n";c.close+="</center></div>\n";return c});return function(a,c){return b.apply(this,arguments)}}()},def_html:{x_icons:"idea",x_text_contains:"html:",hint:"html:x, donde x es cualquier tag",func:function(){var b=f(function*(b,c){c=a.reply_template({state:c});var e={refx:b.id},d={};b.attributes.map(function(a){d=
h(h({},d),a)});Object.keys(d).map(function(c){var b=d[c];b=b.replaceAll("$variables.","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$config.","process.env").replaceAll("$store.","$store.state.");if("props"==c.toLowerCase())for(var n of b.split(","))e[n]="vue:prop";else if(":"!=c.charAt(0)&&b!=d[c])e[":"+c]=b;else if("v-model"!=c)if(-1!=a.x_state.central_config.idiomas.indexOf(",")){n=a.x_state.centrar.idiomas.split(",")[0];a.x_state.strings_i18n[n]||(a.x_state.strings_i18n[n]=
{});var g="t_"+a.hash(b);a.x_state.strings_i18n[n][g]=b;e[":"+c]="$t('".concat(g,"')")}else e[c]=b;else e[c]=b}.bind(this));""!=b.text_note&&(c.open="\x3c!-- ".concat(b.text_note," --\x3e"));b=b.text.replace("html:","");c.open+=a.tagParams(b,e,!1)+"\n";c.close+="</".concat(b,">\n");return c});return function(a,c){return b.apply(this,arguments)}}()},def_textonly:{x_level:">2",x_empty:"icons",x_priority:1E7,x_or_hasparent:"def_page,def_componente,def_layout",hint:"Texto a mostrar",func:function(){var b=
f(function*(b,c){c=a.reply_template({state:c});var d={class:[]},e=b.text.replaceAll("$variables","").replaceAll("$vars.","").replaceAll("$params.","").replaceAll("$env.","process.env.").replaceAll("$store.","$store.state.");""==e&&(e="&nbsp;");if(1==a.hasParentID(b.id,"def_toolbar")&&0==a.hasParentID(b.id,"def_slot"))c.valid=!1,c.invalidated_me="def_toolbar";else if(1==a.hasParentID(b.id,"def_variables"))c.valid=!1,c.invalidated_me="def_variables";else if(1==a.hasParentID(b.id,"def_page_estilos"))c.valid=
!1,c.invalidated_me="def_page_estilos";else if(1==a.hasParentID(b.id,"def_page_estilos"))c.valid=!1,c.invalidated_me="def_datatable_headers";else{""!=b.text_note&&(c.open+="\x3c!-- ".concat(b.text_note," --\x3e\n"));if(-1!=b.text.indexOf("..lorem..")&&-1!=b.text.indexOf(":")){var g=b.text.split(":");g=g[g.length-1]}-1!=b.text.indexOf("numeral(")&&(a.x_state.plugins["vue-numeral-filter"]={global:!0,npm:{"vue-numeral-filter":"*"},config:"{ locale: 'es-es' }"});1==b.font.bold&&d.class.push("font-weight-bold");
10<=b.font.size&&d.class.push("caption");1==b.font.italic&&d.class.push("font-italic");var k;for([m,k]of Object.entries(b.attributes)){var l=m.toLowerCase();if("class"==l)d.class.push(k);else if(":span"==l)var f=!0;else if(":omit"==l)var h=!0;else if([":length",":largo","len","length","largo"].includes(m))g=k;else if("small"==m)var q=!0;else["ucase","mayusculas","mayuscula"].includes(m)?"true"!=k&&1!=k||d.class.push("text-uppercase"):["capitales","capitalize","capital"].includes(m)?"true"!=k&&1!=
k||d.class.push("text-capitalize"):["lcase","minusculas","minuscula"].includes(m)?"true"!=k&&1!=k||d.class.push("text-lowercase"):"truncate"==m?"true"!=k&&1!=k||d.class.push("text-truncate"):"no-wrap"==m?"true"!=k&&1!=k||d.class.push("text-no-wrap"):["weight","peso","grosor"].includes(m)?(l=k.toLowerCase(),["thin","fina","100"].includes(l)?d.class.push("font-weight-thin"):["light","300"].includes(l)?d.class.push("font-weight-light"):["regular","400"].includes(l)?d.class.push("font-weight-light"):
["medium","500"].includes(l)?d.class.push("font-weight-medium"):["bold","700"].includes(l)?d.class.push("font-weight-bold"):["black","gruesa","900"].includes(l)&&d.class.push("font-weight-black")):"color"==m?-1!=m.indexOf(" ")?(l=k.split(" "),d.class.push("".concat(l[0],"--text text--").concat(l[1]))):d.class.push("".concat(k,"--text")):"align"==m?(l=k.toLowerCase(),["center","centro","centrar"].includes(l)?d.class.push("text-xs-center"):["right","derecha"].includes(l)?d.class.push("text-xs-right"):
["left","izquierda","izquierdo"].includes(l)&&d.class.push("text-xs-left")):"style"==m?(d.style||(d.styles=[]),d.styles.push(k)):":"!=m.charAt(0)&&""!=b.text&&e!=b.text?d[":"+m]=k:d[m]=values}if(g){var m=require("lorem-ipsum").loremIpsum;e=m({count:parseInt(g),units:"words"})}q&&(e="<small>".concat(e,"</small>"));d.class=d.class.map(function(a){a.replaceAll("text-h1","display-4").replaceAll("text-h2","display-3").replaceAll("text-h3","display-2").replaceAll("text-h4","display-1").replaceAll("text-h5",
"headline").replaceAll("text-subtitle-1","subtitle-1").replaceAll("text-subtitle-2","subtitle-2").replaceAll("text-h6","title").replaceAll("text-body-1","body-1").replaceAll("text-body-2","body-2").replaceAll("text-caption","caption").replaceAll("text-overline","overline");return a});0<d.class.length&&(d.class=d.class.join(" "));d.style&&(d.styles=d.styles.join(";"));h||(a.hasParentID(b.id,"def_textonly")||f?c.open+=a.tagParams("span",d)+e+"</span>\n":a.hasParentID(b.id,"def_card_title")&&!d.class?
c.open+=e+"\n":c.open+=a.tagParams("div",d)+e+"</div>\n")}return c});return function(a,c){return b.apply(this,arguments)}}()},def_imagen:{x_icons:"idea",x_not_icons:"button_cancel,desktop_new,help",x_not_empty:"attributes[:src]",x_empty:"",x_level:">2",func:function(){var b=f(function*(b,c){return a.reply_template({otro:"Pablo",state:c})});return function(a,c){return b.apply(this,arguments)}}()}}});return r.apply(this,arguments)}String.prototype.replaceAll=function(a,d){a=a.replace(/[-\/\\^$*+?.()|[\]{}]/g,
"\\$&");return this.replace(new RegExp(a,"ig"),d)};var w=require("concepto");class x extends w{constructor(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d=h(h({},{class:"vue",debug:!0}),d);super(a,d)}onInit(){var a=this;return f(function*(){yield a.addCommands(v);a.x_crypto_key=require("crypto").randomBytes(32);a.x_state={plugins:{},npm:{},dev_npm:{},envs:{},funciones:{},proxies:{},pages:{},current_func:"",current_folder:"",current_proxy:"",strings_i18n:{},stores_types:{versions:{},
expires:{}}};a.x_state.config_node=yield a._readConfig();a.x_state.central_config=yield a._readCentralConfig();a.x_state.assets=yield a._readAssets();a.x_state.dirs=a.x_state.central_config.componente?yield a._appFolders({components:"",pages:"",assets:"assets/","static":"static/",umd:"umd/"}):yield a._appFolders({client:"client/",layouts:"client/layouts/",components:"client/components/",pages:"client/pages/",plugins:"client/plugins/","static":"client/static/",middleware:"client/middleware/",server:"client/server/",
assets:"client/assets/",css:"client/assets/css/",store:"client/store/",lang:"client/lang/"});a.x_state.models=yield a._readModelos();a.x_state.nuxt_is_running=yield a._isLocalServerRunning();a.debug("is Server Running: "+a.x_state.nuxt_is_running);if(a.x_state.config_node.copiar){var d=require("path"),b=d.dirname(d.resolve(a.x_flags.dsl)),e=require("recursive-copy");a.x_console.outT({message:"copying config:copiar directories to 'static' target folder",color:"yellow"});yield Object.keys(a.x_state.config_node.copiar).map(function(){var a=
f(function*(a){a=d.join(b,a);try{yield e(a,this.x_state.dirs.static)}catch(u){"EEXIST"!=u.code&&this.x_console.outT({message:"error: copying directory ".concat(a),data:u})}});return function(b){return a.apply(this,arguments)}}().bind(a));a.x_console.outT({message:"copying config:copiar directories ... READY",color:"yellow"})}if(a.x_state.config_node["nuxt:icon"]){a.x_state.npm["@nuxtjs/pwa"]="*";var c=require("path"),n=c.dirname(c.resolve(a.x_flags.dsl));c=c.join(n,a.x_state.config_node["nuxt:icon"]);
n=a.x_state.dirs.static+"icon.png";a.debug({message:"NUXT ICON dump (copy icon)",color:"yellow",data:c});var h=require("fs").promises;try{yield h.copyFile(c,n)}catch(k){a.x_console.outT({message:"error: copying NUXT icon",data:k})}}a.x_state.config_node["google:adsense"]&&(a.x_state.npm["vue-google-adsense"]="*",a.x_state.npm["vue-script2"]="*");a.x_state.config_node["google:analytics"]&&(a.x_state.npm["@nuxtjs/google-gtag"]="*");a.x_state.central_config.componente?(a.x_console.outT({message:"vue initialized() -> as component/plugin"}),
a.x_state.npm.global="^4.4.0",a.x_state.npm.poi="9",a.x_state.npm.underscore="*",a.x_state.dev_npm["@vue/test-utils"]="^1.0.0-beta.12",a.x_state.dev_npm["babel-core"]="^6.26.0",a.x_state.dev_npm["babel-preset-env"]="^1.6.1",a.x_state.dev_npm.jest="^22.4.0",a.x_state.dev_npm["jest-serializer-vue"]="^0.3.0",a.x_state.dev_npm.vue="*",a.x_state.dev_npm["vue-jest"]="*",a.x_state.dev_npm["vue-server-renderer"]="*",a.x_state.dev_npm["vue-template-compiler"]="*"):(a.x_console.outT({message:"vue initialized() ->"}),
a.x_state.plugins["vue-moment"]={global:!0,npm:{"vue-moment":"*"},extra_imports:["moment"],requires:["moment/locale/es"],config:"{ moment }"},a.x_state.npm["@nuxtjs/axios"]="*",a.x_state.npm.nuxt="latest"==a.x_state.central_config.nuxt?"*":"2.11.0",a.x_state.npm.express="*",a.x_state.npm["serverless-http"]="*",a.x_state.npm["serverless-apigw-binary"]="*",a.x_state.npm.underscore="*",a.x_state.dev_npm["serverless-prune-plugin"]="*",a.x_state.dev_npm["serverless-offline"]="*",a.x_state.dev_npm["vue-beautify-loader"]=
"*",a.x_state.central_config.dominio&&(a.x_state.dev_npm["serverless-domain-manager"]="*"));c=function(b){["aurora","vpc","aws"].includes(b)&&"object"===typeof a.x_state.config_node[b]&&Object.keys(a.x_state.config_node[b]).map(function(a){this.x_state.envs["config.".concat(b,".").concat(a)]="process.env.".concat((b+"_"+a).toUpperCase())}.bind(a))};for(var g in a.x_state.config_node)c(g)})()}onAfterProcess(a){return f(function*(){return a})()}onDefineTitle(a){return f(function*(){var d=a.text,b;for(b in a.attributes)if(["title",
"titulo"].includes(a.attributes[b])){d=a.attributes[b];break}return d})()}onDefineFilename(a){var d=this;return f(function*(){var b=a.text;b=b.replace(/ /g,"_")+".vue";a.icons.includes("gohome")?b=1==d.x_state.central_config.componente&&d.x_state.central_config.service_name?d.x_state.central_config.service_name+".vue":"index.vue":a.icons.includes("desktop_new")?-1!=a.text.indexOf("assets")?b="internal_assets.omit":-1!=a.text.indexOf("store")?b="internal_stores.omit":-1!=a.text.indexOf("proxy")||-1!=
a.text.indexOf("proxies")?b="internal_middleware.omit":-1!=a.text.indexOf("config")?b="config.omit":-1!=a.text.indexOf("modelos")?b="modelos.omit":["servidor","server","api"].includes(a.text)&&(b="server.omit"):-1!=a.text.indexOf("componente:")?b=a.text.split(":")[a.text.split(":").length-1]+".vue":-1!=a.text.indexOf("layout:")&&(b=a.text.split(":")[a.text.split(":").length-1]+".vue");return b})()}onDefineNodeName(a){return f(function*(){return a.text.replace(" ","_")})()}onCompleteCodeTemplate(a){return f(function*(){return a})()}onPrepare(){var a=
this;return f(function*(){if(!a.x_state.central_config.componente){require("ini");var d=require("path"),b=require("fs").promises;if(!a.x_state.config_node.aws){d=d.join(os.homedir(),"/.aws/")+"credentials";try{a.debug("trying to read AWS credentials:",d);var e=b.readFile(d,"utf-8");a.debug("AWS credentials:",e)}catch(c){}}}})()}onErrors(a){return f(function*(){})()}onCreateFiles(a){var d=this;return f(function*(){d.x_console.out({message:"onCreateFiles",data:a})})()}_isLocalServerRunning(){var a=
this;return f(function*(){return yield require("is-port-reachable")(a.x_state.central_config.port)})()}_readModelos(){var a=this;return f(function*(){a.debug("_readModelos");a.debug_time({id:"readModelos"});var d=yield a.dsl_parser.getNodes({text:"modelos",level:2,icon:"desktop_new",recurse:!0}),b,e={},c={tables:{},attributes:{},length:0,doc:""},f={id:{value:"INT AUTOINCREMENT PRIMARY KEY",alias:["identificador","autoid","autonum","key"]},texto:{value:"STRING",alias:["text","varchar","string"]},int:{value:"INTEGER",
alias:["numero chico","small int","numero"]},float:{value:"FLOAT",alias:["decimal","real"]},boolean:{value:"BOOLEAN",alias:["boleano","true/false"]},date:{value:"DATEONLY",alias:["fecha"]},datetime:{value:"DATETIME",alias:["fechahora"]},blob:{value:"BLOB",alias:["binario","binary"]}};Object.keys(f).map(function(a){var b=f[a].alias;b.push(a);b.map(b=>{e[b]=f[a].value})});if(0<d.length){d[0].attributes.map(a=>{c.attributes=h(h({},c.attributes),a)});c.doc=d[0].text_note;c.length=d[0].nodes.length;var p=
function(a){var d={};a.attributes.map(a=>{d=h(h({},d),a)});c.tables[a.text]={fields:{}};b=[];for(var f in d)c.tables[a.text].fields[f]=e[d[f]],b.push(f+" "+e[d[f]]);c.tables[a.text].sql="CREATE TABLE ".concat(a.text,"(").concat(b.join(","),")")},g;for(g of d[0].nodes)p(g)}a.debug_timeEnd({id:"readModelos"});if(0<c.length){d=[];for(var k in c.tables)d.push("alasqlJs('".concat(c.tables[k].sql,"');"));k="const alasql = {\n\t\t\t\tinstall (v) {\n\t\t\t\t\t// create tables from models\n\t\t\t\t\t".concat(d.join("\n"),
"\n\t\t\t\t\tVue.prototype.alasql = alasqlJs;\n\t\t\t\t}\n\t\t\t}");a.x_state.plugins["../../node_modules/alasql/dist/alasql.min.js"]={global:!0,npm:{alasql:"*"},var:"alasqlJs",mode:"client",customvar:"alasql",custom:k}}return c})()}_readAssets(){var a=this;return f(function*(){var d={},b=require("path");a.debug("_readAssets");a.debug_time({id:"_readAssets"});var e=yield a.dsl_parser.getNodes({text:"assets",level:2,icon:"desktop_new",recurse:!0}),c=b.sep;if(0<e.length){e=e[0];for(var f of e.nodes)if(1==
f.nodes.length&&""!=f.nodes[0].image)d[f.text.toLowerCase()]={i18n:!1,original:f.nodes[0].image,css:"~assets"+c+b.basename(f.nodes[0].image),js:"~"+c+"assets"+c+b.basename(f.nodes[0].image)};else if(1<f.nodes.length){var p=f.text.toLowerCase();d[p]={i18n:!0,i18n_keys:[]};e=function(a){var e={};a.attributes.map(function(a){e=h(h({},e),a)});if(e.idioma&&""!=a.image){var f=e.idioma.toLowerCase();d[p].i18n_keys.push(f);d[p][f]={original:a.image,css:"~assets"+c+b.basename(a.image),js:"~"+c+"assets"+c+
b.basename(a.image)}}};for(var g of f.nodes)e(g);d[p].i18n_keys=d[p].i18n_keys.join(",")}else""!=f.link&&(d[f.text.toLowerCase()]={original:f.link,css:"~assets"+c+b.basename(f.link),js:"~"+c+"assets"+c+b.basename(f.link)})}a.debug_timeEnd({id:"_readAssets"});return d})()}_readCentralConfig(){var a=this;return f(function*(){a.debug("_readCentralConfig");var d=yield a.dsl_parser.getNodes({level:1,recurse:!1}),b={cloud:"aws",type:"simple",i18n:!1,log:"console",debug:!1,deploy:!1,static:!1,timeout:30,
modelos:"aurora",componente:!1,"keep-alive":!0,"keep-warm":!0,port:3E3,git:!0,nuxt:"2.11.0",idiomas:"es",":cache":a.x_config.cache,":mode":"spa",":keywords":"",":author":"Punto Origen SpA",":license":"MIT",":github":"",":version":"1.0.0",":description":d[0].text_note,default_face:d[0].font.face,default_size:d[0].font.size,apptitle:d[0].text};d[0].attributes.map(function(a){b=h(h({},b),a)});b.service_name=b.dominio?b.dominio.replace(/\./g,"").toLowerCase():b.apptitle;b[":cache"]||(a.x_config.cache=
!1);return b})()}_readConfig(){var a=this;return f(function*(){a.debug("_readConfig");var d={id:"",meta:[],seo:{},secrets:{}},b={};b=yield a.dsl_parser.getNodes({text:"config",level:2,icon:"desktop_new",recurse:!0});if(0<b.length){b=b[0];d.default_face=b.font.face;d.default_size=b.font.size;for(var e of b.nodes)if("meta"==e.text.toLowerCase())for(var c of e.nodes)"keywords"==c.text.toLowerCase()?(d.seo.keywords=c.nodes.map(a=>a.text),d.meta.push({hid:a.hash(c.nodes[0].text),name:"keywords",content:d.seo.keywords.join(",")})):
"language"==c.text.toLowerCase()?(d.seo.language=c.nodes[0].text,d.meta.push({hid:a.hash(c.nodes[0].text),lang:c.nodes[0].text})):"charset"==c.text.toLowerCase()?(d.seo.charset=c.nodes[0].text,d.meta.push({charset:c.nodes[0].text})):(d.seo.charset=c.nodes[0].text,-1!=c.text.indexOf(":")?d.meta.push({property:c.text,vmid:c.text,content:c.nodes[0].text}):d.meta.push({hid:a.hash(c.nodes[0].text),name:c.text,content:c.nodes[0].text}));else 0<e.attributes.length?function(){var a=e.text.toLowerCase().replace(/ /g,
""),b={};e.attributes.map(function(a){b=h(h({},b),a)});d[a]=b;e.icons.includes("password")&&(d[a][":secret"]=!0);""!=e.link&&(d[a][":link"]=e.link)}():0<e.nodes.length?d[e.text]=e.nodes[0].text:""!=e.link&&(d[e.text]=e.link)}if(!d.name){c=require("path");b=c.dirname(c.resolve(a.x_flags.dsl));var f=c.resolve(b,"../");b=b.replace(f,"");d.name=b.replace("/","").replace("\\","")+"_"+c.basename(a.x_flags.dsl,".dsl")}d.id||(d.id="com.puntorigen."+d.name);return d})()}getParentNodes(){var a=arguments,d=
this;return f(function*(){var b=0<a.length&&void 0!==a[0]?a[0]:d.throwIfMissing("id"),e=yield d.dsl_parser.getParentNodesIDs({id:b,array:!0});b=[];for(var c of e)e=yield d.dsl_parser.getNode({id:c,recurse:!1}),(e=yield d.findValidCommand({node:e}))&&b.push(e);return b})()}getAsset(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.throwIfMissing("text"),d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"js",b=a;a=a.replaceAll("jsfunc","js").toLowerCase();if(-1!=b.toLowerCase().indexOf("assets:")&&
b in this.x_state.assets)if(-1!=this.x_state.central_config.idiomas.indexOf(",")&&1==this.x_state.assets[b].i18n){var e=this.x_state.assets[b].i18n_keys.split(",")[0];b=this.x_state.assets[b][e][a];"js"==d.toLowerCase()?(b=b.replaceAll("/".concat(e,"/"),"/' + $i18n.locale + '/"),b="require('".concat(b,"')")):"jsfunc"==d.toLowerCase()&&(b=b.replaceAll("/".concat(e,"/"),"/' + this.$i18n.locale + '/"),b="require('".concat(b,"')"))}else b in this.x_state.assets&&a in this.x_state.assets[b]&&(b=this.x_state.assets[b][a],
-1!=d.toLowerCase().indexOf("js")&&(b="require('".concat(b,"')")));return b}tagParams(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,e=h({},d);"aos"in d&&(d=d.aos.split(","),3==d.length?(e["data-aos"]=d[0],e["data-aos-duration"]=d[1],e["data-aos-delay"]=d[2]):(e["data-aos"]=d[0],e["data-aos-duration"]=d[1]),delete e.aos);e=this.struct2params(e);a=""!=e?"<".concat(a,
" ").concat(e):"<".concat(a);1==b&&(a+="/");return a+">"}hash(a){var d=require("highwayhash"),b;"string"===typeof a?b=Buffer.from(a):"object"===typeof a&&(b=Buffer.from(JSON.stringify(a)));return d.asHexString(this.x_crypto_key,b)}}return x})
